var Xu=Object.defineProperty,Zu=Object.defineProperties;var Qu=Object.getOwnPropertyDescriptors;var ws=Object.getOwnPropertySymbols,Ju=Object.getPrototypeOf,hi=Object.prototype.hasOwnProperty,mi=Object.prototype.propertyIsEnumerable,Yu=Reflect.get;var ir=(t,e)=>(e=Symbol[t])?e:Symbol.for("Symbol."+t);var pi=Math.pow,or=(t,e,s)=>e in t?Xu(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s,k=(t,e)=>{for(var s in e||(e={}))hi.call(e,s)&&or(t,s,e[s]);if(ws)for(var s of ws(e))mi.call(e,s)&&or(t,s,e[s]);return t},H=(t,e)=>Zu(t,Qu(e));var Es=(t,e)=>{var s={};for(var r in t)hi.call(t,r)&&e.indexOf(r)<0&&(s[r]=t[r]);if(t!=null&&ws)for(var r of ws(t))e.indexOf(r)<0&&mi.call(t,r)&&(s[r]=t[r]);return s};var g=(t,e,s)=>or(t,typeof e!="symbol"?e+"":e,s);var ar=(t,e,s)=>Yu(Ju(t),s,e);var C=(t,e,s)=>new Promise((r,n)=>{var i=u=>{try{a(s.next(u))}catch(c){n(c)}},o=u=>{try{a(s.throw(u))}catch(c){n(c)}},a=u=>u.done?r(u.value):Promise.resolve(u.value).then(i,o);a((s=s.apply(t,e)).next())}),Oe=function(t,e){this[0]=t,this[1]=e},dt=(t,e,s)=>{var r=(o,a,u,c)=>{try{var h=s[o](a),d=(a=h.value)instanceof Oe,f=h.done;Promise.resolve(d?a[0]:a).then(m=>d?r(o==="return"?o:"next",a[1]?{done:m.done,value:m.value}:m,u,c):u({value:m,done:f})).catch(m=>r("throw",m,u,c))}catch(m){c(m)}},n=o=>i[o]=a=>new Promise((u,c)=>r(o,a,u,c)),i={};return s=s.apply(t,e),i[ir("asyncIterator")]=()=>i,n("next"),n("throw"),n("return"),i};var Jt=(t,e,s)=>(e=t[ir("asyncIterator")])?e.call(t):(t=t[ir("iterator")](),e={},s=(r,n)=>(n=t[r])&&(e[r]=i=>new Promise((o,a,u)=>(i=n.call(t,i),u=i.done,Promise.resolve(i.value).then(c=>o({value:c,done:u}),a)))),s("next"),s("return"),e);const ed=t=>({setHttpHandler(e){t.httpHandler=e},httpHandler(){return t.httpHandler},updateHttpClientConfig(e,s){var r;(r=t.httpHandler)==null||r.updateHttpClientConfig(e,s)},httpHandlerConfigs(){return t.httpHandler.httpHandlerConfigs()}}),td=t=>({httpHandler:t.httpHandler()});var ls;(function(t){t.HTTP="http",t.HTTPS="https"})(ls||(ls={}));var Is;(function(t){t.MD5="md5",t.CRC32="crc32",t.CRC32C="crc32c",t.SHA1="sha1",t.SHA256="sha256"})(Is||(Is={}));const Kr="__smithy_context";class le{constructor(e){g(this,"method");g(this,"protocol");g(this,"hostname");g(this,"port");g(this,"path");g(this,"query");g(this,"headers");g(this,"username");g(this,"password");g(this,"fragment");g(this,"body");this.method=e.method||"GET",this.hostname=e.hostname||"localhost",this.port=e.port,this.query=e.query||{},this.headers=e.headers||{},this.body=e.body,this.protocol=e.protocol?e.protocol.slice(-1)!==":"?`${e.protocol}:`:e.protocol:"https:",this.path=e.path?e.path.charAt(0)!=="/"?`/${e.path}`:e.path:"/",this.username=e.username,this.password=e.password,this.fragment=e.fragment}static clone(e){const s=new le(H(k({},e),{headers:k({},e.headers)}));return s.query&&(s.query=sd(s.query)),s}static isInstance(e){if(!e)return!1;const s=e;return"method"in s&&"protocol"in s&&"hostname"in s&&"path"in s&&typeof s.query=="object"&&typeof s.headers=="object"}clone(){return le.clone(this)}}function sd(t){return Object.keys(t).reduce((e,s)=>{const r=t[s];return H(k({},e),{[s]:Array.isArray(r)?[...r]:r})},{})}class pt{constructor(e){g(this,"statusCode");g(this,"reason");g(this,"headers");g(this,"body");this.statusCode=e.statusCode,this.reason=e.reason,this.headers=e.headers||{},this.body=e.body}static isInstance(e){if(!e)return!1;const s=e;return typeof s.statusCode=="number"&&typeof s.headers=="object"}}function rd(t){return e=>s=>C(null,null,function*(){var n,i,o,a,u,c;const{request:r}=s;if(t.expectContinueHeader!==!1&&le.isInstance(r)&&r.body&&t.runtime==="node"&&((i=(n=t.requestHandler)==null?void 0:n.constructor)==null?void 0:i.name)!=="FetchHttpHandler"){let h=!0;if(typeof t.expectContinueHeader=="number")try{h=((c=(u=Number((o=r.headers)==null?void 0:o["content-length"]))!=null?u:(a=t.bodyLengthChecker)==null?void 0:a.call(t,r.body))!=null?c:1/0)>=t.expectContinueHeader}catch(d){}else h=!!t.expectContinueHeader;h&&(r.headers.Expect="100-continue")}return e(H(k({},s),{request:r}))})}const nd={step:"build",tags:["SET_EXPECT_HEADER","EXPECT_HEADER"],name:"addExpectContinueMiddleware",override:!0},id=t=>({applyToStack:e=>{e.add(rd(t),nd)}}),Pt={WHEN_SUPPORTED:"WHEN_SUPPORTED",WHEN_REQUIRED:"WHEN_REQUIRED"},od=Pt.WHEN_SUPPORTED,cr={WHEN_SUPPORTED:"WHEN_SUPPORTED",WHEN_REQUIRED:"WHEN_REQUIRED"},ad=Pt.WHEN_SUPPORTED;var Q;(function(t){t.MD5="MD5",t.CRC32="CRC32",t.CRC32C="CRC32C",t.CRC64NVME="CRC64NVME",t.SHA1="SHA1",t.SHA256="SHA256"})(Q||(Q={}));var gi;(function(t){t.HEADER="header",t.TRAILER="trailer"})(gi||(gi={}));const Gr=Q.CRC32;function cd(t,e,s){return t.$source||(t.$source={}),t.$source[e]=s,t}function ae(t,e,s){t.__aws_sdk_context?t.__aws_sdk_context.features||(t.__aws_sdk_context.features={}):t.__aws_sdk_context={features:{}},t.__aws_sdk_context.features[e]=s}const yi=t=>{var e,s,r;return pt.isInstance(t)?(r=(e=t.headers)==null?void 0:e.date)!=null?r:(s=t.headers)==null?void 0:s.Date:void 0},bn=t=>new Date(Date.now()+t),ud=(t,e)=>Math.abs(bn(e).getTime()-t)>=3e5,Si=(t,e)=>{const s=Date.parse(t);return ud(s,e)?s-Date.now():e},rs=(t,e)=>{if(!e)throw new Error(`Property \`${t}\` is not resolved for AWS SDK SigV4Auth`);return e},ya=t=>C(null,null,function*(){var c,h,d;const e=rs("context",t.context),s=rs("config",t.config),r=(d=(h=(c=e.endpointV2)==null?void 0:c.properties)==null?void 0:h.authSchemes)==null?void 0:d[0],i=yield rs("signer",s.signer)(r),o=t==null?void 0:t.signingRegion,a=t==null?void 0:t.signingRegionSet,u=t==null?void 0:t.signingName;return{config:s,signer:i,signingRegion:o,signingRegionSet:a,signingName:u}});class Sa{sign(e,s,r){return C(this,null,function*(){var d,f,m,x;if(!le.isInstance(e))throw new Error("The request is not an instance of `HttpRequest` and cannot be signed");const n=yield ya(r),{config:i,signer:o}=n;let{signingRegion:a,signingName:u}=n;const c=r.context;if((f=(d=c==null?void 0:c.authSchemes)==null?void 0:d.length)!=null&&f){const[S,y]=c.authSchemes;(S==null?void 0:S.name)==="sigv4a"&&(y==null?void 0:y.name)==="sigv4"&&(a=(m=y==null?void 0:y.signingRegion)!=null?m:a,u=(x=y==null?void 0:y.signingName)!=null?x:u)}return yield o.sign(e,{signingDate:bn(i.systemClockOffset),signingRegion:a,signingService:u})})}errorHandler(e){return s=>{var n;const r=(n=s.ServerTime)!=null?n:yi(s.$response);if(r){const i=rs("config",e.config),o=i.systemClockOffset;i.systemClockOffset=Si(r,i.systemClockOffset),i.systemClockOffset!==o&&s.$metadata&&(s.$metadata.clockSkewCorrected=!0)}throw s}}successHandler(e,s){const r=yi(e);if(r){const n=rs("config",s.config);n.systemClockOffset=Si(r,n.systemClockOffset)}}}class dd extends Sa{sign(e,s,r){return C(this,null,function*(){var f,m;if(!le.isInstance(e))throw new Error("The request is not an instance of `HttpRequest` and cannot be signed");const{config:n,signer:i,signingRegion:o,signingRegionSet:a,signingName:u}=yield ya(r),c=yield(f=n.sigv4aSigningRegionSet)==null?void 0:f.call(n),h=((m=c!=null?c:a)!=null?m:[o]).join(",");return yield i.sign(e,{signingDate:bn(n.systemClockOffset),signingRegion:h,signingService:u})})}}const at=t=>t[Kr]||(t[Kr]={}),ze=t=>{if(typeof t=="function")return t;const e=Promise.resolve(t);return()=>e},ld=(t,e)=>{if(!e||e.length===0)return t;const s=[];for(const r of e)for(const n of t)n.schemeId.split("#")[1]===r&&s.push(n);for(const r of t)s.find(({schemeId:n})=>n===r.schemeId)||s.push(r);return s};function fd(t){const e=new Map;for(const s of t)e.set(s.schemeId,s);return e}const hd=(t,e)=>(s,r)=>n=>C(null,null,function*(){var d;const i=t.httpAuthSchemeProvider(yield e.httpAuthSchemeParametersProvider(t,r,n.input)),o=t.authSchemePreference?yield t.authSchemePreference():[],a=ld(i,o),u=fd(t.httpAuthSchemes),c=at(r),h=[];for(const f of a){const m=u.get(f.schemeId);if(!m){h.push(`HttpAuthScheme \`${f.schemeId}\` was not enabled for this service.`);continue}const x=m.identityProvider(yield e.identityProviderConfigProvider(t));if(!x){h.push(`HttpAuthScheme \`${f.schemeId}\` did not have an IdentityProvider configured.`);continue}const{identityProperties:S={},signingProperties:y={}}=((d=f.propertiesExtractor)==null?void 0:d.call(f,t,r))||{};f.identityProperties=Object.assign(f.identityProperties||{},S),f.signingProperties=Object.assign(f.signingProperties||{},y),c.selectedHttpAuthScheme={httpAuthOption:f,identity:yield x(f.identityProperties),signer:m.signer};break}if(!c.selectedHttpAuthScheme)throw new Error(h.join(`
`));return s(n)}),md={step:"serialize",tags:["HTTP_AUTH_SCHEME"],name:"httpAuthSchemeMiddleware",override:!0,relation:"before",toMiddleware:"endpointV2Middleware"},pd=(t,{httpAuthSchemeParametersProvider:e,identityProviderConfigProvider:s})=>({applyToStack:r=>{r.addRelativeTo(hd(t,{httpAuthSchemeParametersProvider:e,identityProviderConfigProvider:s}),md)}}),gd={name:"serializerMiddleware"},yd=t=>e=>{throw e},Sd=(t,e)=>{},xd=t=>(e,s)=>r=>C(null,null,function*(){if(!le.isInstance(r.request))return e(r);const i=at(s).selectedHttpAuthScheme;if(!i)throw new Error("No HttpAuthScheme was selected: unable to sign request");const{httpAuthOption:{signingProperties:o={}},identity:a,signer:u}=i,c=yield e(H(k({},r),{request:yield u.sign(r.request,a,o)})).catch((u.errorHandler||yd)(o));return(u.successHandler||Sd)(c.response,o),c}),xa={step:"finalizeRequest",tags:["HTTP_SIGNING"],name:"httpSigningMiddleware",aliases:["apiKeyMiddleware","tokenMiddleware","awsAuthMiddleware"],override:!0,relation:"after",toMiddleware:"retryMiddleware"},bd=t=>({applyToStack:e=>{e.addRelativeTo(xd(),xa)}}),It=t=>{if(typeof t=="function")return t;const e=Promise.resolve(t);return()=>e},ba="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",xi=Object.entries(ba).reduce((t,[e,s])=>(t[s]=Number(e),t),{}),wd=ba.split(""),Ot=6,ns=8,Ed=63,Mt=t=>{let e=t.length/4*3;t.slice(-2)==="=="?e-=2:t.slice(-1)==="="&&e--;const s=new ArrayBuffer(e),r=new DataView(s);for(let n=0;n<t.length;n+=4){let i=0,o=0;for(let c=n,h=n+3;c<=h;c++)if(t[c]!=="="){if(!(t[c]in xi))throw new TypeError(`Invalid character ${t[c]} in base64 string.`);i|=xi[t[c]]<<(h-c)*Ot,o+=Ot}else i>>=Ot;const a=n/4*3;i>>=o%ns;const u=Math.floor(o/ns);for(let c=0;c<u;c++){const h=(u-c-1)*ns;r.setUint8(a+c,(i&255<<h)>>h)}}return new Uint8Array(s)},nt=t=>new TextEncoder().encode(t),Nt=t=>typeof t=="string"?nt(t):ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(t),Lt=t=>{if(typeof t=="string")return t;if(typeof t!="object"||typeof t.byteOffset!="number"||typeof t.byteLength!="number")throw new Error("@smithy/util-utf8: toUtf8 encoder function only accepts string | Uint8Array.");return new TextDecoder("utf-8").decode(t)};function gt(t){let e;typeof t=="string"?e=nt(t):e=t;const s=typeof e=="object"&&typeof e.length=="number",r=typeof e=="object"&&typeof e.byteOffset=="number"&&typeof e.byteLength=="number";if(!s&&!r)throw new Error("@smithy/util-base64: toBase64 encoder function only accepts string | Uint8Array.");let n="";for(let i=0;i<e.length;i+=3){let o=0,a=0;for(let c=i,h=Math.min(i+3,e.length);c<h;c++)o|=e[c]<<(h-c-1)*ns,a+=ns;const u=Math.ceil(a/Ot);o<<=u*Ot-a;for(let c=1;c<=u;c++){const h=(u-c)*Ot;n+=wd[(o&Ed<<h)>>h]}n+="==".slice(0,4-u)}return n}class ht extends Uint8Array{static fromString(e,s="utf-8"){if(typeof e=="string")return s==="base64"?ht.mutate(Mt(e)):ht.mutate(nt(e));throw new Error(`Unsupported conversion from ${typeof e} to Uint8ArrayBlobAdapter.`)}static mutate(e){return Object.setPrototypeOf(e,ht.prototype),e}transformToString(e="utf-8"){return e==="base64"?gt(this):Lt(this)}}const Cd=typeof ReadableStream=="function"?ReadableStream:function(){};class Ad extends Cd{}const Xr=t=>{var e;return typeof ReadableStream=="function"&&(((e=t==null?void 0:t.constructor)==null?void 0:e.name)===ReadableStream.name||t instanceof ReadableStream)},Rd=({expectedChecksum:t,checksum:e,source:s,checksumSourceLocation:r,base64Encoder:n})=>{var u,c;if(!Xr(s))throw new Error(`@smithy/util-stream: unsupported source type ${(c=(u=s==null?void 0:s.constructor)==null?void 0:u.name)!=null?c:s} in ChecksumStream.`);const i=n!=null?n:gt;if(typeof TransformStream!="function")throw new Error("@smithy/util-stream: unable to instantiate ChecksumStream because API unavailable: ReadableStream/TransformStream.");const o=new TransformStream({start(){},transform(d,f){return C(this,null,function*(){e.update(d),f.enqueue(d)})},flush(d){return C(this,null,function*(){const f=yield e.digest(),m=i(f);if(t!==m){const x=new Error(`Checksum mismatch: expected "${t}" but received "${m}" in response header "${r}".`);d.error(x)}else d.terminate()})}});s.pipeThrough(o);const a=o.readable;return Object.setPrototypeOf(a,Ad.prototype),a};class vd{constructor(e){g(this,"allocByteArray");g(this,"byteLength",0);g(this,"byteArrays",[]);this.allocByteArray=e}push(e){this.byteArrays.push(e),this.byteLength+=e.byteLength}flush(){if(this.byteArrays.length===1){const r=this.byteArrays[0];return this.reset(),r}const e=this.allocByteArray(this.byteLength);let s=0;for(let r=0;r<this.byteArrays.length;++r){const n=this.byteArrays[r];e.set(n,s),s+=n.byteLength}return this.reset(),e}reset(){this.byteArrays=[],this.byteLength=0}}function Dd(t,e,s){const r=t.getReader();let n=!1,i=0;const o=["",new vd(c=>new Uint8Array(c))];let a=-1;const u=c=>C(null,null,function*(){const{value:h,done:d}=yield r.read(),f=h;if(d){if(a!==-1){const m=ur(o,a);is(m)>0&&c.enqueue(m)}c.close()}else{const m=Bd(f,!1);if(a!==m&&(a>=0&&c.enqueue(ur(o,a)),a=m),a===-1){c.enqueue(f);return}const x=is(f);i+=x;const S=is(o[a]);if(x>=e&&S===0)c.enqueue(f);else{const y=Td(o,a,f);!n&&i>e*2&&(n=!0,s==null||s.warn(`@smithy/util-stream - stream chunk size ${x} is below threshold of ${e}, automatically buffering.`)),y>=e?c.enqueue(ur(o,a)):yield u(c)}}});return new ReadableStream({pull:u})}const kd=Dd;function Td(t,e,s){switch(e){case 0:return t[0]+=s,is(t[0]);case 1:case 2:return t[e].push(s),is(t[e])}}function ur(t,e){switch(e){case 0:const s=t[0];return t[0]="",s;case 1:case 2:return t[e].flush()}throw new Error(`@smithy/util-stream - invalid index ${e} given to flush()`)}function is(t){var e,s;return(s=(e=t==null?void 0:t.byteLength)!=null?e:t==null?void 0:t.length)!=null?s:0}function Bd(t,e=!0){return e&&typeof Buffer!="undefined"&&t instanceof Buffer?2:t instanceof Uint8Array?1:typeof t=="string"?0:-1}const _d=(t,e)=>{const{base64Encoder:s,bodyLengthChecker:r,checksumAlgorithmFn:n,checksumLocationName:i,streamHasher:o}=e,a=s!==void 0&&r!==void 0&&n!==void 0&&i!==void 0&&o!==void 0,u=a?o(n,t):void 0,c=t.getReader();return new ReadableStream({pull(d){return C(this,null,function*(){const{value:f,done:m}=yield c.read();if(m){if(d.enqueue(`0\r
`),a){const x=s(yield u);d.enqueue(`${i}:${x}\r
`),d.enqueue(`\r
`)}d.close()}else d.enqueue(`${(r(f)||0).toString(16)}\r
${f}\r
`)})}})};function Id(t,e){return C(this,null,function*(){var u;let s=0;const r=[],n=t.getReader();let i=!1;for(;!i;){const{done:c,value:h}=yield n.read();if(h&&(r.push(h),s+=(u=h==null?void 0:h.byteLength)!=null?u:0),s>=e)break;i=c}n.releaseLock();const o=new Uint8Array(Math.min(e,s));let a=0;for(const c of r){if(c.byteLength>o.byteLength-a){o.set(c.subarray(0,o.byteLength-a),a);break}else o.set(c,a);a+=c.length}return o})}const mt=t=>encodeURIComponent(t).replace(/[!'()*]/g,Od),Od=t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`;function Pd(t){const e=[];for(let s of Object.keys(t).sort()){const r=t[s];if(s=mt(s),Array.isArray(r))for(let n=0,i=r.length;n<i;n++)e.push(`${s}=${mt(r[n])}`);else{let n=s;(r||typeof r=="string")&&(n+=`=${mt(r)}`),e.push(n)}}return e.join("&")}function bi(t,e){return new Request(t,e)}function Md(t=0){return new Promise((e,s)=>{t&&setTimeout(()=>{const r=new Error(`Request did not complete within ${t} ms`);r.name="TimeoutError",s(r)},t)})}const dr={supported:void 0};class wn{constructor(e){g(this,"config");g(this,"configProvider");typeof e=="function"?this.configProvider=e().then(s=>s||{}):(this.config=e!=null?e:{},this.configProvider=Promise.resolve(this.config)),dr.supported===void 0&&(dr.supported=typeof Request!="undefined"&&"keepalive"in bi("https://[::1]"))}static create(e){return typeof(e==null?void 0:e.handle)=="function"?e:new wn(e)}destroy(){}handle(n){return C(this,arguments,function*(e,{abortSignal:s,requestTimeout:r}={}){var M,U,G;this.config||(this.config=yield this.configProvider);const i=r!=null?r:this.config.requestTimeout,o=this.config.keepAlive===!0,a=this.config.credentials;if(s!=null&&s.aborted){const W=new Error("Request aborted");return W.name="AbortError",Promise.reject(W)}let u=e.path;const c=Pd(e.query||{});c&&(u+=`?${c}`),e.fragment&&(u+=`#${e.fragment}`);let h="";if(e.username!=null||e.password!=null){const W=(M=e.username)!=null?M:"",te=(U=e.password)!=null?U:"";h=`${W}:${te}@`}const{port:d,method:f}=e,m=`${e.protocol}//${h}${e.hostname}${d?`:${d}`:""}${u}`,x=f==="GET"||f==="HEAD"?void 0:e.body,S={body:x,headers:new Headers(e.headers),method:f,credentials:a};(G=this.config)!=null&&G.cache&&(S.cache=this.config.cache),x&&(S.duplex="half"),typeof AbortController!="undefined"&&(S.signal=s),dr.supported&&(S.keepalive=o),typeof this.config.requestInit=="function"&&Object.assign(S,this.config.requestInit(e));let y=()=>{};const v=bi(m,S),T=[fetch(v).then(W=>{const te=W.headers,Se={};for(const Ie of te.entries())Se[Ie[0]]=Ie[1];return W.body!=null?{response:new pt({headers:Se,reason:W.statusText,statusCode:W.status,body:W.body})}:W.blob().then(Ie=>({response:new pt({headers:Se,reason:W.statusText,statusCode:W.status,body:Ie})}))}),Md(i)];return s&&T.push(new Promise((W,te)=>{const Se=()=>{const ie=new Error("Request aborted");ie.name="AbortError",te(ie)};if(typeof s.addEventListener=="function"){const ie=s;ie.addEventListener("abort",Se,{once:!0}),y=()=>ie.removeEventListener("abort",Se)}else s.onabort=Se})),Promise.race(T).finally(y)})}updateHttpClientConfig(e,s){this.config=void 0,this.configProvider=this.configProvider.then(r=>(r[e]=s,r))}httpHandlerConfigs(){var e;return(e=this.config)!=null?e:{}}}const wa=t=>C(null,null,function*(){var e;return typeof Blob=="function"&&t instanceof Blob||((e=t.constructor)==null?void 0:e.name)==="Blob"?Blob.prototype.arrayBuffer!==void 0?new Uint8Array(yield t.arrayBuffer()):Nd(t):Ud(t)});function Nd(t){return C(this,null,function*(){const e=yield $d(t),s=Mt(e);return new Uint8Array(s)})}function Ud(t){return C(this,null,function*(){const e=[],s=t.getReader();let r=!1,n=0;for(;!r;){const{done:a,value:u}=yield s.read();u&&(e.push(u),n+=u.length),r=a}const i=new Uint8Array(n);let o=0;for(const a of e)i.set(a,o),o+=a.length;return i})}function $d(t){return new Promise((e,s)=>{const r=new FileReader;r.onloadend=()=>{var a;if(r.readyState!==2)return s(new Error("Reader aborted too early"));const n=(a=r.result)!=null?a:"",i=n.indexOf(","),o=i>-1?i+1:n.length;e(n.substring(o))},r.onabort=()=>s(new Error("Read aborted")),r.onerror=()=>s(r.error),r.readAsDataURL(t)})}const Ea={},Zr={};for(let t=0;t<256;t++){let e=t.toString(16).toLowerCase();e.length===1&&(e=`0${e}`),Ea[t]=e,Zr[e]=t}function Ca(t){if(t.length%2!==0)throw new Error("Hex encoded strings must have an even number length");const e=new Uint8Array(t.length/2);for(let s=0;s<t.length;s+=2){const r=t.slice(s,s+2).toLowerCase();if(r in Zr)e[s/2]=Zr[r];else throw new Error(`Cannot decode unrecognized sequence ${r} as hexadecimal`)}return e}function ke(t){let e="";for(let s=0;s<t.byteLength;s++)e+=Ea[t[s]];return e}const wi="The stream has already been transformed.",Aa=t=>{var n,i;if(!Ei(t)&&!Xr(t)){const o=((i=(n=t==null?void 0:t.__proto__)==null?void 0:n.constructor)==null?void 0:i.name)||t;throw new Error(`Unexpected stream implementation, expect Blob or ReadableStream, got ${o}`)}let e=!1;const s=()=>C(null,null,function*(){if(e)throw new Error(wi);return e=!0,yield wa(t)}),r=o=>{if(typeof o.stream!="function")throw new Error(`Cannot transform payload Blob to web stream. Please make sure the Blob.stream() is polyfilled.
If you are using React Native, this API is not yet supported, see: https://react-native.canny.io/feature-requests/p/fetch-streaming-body`);return o.stream()};return Object.assign(t,{transformToByteArray:s,transformToString:o=>C(null,null,function*(){const a=yield s();if(o==="base64")return gt(a);if(o==="hex")return ke(a);if(o===void 0||o==="utf8"||o==="utf-8")return Lt(a);if(typeof TextDecoder=="function")return new TextDecoder(o).decode(a);throw new Error("TextDecoder is not available, please make sure polyfill is provided.")}),transformToWebStream:()=>{if(e)throw new Error(wi);if(e=!0,Ei(t))return r(t);if(Xr(t))return t;throw new Error(`Cannot transform payload to web stream, got ${t}`)}})},Ei=t=>typeof Blob=="function"&&t instanceof Blob;function Fd(t){return C(this,null,function*(){return typeof t.stream=="function"&&(t=t.stream()),t.tee()})}const Cs=(...s)=>C(null,[...s],function*(t=new Uint8Array,e){if(t instanceof Uint8Array)return ht.mutate(t);if(!t)return ht.mutate(new Uint8Array);const r=e.streamCollector(t);return ht.mutate(yield r)});function Ci(t){return encodeURIComponent(t).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}const lr=t=>typeof t=="function"?t():t,Ra=(t,e,s,r,n)=>({name:e,namespace:t,traits:s,input:r,output:n}),Ld=t=>(e,s)=>r=>C(null,null,function*(){var d,f,m,x;const{response:n}=yield e(r),{operationSchema:i}=at(s),[,o,a,u,c,h]=i!=null?i:[];try{const S=yield t.protocol.deserializeResponse(Ra(o,a,u,c,h),k(k({},t),s),n);return{response:n,output:S}}catch(S){if(Object.defineProperty(S,"$response",{value:n,enumerable:!1,writable:!1,configurable:!1}),!("$metadata"in S)){const y="Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.";try{S.message+=`
  `+y}catch(v){!s.logger||((f=(d=s.logger)==null?void 0:d.constructor)==null?void 0:f.name)==="NoOpLogger"?console.warn(y):(x=(m=s.logger)==null?void 0:m.warn)==null||x.call(m,y)}typeof S.$responseBodyText!="undefined"&&S.$response&&(S.$response.body=S.$responseBodyText);try{if(pt.isInstance(n)){const{headers:v={}}=n,T=Object.entries(v);S.$metadata={httpStatusCode:n.statusCode,requestId:fr(/^x-[\w-]+-request-?id$/,T),extendedRequestId:fr(/^x-[\w-]+-id-2$/,T),cfId:fr(/^x-[\w-]+-cf-id$/,T)}}}catch(v){}}throw S}}),fr=(t,e)=>(e.find(([s])=>s.match(t))||[void 0,void 0])[1],Hd=t=>(e,s)=>r=>C(null,null,function*(){var f;const{operationSchema:n}=at(s),[,i,o,a,u,c]=n!=null?n:[],h=(f=s.endpointV2)!=null&&f.url&&t.urlParser?()=>C(null,null,function*(){return t.urlParser(s.endpointV2.url)}):t.endpoint,d=yield t.protocol.serializeRequest(Ra(i,o,a,u,c),r.input,H(k(k({},t),s),{endpoint:h}));return e(H(k({},r),{request:d}))}),zd={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},jd={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function qd(t){return{applyToStack:e=>{e.add(Hd(t),jd),e.add(Ld(t),zd),t.protocol.setSerdeContext(t)}}}function Bt(t){if(typeof t=="object")return t;t=t|0;const e={};let s=0;for(const r of["httpLabel","idempotent","idempotencyToken","sensitive","httpPayload","httpResponseCode","httpQueryParams"])(t>>s++&1)===1&&(e[r]=1);return e}const tt=class tt{constructor(e,s){g(this,"ref");g(this,"memberName");g(this,"symbol",tt.symbol);g(this,"name");g(this,"schema");g(this,"_isMemberSchema");g(this,"traits");g(this,"memberTraits");g(this,"normalizedTraits");var o;this.ref=e,this.memberName=s;const r=[];let n=e,i=e;for(this._isMemberSchema=!1;hr(n);)r.push(n[1]),n=n[0],i=lr(n),this._isMemberSchema=!0;if(r.length>0){this.memberTraits={};for(let a=r.length-1;a>=0;--a){const u=r[a];Object.assign(this.memberTraits,Bt(u))}}else this.memberTraits=0;if(i instanceof tt){const a=this.memberTraits;Object.assign(this,i),this.memberTraits=Object.assign({},a,i.getMemberTraits(),this.getMemberTraits()),this.normalizedTraits=void 0,this.memberName=s!=null?s:i.memberName;return}if(this.schema=lr(i),Vd(this.schema)?(this.name=`${this.schema[1]}#${this.schema[2]}`,this.traits=this.schema[3]):(this.name=(o=this.memberName)!=null?o:String(i),this.traits=0),this._isMemberSchema&&!s)throw new Error(`@smithy/core/schema - NormalizedSchema member init ${this.getName(!0)} missing member name.`)}static[Symbol.hasInstance](e){const s=this.prototype.isPrototypeOf(e);return!s&&typeof e=="object"&&e!==null?e.symbol===this.symbol:s}static of(e){const s=lr(e);if(s instanceof tt)return s;if(hr(s)){const[r,n]=s;if(r instanceof tt)return Object.assign(r.getMergedTraits(),Bt(n)),r;throw new Error(`@smithy/core/schema - may not init unwrapped member schema=${JSON.stringify(e,null,2)}.`)}return new tt(s)}getSchema(){const e=this.schema;return e[0]===0?e[4]:e}getName(e=!1){const{name:s}=this;return!e&&s&&s.includes("#")?s.split("#")[1]:s||void 0}getMemberName(){return this.memberName}isMemberSchema(){return this._isMemberSchema}isListSchema(){const e=this.getSchema();return typeof e=="number"?e>=64&&e<128:e[0]===1}isMapSchema(){const e=this.getSchema();return typeof e=="number"?e>=128&&e<=255:e[0]===2}isStructSchema(){const s=this.getSchema()[0];return s===3||s===-3||s===4}isUnionSchema(){return this.getSchema()[0]===4}isBlobSchema(){const e=this.getSchema();return e===21||e===42}isTimestampSchema(){const e=this.getSchema();return typeof e=="number"&&e>=4&&e<=7}isUnitSchema(){return this.getSchema()==="unit"}isDocumentSchema(){return this.getSchema()===15}isStringSchema(){return this.getSchema()===0}isBooleanSchema(){return this.getSchema()===2}isNumericSchema(){return this.getSchema()===1}isBigIntegerSchema(){return this.getSchema()===17}isBigDecimalSchema(){return this.getSchema()===19}isStreaming(){const{streaming:e}=this.getMergedTraits();return!!e||this.getSchema()===42}isIdempotencyToken(){const e=i=>(i&4)===4||!!(i!=null&&i.idempotencyToken),{normalizedTraits:s,traits:r,memberTraits:n}=this;return e(s)||e(r)||e(n)}getMergedTraits(){var e;return(e=this.normalizedTraits)!=null?e:this.normalizedTraits=k(k({},this.getOwnTraits()),this.getMemberTraits())}getMemberTraits(){return Bt(this.memberTraits)}getOwnTraits(){return Bt(this.traits)}getKeySchema(){var i;const[e,s]=[this.isDocumentSchema(),this.isMapSchema()];if(!e&&!s)throw new Error(`@smithy/core/schema - cannot get key for non-map: ${this.getName(!0)}`);const r=this.getSchema(),n=e?15:(i=r[4])!=null?i:0;return Yt([n,0],"key")}getValueSchema(){const e=this.getSchema(),[s,r,n]=[this.isDocumentSchema(),this.isMapSchema(),this.isListSchema()],i=typeof e=="number"?63&e:e&&typeof e=="object"&&(r||n)?e[3+e[0]]:s?15:void 0;if(i!=null)return Yt([i,0],r?"value":"member");throw new Error(`@smithy/core/schema - ${this.getName(!0)} has no value member.`)}getMemberSchema(e){const s=this.getSchema();if(this.isStructSchema()&&s[4].includes(e)){const r=s[4].indexOf(e),n=s[5][r];return Yt(hr(n)?n:[n,0],e)}if(this.isDocumentSchema())return Yt([15,0],e);throw new Error(`@smithy/core/schema - ${this.getName(!0)} has no no member=${e}.`)}getMemberSchemas(){const e={};try{for(const[s,r]of this.structIterator())e[s]=r}catch(s){}return e}getEventStreamMember(){if(this.isStructSchema()){for(const[e,s]of this.structIterator())if(s.isStreaming()&&s.isStructSchema())return e}return""}*structIterator(){if(this.isUnitSchema())return;if(!this.isStructSchema())throw new Error("@smithy/core/schema - cannot iterate non-struct schema.");const e=this.getSchema();for(let s=0;s<e[4].length;++s)yield[e[4][s],Yt([e[5][s],0],e[4][s])]}};g(tt,"symbol",Symbol.for("@smithy/nor"));let se=tt;function Yt(t,e){if(t instanceof se)return Object.assign(t,{memberName:e,_isMemberSchema:!0});const s=se;return new s(t,e)}const hr=t=>Array.isArray(t)&&t.length===2,Vd=t=>Array.isArray(t)&&t.length>=5,We=class We{constructor(e,s=new Map,r=new Map){g(this,"namespace");g(this,"schemas");g(this,"exceptions");this.namespace=e,this.schemas=s,this.exceptions=r}static for(e){return We.registries.has(e)||We.registries.set(e,new We(e)),We.registries.get(e)}register(e,s){const r=this.normalizeShapeId(e);We.for(r.split("#")[0]).schemas.set(r,s)}getSchema(e){const s=this.normalizeShapeId(e);if(!this.schemas.has(s))throw new Error(`@smithy/core/schema - schema not found for ${s}`);return this.schemas.get(s)}registerError(e,s){const r=e,n=We.for(r[1]);n.schemas.set(r[1]+"#"+r[2],r),n.exceptions.set(r,s)}getErrorCtor(e){const s=e;return We.for(s[1]).exceptions.get(s)}getBaseException(){for(const e of this.exceptions.keys())if(Array.isArray(e)){const[,s,r]=e,n=s+"#"+r;if(n.startsWith("smithy.ts.sdk.synthetic.")&&n.endsWith("ServiceException"))return e}}find(e){return[...this.schemas.values()].find(e)}clear(){this.schemas.clear(),this.exceptions.clear()}normalizeShapeId(e){return e.includes("#")?e:this.namespace+"#"+e}};g(We,"registries",new Map);let fe=We;const Wd=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Kd=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function Qr(t){const e=t.getUTCFullYear(),s=t.getUTCMonth(),r=t.getUTCDay(),n=t.getUTCDate(),i=t.getUTCHours(),o=t.getUTCMinutes(),a=t.getUTCSeconds(),u=n<10?`0${n}`:`${n}`,c=i<10?`0${i}`:`${i}`,h=o<10?`0${o}`:`${o}`,d=a<10?`0${a}`:`${a}`;return`${Wd[r]}, ${u} ${Kd[s]} ${e} ${c}:${h}:${d} GMT`}const Ai=typeof crypto!="undefined"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),we=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0")),En=()=>{if(Ai)return Ai();const t=new Uint8Array(16);return crypto.getRandomValues(t),t[6]=t[6]&15|64,t[8]=t[8]&63|128,we[t[0]]+we[t[1]]+we[t[2]]+we[t[3]]+"-"+we[t[4]]+we[t[5]]+"-"+we[t[6]]+we[t[7]]+"-"+we[t[8]]+we[t[9]]+"-"+we[t[10]]+we[t[11]]+we[t[12]]+we[t[13]]+we[t[14]]+we[t[15]]},st=function(e){return Object.assign(new String(e),{deserializeJSON(){return JSON.parse(String(e))},toString(){return String(e)},toJSON(){return String(e)}})};st.from=t=>t&&typeof t=="object"&&(t instanceof st||"deserializeJSON"in t)?t:typeof t=="string"||Object.getPrototypeOf(t)===String.prototype?st(String(t)):st(JSON.stringify(t));st.fromObject=st.from;function Gd(t){return(t.includes(",")||t.includes('"'))&&(t=`"${t.replace(/"/g,'\\"')}"`),t}const Cn="(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun)(?:[ne|u?r]?s?day)?",An="(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)",Rn="(\\d?\\d):(\\d{2}):(\\d{2})(?:\\.(\\d+))?",va="(\\d?\\d)",Da="(\\d{4})",Xd=new RegExp(/^(\d{4})-(\d\d)-(\d\d)[tT](\d\d):(\d\d):(\d\d)(\.(\d+))?(([-+]\d\d:\d\d)|[zZ])$/),Zd=new RegExp(`^${Cn}, ${va} ${An} ${Da} ${Rn} GMT$`),Qd=new RegExp(`^${Cn}, ${va}-${An}-(\\d\\d) ${Rn} GMT$`),Jd=new RegExp(`^${Cn} ${An} ( [1-9]|\\d\\d) ${Rn} ${Da}$`),Yd=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],el=t=>{if(t==null)return;let e=NaN;if(typeof t=="number")e=t;else if(typeof t=="string"){if(!/^-?\d*\.?\d+$/.test(t))throw new TypeError("parseEpochTimestamp - numeric string invalid.");e=Number.parseFloat(t)}else typeof t=="object"&&t.tag===1&&(e=t.value);if(isNaN(e)||Math.abs(e)===1/0)throw new TypeError("Epoch timestamps must be valid finite numbers.");return new Date(Math.round(e*1e3))},tl=t=>{if(t==null)return;if(typeof t!="string")throw new TypeError("RFC3339 timestamps must be strings");const e=Xd.exec(t);if(!e)throw new TypeError(`Invalid RFC3339 timestamp format ${t}`);const[,s,r,n,i,o,a,,u,c]=e;Ge(r,1,12),Ge(n,1,31),Ge(i,0,23),Ge(o,0,59),Ge(a,0,60);const h=new Date(Date.UTC(Number(s),Number(r)-1,Number(n),Number(i),Number(o),Number(a),Number(u)?Math.round(parseFloat(`0.${u}`)*1e3):0));if(h.setUTCFullYear(Number(s)),c.toUpperCase()!="Z"){const[,d,f,m]=/([+-])(\d\d):(\d\d)/.exec(c)||[void 0,"+",0,0],x=d==="-"?1:-1;h.setTime(h.getTime()+x*(Number(f)*60*60*1e3+Number(m)*60*1e3))}return h},sl=t=>{if(t==null)return;if(typeof t!="string")throw new TypeError("RFC7231 timestamps must be strings.");let e,s,r,n,i,o,a,u;if((u=Zd.exec(t))?[,e,s,r,n,i,o,a]=u:(u=Qd.exec(t))?([,e,s,r,n,i,o,a]=u,r=(Number(r)+1900).toString()):(u=Jd.exec(t))&&([,s,e,n,i,o,a,r]=u),r&&o){const c=Date.UTC(Number(r),Yd.indexOf(s),Number(e),Number(n),Number(i),Number(o),a?Math.round(parseFloat(`0.${a}`)*1e3):0);Ge(e,1,31),Ge(n,0,23),Ge(i,0,59),Ge(o,0,60);const h=new Date(c);return h.setUTCFullYear(Number(r)),h}throw new TypeError(`Invalid RFC7231 date-time value ${t}.`)};function Ge(t,e,s){const r=Number(t);if(r<e||r>s)throw new Error(`Value ${r} out of range [${e}, ${s}]`)}function rl(t,e,s){if(!Number.isInteger(s))throw new Error("Invalid number of delimiters ("+s+") for splitEvery.");const r=t.split(e),n=[];let i="";for(let o=0;o<r.length;o++)i===""?i=r[o]:i+=e+r[o],(o+1)%s===0&&(n.push(i),i="");return i!==""&&n.push(i),n}const ka=t=>{const e=t.length,s=[];let r=!1,n,i=0;for(let o=0;o<e;++o){const a=t[o];switch(a){case'"':n!=="\\"&&(r=!r);break;case",":r||(s.push(t.slice(i,o)),i=o+1);break}n=a}return s.push(t.slice(i)),s.map(o=>{o=o.trim();const a=o.length;return a<2?o:(o[0]==='"'&&o[a-1]==='"'&&(o=o.slice(1,a-1)),o.replace(/\\"/g,'"'))})},Ri=/^-?\d*(\.\d+)?$/;class Gs{constructor(e,s){g(this,"string");g(this,"type");if(this.string=e,this.type=s,!Ri.test(e))throw new Error('@smithy/core/serde - NumericValue must only contain [0-9], at most one decimal point ".", and an optional negation prefix "-".')}toString(){return this.string}static[Symbol.hasInstance](e){if(!e||typeof e!="object")return!1;const s=e;return Gs.prototype.isPrototypeOf(e)||s.type==="bigDecimal"&&Ri.test(s.string)}}const nl="modulepreload",il=function(t){return"/"+t},vi={},ol=function(e,s,r){let n=Promise.resolve();if(s&&s.length>0){let o=function(c){return Promise.all(c.map(h=>Promise.resolve(h).then(d=>({status:"fulfilled",value:d}),d=>({status:"rejected",reason:d}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),u=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));n=o(s.map(c=>{if(c=il(c),c in vi)return;vi[c]=!0;const h=c.endsWith(".css"),d=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const f=document.createElement("link");if(f.rel=h?"stylesheet":nl,h||(f.as="script"),f.crossOrigin="",f.href=c,u&&f.setAttribute("nonce",u),document.head.appendChild(f),h)return new Promise((m,x)=>{f.addEventListener("load",m),f.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return n.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})};class Xs{constructor(){g(this,"serdeContext")}setSerdeContext(e){this.serdeContext=e}}class al extends Xs{constructor(s){super();g(this,"options");this.options=s}getRequestType(){return le}getResponseType(){return pt}setSerdeContext(s){this.serdeContext=s,this.serializer.setSerdeContext(s),this.deserializer.setSerdeContext(s),this.getPayloadCodec()&&this.getPayloadCodec().setSerdeContext(s)}updateServiceEndpoint(s,r){if("url"in r){s.protocol=r.url.protocol,s.hostname=r.url.hostname,s.port=r.url.port?Number(r.url.port):void 0,s.path=r.url.pathname,s.fragment=r.url.hash||void 0,s.username=r.url.username||void 0,s.password=r.url.password||void 0,s.query||(s.query={});for(const[n,i]of r.url.searchParams.entries())s.query[n]=i;return s}else return s.protocol=r.protocol,s.hostname=r.hostname,s.port=r.port?Number(r.port):void 0,s.path=r.path,s.query=k({},r.query),s}setHostPrefix(s,r,n){var a,u;const i=se.of(r.input),o=Bt((a=r.traits)!=null?a:{});if(o.endpoint){let c=(u=o.endpoint)==null?void 0:u[0];if(typeof c=="string"){const h=[...i.structIterator()].filter(([,d])=>d.getMergedTraits().hostLabel);for(const[d]of h){const f=n[d];if(typeof f!="string")throw new Error(`@smithy/core/schema - ${d} in input must be a string as hostLabel.`);c=c.replace(`{${d}}`,f)}s.hostname=c+s.hostname}}}deserializeMetadata(s){var r,n;return{httpStatusCode:s.statusCode,requestId:(n=(r=s.headers["x-amzn-requestid"])!=null?r:s.headers["x-amzn-request-id"])!=null?n:s.headers["x-amz-request-id"],extendedRequestId:s.headers["x-amz-id-2"],cfId:s.headers["x-amz-cf-id"]}}serializeEventStream(i){return C(this,arguments,function*({eventStream:s,requestSchema:r,initialRequest:n}){return(yield this.loadEventStreamCapability()).serializeEventStream({eventStream:s,requestSchema:r,initialRequest:n})})}deserializeEventStream(i){return C(this,arguments,function*({response:s,responseSchema:r,initialResponseContainer:n}){return(yield this.loadEventStreamCapability()).deserializeEventStream({response:s,responseSchema:r,initialResponseContainer:n})})}loadEventStreamCapability(){return C(this,null,function*(){const{EventStreamSerde:s}=yield ol(()=>C(null,null,function*(){const{EventStreamSerde:r}=yield import("./index-CU8Gbuji.js");return{EventStreamSerde:r}}),[]);return new s({marshaller:this.getEventStreamMarshaller(),serializer:this.serializer,deserializer:this.deserializer,serdeContext:this.serdeContext,defaultContentType:this.getDefaultContentType()})})}getDefaultContentType(){throw new Error(`@smithy/core/protocols - ${this.constructor.name} getDefaultContentType() implementation missing.`)}deserializeHttpMessage(s,r,n,i,o){return C(this,null,function*(){return[]})}getEventStreamMarshaller(){const s=this.serdeContext;if(!s.eventStreamMarshaller)throw new Error("@smithy/core - HttpProtocol: eventStreamMarshaller missing in serdeContext.");return s.eventStreamMarshaller}}class cl extends al{serializeRequest(e,s,r){return C(this,null,function*(){var x;const n=k({},s!=null?s:{}),i=this.serializer,o={},a={},u=yield r.endpoint(),c=se.of(e==null?void 0:e.input),h=c.getSchema();let d=!1,f;const m=new le({protocol:"",hostname:"",port:void 0,path:"",fragment:void 0,query:o,headers:a,body:void 0});if(u){this.updateServiceEndpoint(m,u),this.setHostPrefix(m,e,n);const S=Bt(e.traits);if(S.http){m.method=S.http[0];const[y,v]=S.http[1].split("?");m.path=="/"?m.path=y:m.path+=y;const T=new URLSearchParams(v!=null?v:"");Object.assign(o,Object.fromEntries(T))}}for(const[S,y]of c.structIterator()){const v=(x=y.getMergedTraits())!=null?x:{},T=n[S];if(!(T==null&&!y.isIdempotencyToken()))if(v.httpPayload)y.isStreaming()?y.isStructSchema()?n[S]&&(f=yield this.serializeEventStream({eventStream:n[S],requestSchema:c})):f=T:(i.write(y,T),f=i.flush()),delete n[S];else if(v.httpLabel){i.write(y,T);const M=i.flush();m.path.includes(`{${S}+}`)?m.path=m.path.replace(`{${S}+}`,M.split("/").map(Ci).join("/")):m.path.includes(`{${S}}`)&&(m.path=m.path.replace(`{${S}}`,Ci(M))),delete n[S]}else if(v.httpHeader)i.write(y,T),a[v.httpHeader.toLowerCase()]=String(i.flush()),delete n[S];else if(typeof v.httpPrefixHeaders=="string"){for(const[M,U]of Object.entries(T)){const G=v.httpPrefixHeaders+M;i.write([y.getValueSchema(),{httpHeader:G}],U),a[G.toLowerCase()]=i.flush()}delete n[S]}else v.httpQuery||v.httpQueryParams?(this.serializeQuery(y,T,o),delete n[S]):d=!0}return d&&n&&(i.write(h,n),f=i.flush()),m.headers=a,m.query=o,m.body=f,m})}serializeQuery(e,s,r){const n=this.serializer,i=e.getMergedTraits();if(i.httpQueryParams){for(const[o,a]of Object.entries(s))if(!(o in r)){const u=e.getValueSchema();Object.assign(u.getMergedTraits(),H(k({},i),{httpQuery:o,httpQueryParams:void 0})),this.serializeQuery(u,a,r)}return}if(e.isListSchema()){const o=!!e.getMergedTraits().sparse,a=[];for(const u of s){n.write([e.getValueSchema(),i],u);const c=n.flush();(o||c!==void 0)&&a.push(c)}r[i.httpQuery]=a}else n.write([e,i],s),r[i.httpQuery]=n.flush()}deserializeResponse(e,s,r){return C(this,null,function*(){const n=this.deserializer,i=se.of(e.output),o={};if(r.statusCode>=300){const u=yield Cs(r.body,s);throw u.byteLength>0&&Object.assign(o,yield n.read(15,u)),yield this.handleError(e,s,r,o,this.deserializeMetadata(r)),new Error("@smithy/core/protocols - HTTP Protocol error handler failed to throw.")}for(const u in r.headers){const c=r.headers[u];delete r.headers[u],r.headers[u.toLowerCase()]=c}const a=yield this.deserializeHttpMessage(i,s,r,o);if(a.length){const u=yield Cs(r.body,s);if(u.byteLength>0){const c=yield n.read(i,u);for(const h of a)o[h]=c[h]}}else a.discardResponseBody&&(yield Cs(r.body,s));return o.$metadata=this.deserializeMetadata(r),o})}deserializeHttpMessage(e,s,r,n,i){return C(this,null,function*(){let o;n instanceof Set?o=i:o=n;let a=!0;const u=this.deserializer,c=se.of(e),h=[];for(const[d,f]of c.structIterator()){const m=f.getMemberTraits();if(m.httpPayload){if(a=!1,f.isStreaming())f.isStructSchema()?o[d]=yield this.deserializeEventStream({response:r,responseSchema:c}):o[d]=Aa(r.body);else if(r.body){const S=yield Cs(r.body,s);S.byteLength>0&&(o[d]=yield u.read(f,S))}}else if(m.httpHeader){const x=String(m.httpHeader).toLowerCase(),S=r.headers[x];if(S!=null)if(f.isListSchema()){const y=f.getValueSchema();y.getMergedTraits().httpHeader=x;let v;y.isTimestampSchema()&&y.getSchema()===4?v=rl(S,",",2):v=ka(S);const T=[];for(const M of v)T.push(yield u.read(y,M.trim()));o[d]=T}else o[d]=yield u.read(f,S)}else if(m.httpPrefixHeaders!==void 0){o[d]={};for(const[x,S]of Object.entries(r.headers))if(x.startsWith(m.httpPrefixHeaders)){const y=f.getValueSchema();y.getMergedTraits().httpHeader=x,o[d][x.slice(m.httpPrefixHeaders.length)]=yield u.read(y,S)}}else m.httpResponseCode?o[d]=r.statusCode:h.push(d)}return h.discardResponseBody=a,h})}}function vn(t,e){if(e.timestampFormat.useTrait&&t.isTimestampSchema()&&(t.getSchema()===5||t.getSchema()===6||t.getSchema()===7))return t.getSchema();const{httpLabel:s,httpPrefixHeaders:r,httpHeader:n,httpQuery:i}=t.getMergedTraits(),o=e.httpBindings?typeof r=="string"||n?6:i||s?5:void 0:void 0;return o!=null?o:e.timestampFormat.default}class Ta extends Xs{constructor(s){super();g(this,"settings");this.settings=s}read(s,r){var i,o;const n=se.of(s);if(n.isListSchema())return ka(r).map(a=>this.read(n.getValueSchema(),a));if(n.isBlobSchema())return((o=(i=this.serdeContext)==null?void 0:i.base64Decoder)!=null?o:Mt)(r);if(n.isTimestampSchema())switch(vn(n,this.settings)){case 5:return tl(r);case 6:return sl(r);case 7:return el(r);default:return console.warn("Missing timestamp format, parsing value with Date constructor:",r),new Date(r)}if(n.isStringSchema()){const a=n.getMergedTraits().mediaType;let u=r;if(a)return n.getMergedTraits().httpHeader&&(u=this.base64ToUtf8(u)),(a==="application/json"||a.endsWith("+json"))&&(u=st.from(u)),u}return n.isNumericSchema()?Number(r):n.isBigIntegerSchema()?BigInt(r):n.isBigDecimalSchema()?new Gs(r,"bigDecimal"):n.isBooleanSchema()?String(r).toLowerCase()==="true":r}base64ToUtf8(s){var r,n,i,o;return((n=(r=this.serdeContext)==null?void 0:r.utf8Encoder)!=null?n:Lt)(((o=(i=this.serdeContext)==null?void 0:i.base64Decoder)!=null?o:Mt)(s))}}class ul extends Xs{constructor(s,r){super();g(this,"codecDeserializer");g(this,"stringDeserializer");this.codecDeserializer=s,this.stringDeserializer=new Ta(r)}setSerdeContext(s){this.stringDeserializer.setSerdeContext(s),this.codecDeserializer.setSerdeContext(s),this.serdeContext=s}read(s,r){var a,u,c,h;const n=se.of(s),i=n.getMergedTraits(),o=(u=(a=this.serdeContext)==null?void 0:a.utf8Encoder)!=null?u:Lt;if(i.httpHeader||i.httpResponseCode)return this.stringDeserializer.read(n,o(r));if(i.httpPayload){if(n.isBlobSchema()){const d=(h=(c=this.serdeContext)==null?void 0:c.utf8Decoder)!=null?h:nt;return typeof r=="string"?d(r):r}else if(n.isStringSchema())return"byteLength"in r?o(r):r}return this.codecDeserializer.read(n,r)}}class dl extends Xs{constructor(s){super();g(this,"settings");g(this,"stringBuffer","");this.settings=s}write(s,r){var i,o,a,u;const n=se.of(s);switch(typeof r){case"object":if(r===null){this.stringBuffer="null";return}if(n.isTimestampSchema()){if(!(r instanceof Date))throw new Error(`@smithy/core/protocols - received non-Date value ${r} when schema expected Date in ${n.getName(!0)}`);switch(vn(n,this.settings)){case 5:this.stringBuffer=r.toISOString().replace(".000Z","Z");break;case 6:this.stringBuffer=Qr(r);break;case 7:this.stringBuffer=String(r.getTime()/1e3);break;default:console.warn("Missing timestamp format, using epoch seconds",r),this.stringBuffer=String(r.getTime()/1e3)}return}if(n.isBlobSchema()&&"byteLength"in r){this.stringBuffer=((o=(i=this.serdeContext)==null?void 0:i.base64Encoder)!=null?o:gt)(r);return}if(n.isListSchema()&&Array.isArray(r)){let d="";for(const f of r){this.write([n.getValueSchema(),n.getMergedTraits()],f);const m=this.flush(),x=n.getValueSchema().isTimestampSchema()?m:Gd(m);d!==""&&(d+=", "),d+=x}this.stringBuffer=d;return}this.stringBuffer=JSON.stringify(r,null,2);break;case"string":const c=n.getMergedTraits().mediaType;let h=r;if(c&&((c==="application/json"||c.endsWith("+json"))&&(h=st.from(h)),n.getMergedTraits().httpHeader)){this.stringBuffer=((u=(a=this.serdeContext)==null?void 0:a.base64Encoder)!=null?u:gt)(h.toString());return}this.stringBuffer=r;break;default:n.isIdempotencyToken()?this.stringBuffer=En():this.stringBuffer=String(r)}}flush(){const s=this.stringBuffer;return this.stringBuffer="",s}}class ll{constructor(e,s,r=new dl(s)){g(this,"codecSerializer");g(this,"stringSerializer");g(this,"buffer");this.codecSerializer=e,this.stringSerializer=r}setSerdeContext(e){this.codecSerializer.setSerdeContext(e),this.stringSerializer.setSerdeContext(e)}write(e,s){const r=se.of(e),n=r.getMergedTraits();if(n.httpHeader||n.httpLabel||n.httpQuery){this.stringSerializer.write(r,s),this.buffer=this.stringSerializer.flush();return}return this.codecSerializer.write(r,s)}flush(){if(this.buffer!==void 0){const e=this.buffer;return this.buffer=void 0,e}return this.codecSerializer.flush()}}function fl(t,e,s){t.__smithy_context?t.__smithy_context.features||(t.__smithy_context.features={}):t.__smithy_context={features:{}},t.__smithy_context.features[e]=s}class hl{constructor(e){g(this,"authSchemes",new Map);for(const[s,r]of Object.entries(e))r!==void 0&&this.authSchemes.set(s,r)}getIdentityProvider(e){return this.authSchemes.get(e)}}const ml=t=>function(s){return Ba(s)&&s.expiration.getTime()-Date.now()<t},pl=3e5,gl=ml(pl),Ba=t=>t.expiration!==void 0,yl=(t,e,s)=>{if(t===void 0)return;const r=typeof t!="function"?()=>C(null,null,function*(){return Promise.resolve(t)}):t;let n,i,o,a=!1;const u=c=>C(null,null,function*(){i||(i=r(c));try{n=yield i,o=!0,a=!1}finally{i=void 0}return n});return e===void 0?c=>C(null,null,function*(){return(!o||c!=null&&c.forceRefresh)&&(n=yield u(c)),n}):c=>C(null,null,function*(){return(!o||c!=null&&c.forceRefresh)&&(n=yield u(c)),a?n:s(n)?(e(n)&&(yield u(c)),n):(a=!0,n)})},Sl=(t,e,s)=>{let r,n,i,o=!1;const a=()=>C(null,null,function*(){n||(n=t());try{r=yield n,i=!0,o=!1}finally{n=void 0}return r});return u=>C(null,null,function*(){return(!i||u!=null&&u.forceRefresh)&&(r=yield a()),r})},xl=t=>(t.sigv4aSigningRegionSet=It(t.sigv4aSigningRegionSet),t),bl="X-Amz-Algorithm",wl="X-Amz-Credential",_a="X-Amz-Date",El="X-Amz-SignedHeaders",Cl="X-Amz-Expires",Ia="X-Amz-Signature",Oa="X-Amz-Security-Token",Pa="authorization",Ma=_a.toLowerCase(),Al="date",Rl=[Pa,Ma,Al],vl=Ia.toLowerCase(),Jr="x-amz-content-sha256",Dl=Oa.toLowerCase(),kl={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},Tl=/^proxy-/,Bl=/^sec-/,mr="AWS4-HMAC-SHA256",_l="AWS4-HMAC-SHA256-PAYLOAD",Il="UNSIGNED-PAYLOAD",Ol=50,Na="aws4_request",Pl=3600*24*7,As={},pr=[],gr=(t,e,s)=>`${t}/${e}/${s}/${Na}`,Ml=(t,e,s,r,n)=>C(null,null,function*(){const i=yield Di(t,e.secretAccessKey,e.accessKeyId),o=`${s}:${r}:${n}:${ke(i)}:${e.sessionToken}`;if(o in As)return As[o];for(pr.push(o);pr.length>Ol;)delete As[pr.shift()];let a=`AWS4${e.secretAccessKey}`;for(const u of[s,r,n,Na])a=yield Di(t,a,u);return As[o]=a}),Di=(t,e,s)=>{const r=new t(e);return r.update(Nt(s)),r.digest()},ki=({headers:t},e,s)=>{const r={};for(const n of Object.keys(t).sort()){if(t[n]==null)continue;const i=n.toLowerCase();(i in kl||e!=null&&e.has(i)||Tl.test(i)||Bl.test(i))&&(!s||s&&!s.has(i))||(r[i]=t[n].trim().replace(/\s+/g," "))}return r},Ua=t=>typeof ArrayBuffer=="function"&&t instanceof ArrayBuffer||Object.prototype.toString.call(t)==="[object ArrayBuffer]",yr=(r,n)=>C(null,[r,n],function*({headers:t,body:e},s){for(const i of Object.keys(t))if(i.toLowerCase()===Jr)return t[i];if(e==null)return"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855";if(typeof e=="string"||ArrayBuffer.isView(e)||Ua(e)){const i=new s;return i.update(Nt(e)),ke(yield i.digest())}return Il});class Nl{format(e){const s=[];for(const i of Object.keys(e)){const o=nt(i);s.push(Uint8Array.from([o.byteLength]),o,this.formatHeaderValue(e[i]))}const r=new Uint8Array(s.reduce((i,o)=>i+o.byteLength,0));let n=0;for(const i of s)r.set(i,n),n+=i.byteLength;return r}formatHeaderValue(e){switch(e.type){case"boolean":return Uint8Array.from([e.value?0:1]);case"byte":return Uint8Array.from([2,e.value]);case"short":const s=new DataView(new ArrayBuffer(3));return s.setUint8(0,3),s.setInt16(1,e.value,!1),new Uint8Array(s.buffer);case"integer":const r=new DataView(new ArrayBuffer(5));return r.setUint8(0,4),r.setInt32(1,e.value,!1),new Uint8Array(r.buffer);case"long":const n=new Uint8Array(9);return n[0]=5,n.set(e.value.bytes,1),n;case"binary":const i=new DataView(new ArrayBuffer(3+e.value.byteLength));i.setUint8(0,6),i.setUint16(1,e.value.byteLength,!1);const o=new Uint8Array(i.buffer);return o.set(e.value,3),o;case"string":const a=nt(e.value),u=new DataView(new ArrayBuffer(3+a.byteLength));u.setUint8(0,7),u.setUint16(1,a.byteLength,!1);const c=new Uint8Array(u.buffer);return c.set(a,3),c;case"timestamp":const h=new Uint8Array(9);return h[0]=8,h.set($l.fromNumber(e.value.valueOf()).bytes,1),h;case"uuid":if(!Ul.test(e.value))throw new Error(`Invalid UUID received: ${e.value}`);const d=new Uint8Array(17);return d[0]=9,d.set(Ca(e.value.replace(/\-/g,"")),1),d}}}var Ti;(function(t){t[t.boolTrue=0]="boolTrue",t[t.boolFalse=1]="boolFalse",t[t.byte=2]="byte",t[t.short=3]="short",t[t.integer=4]="integer",t[t.long=5]="long",t[t.byteArray=6]="byteArray",t[t.string=7]="string",t[t.timestamp=8]="timestamp",t[t.uuid=9]="uuid"})(Ti||(Ti={}));const Ul=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/;let $l=class $a{constructor(e){g(this,"bytes");if(this.bytes=e,e.byteLength!==8)throw new Error("Int64 buffers must be exactly 8 bytes")}static fromNumber(e){if(e>9223372036854776e3||e<-9223372036854776e3)throw new Error(`${e} is too large (or, if negative, too small) to represent as an Int64`);const s=new Uint8Array(8);for(let r=7,n=Math.abs(Math.round(e));r>-1&&n>0;r--,n/=256)s[r]=n;return e<0&&Bi(s),new $a(s)}valueOf(){const e=this.bytes.slice(0),s=e[0]&128;return s&&Bi(e),parseInt(ke(e),16)*(s?-1:1)}toString(){return String(this.valueOf())}};function Bi(t){for(let e=0;e<8;e++)t[e]^=255;for(let e=7;e>-1&&(t[e]++,t[e]===0);e--);}const Fl=(t,e)=>{t=t.toLowerCase();for(const s of Object.keys(e))if(t===s.toLowerCase())return!0;return!1},Ll=(t,e={})=>{var n,i;const{headers:s,query:r={}}=le.clone(t);for(const o of Object.keys(s)){const a=o.toLowerCase();(a.slice(0,6)==="x-amz-"&&!((n=e.unhoistableHeaders)!=null&&n.has(a))||(i=e.hoistableHeaders)!=null&&i.has(a))&&(r[o]=s[o],delete s[o])}return H(k({},t),{headers:s,query:r})},_i=t=>{t=le.clone(t);for(const e of Object.keys(t.headers))Rl.indexOf(e.toLowerCase())>-1&&delete t.headers[e];return t},Hl=({query:t={}})=>{const e=[],s={};for(const r of Object.keys(t)){if(r.toLowerCase()===vl)continue;const n=mt(r);e.push(n);const i=t[r];typeof i=="string"?s[n]=`${n}=${mt(i)}`:Array.isArray(i)&&(s[n]=i.slice(0).reduce((o,a)=>o.concat([`${n}=${mt(a)}`]),[]).sort().join("&"))}return e.sort().map(r=>s[r]).filter(r=>r).join("&")},zl=t=>jl(t).toISOString().replace(/\.\d{3}Z$/,"Z"),jl=t=>typeof t=="number"?new Date(t*1e3):typeof t=="string"?Number(t)?new Date(Number(t)*1e3):new Date(t):t;class ql{constructor({applyChecksum:e,credentials:s,region:r,service:n,sha256:i,uriEscapePath:o=!0}){g(this,"service");g(this,"regionProvider");g(this,"credentialProvider");g(this,"sha256");g(this,"uriEscapePath");g(this,"applyChecksum");this.service=n,this.sha256=i,this.uriEscapePath=o,this.applyChecksum=typeof e=="boolean"?e:!0,this.regionProvider=ze(r),this.credentialProvider=ze(s)}createCanonicalRequest(e,s,r){const n=Object.keys(s).sort();return`${e.method}
${this.getCanonicalPath(e)}
${Hl(e)}
${n.map(i=>`${i}:${s[i]}`).join(`
`)}

${n.join(";")}
${r}`}createStringToSign(e,s,r,n){return C(this,null,function*(){const i=new this.sha256;i.update(Nt(r));const o=yield i.digest();return`${n}
${e}
${s}
${ke(o)}`})}getCanonicalPath({path:e}){if(this.uriEscapePath){const s=[];for(const i of e.split("/"))(i==null?void 0:i.length)!==0&&i!=="."&&(i===".."?s.pop():s.push(i));const r=`${e!=null&&e.startsWith("/")?"/":""}${s.join("/")}${s.length>0&&(e!=null&&e.endsWith("/"))?"/":""}`;return mt(r).replace(/%2F/g,"/")}return e}validateResolvedCredentials(e){if(typeof e!="object"||typeof e.accessKeyId!="string"||typeof e.secretAccessKey!="string")throw new Error("Resolved credential object is not valid")}formatDate(e){const s=zl(e).replace(/[\-:]/g,"");return{longDate:s,shortDate:s.slice(0,8)}}getCanonicalHeaderList(e){return Object.keys(e).sort().join(";")}}class Yr extends ql{constructor({applyChecksum:s,credentials:r,region:n,service:i,sha256:o,uriEscapePath:a=!0}){super({applyChecksum:s,credentials:r,region:n,service:i,sha256:o,uriEscapePath:a});g(this,"headerFormatter",new Nl)}presign(n){return C(this,arguments,function*(s,r={}){const{signingDate:i=new Date,expiresIn:o=3600,unsignableHeaders:a,unhoistableHeaders:u,signableHeaders:c,hoistableHeaders:h,signingRegion:d,signingService:f}=r,m=yield this.credentialProvider();this.validateResolvedCredentials(m);const x=d!=null?d:yield this.regionProvider(),{longDate:S,shortDate:y}=this.formatDate(i);if(o>Pl)return Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future");const v=gr(y,x,f!=null?f:this.service),T=Ll(_i(s),{unhoistableHeaders:u,hoistableHeaders:h});m.sessionToken&&(T.query[Oa]=m.sessionToken),T.query[bl]=mr,T.query[wl]=`${m.accessKeyId}/${v}`,T.query[_a]=S,T.query[Cl]=o.toString(10);const M=ki(T,a,c);return T.query[El]=this.getCanonicalHeaderList(M),T.query[Ia]=yield this.getSignature(S,v,this.getSigningKey(m,x,y,f),this.createCanonicalRequest(T,M,yield yr(s,this.sha256))),T})}sign(s,r){return C(this,null,function*(){return typeof s=="string"?this.signString(s,r):s.headers&&s.payload?this.signEvent(s,r):s.message?this.signMessage(s,r):this.signRequest(s,r)})}signEvent(u,c){return C(this,arguments,function*({headers:s,payload:r},{signingDate:n=new Date,priorSignature:i,signingRegion:o,signingService:a}){const h=o!=null?o:yield this.regionProvider(),{shortDate:d,longDate:f}=this.formatDate(n),m=gr(d,h,a!=null?a:this.service),x=yield yr({headers:{},body:r},this.sha256),S=new this.sha256;S.update(s);const y=ke(yield S.digest()),v=[_l,f,m,i,y,x].join(`
`);return this.signString(v,{signingDate:n,signingRegion:h,signingService:a})})}signMessage(o,a){return C(this,arguments,function*(s,{signingDate:r=new Date,signingRegion:n,signingService:i}){return this.signEvent({headers:this.headerFormatter.format(s.message.headers),payload:s.message.body},{signingDate:r,signingRegion:n,signingService:i,priorSignature:s.priorSignature}).then(c=>({message:s.message,signature:c}))})}signString(o){return C(this,arguments,function*(s,{signingDate:r=new Date,signingRegion:n,signingService:i}={}){const a=yield this.credentialProvider();this.validateResolvedCredentials(a);const u=n!=null?n:yield this.regionProvider(),{shortDate:c}=this.formatDate(r),h=new this.sha256(yield this.getSigningKey(a,u,c,i));return h.update(Nt(s)),ke(yield h.digest())})}signRequest(u){return C(this,arguments,function*(s,{signingDate:r=new Date,signableHeaders:n,unsignableHeaders:i,signingRegion:o,signingService:a}={}){const c=yield this.credentialProvider();this.validateResolvedCredentials(c);const h=o!=null?o:yield this.regionProvider(),d=_i(s),{longDate:f,shortDate:m}=this.formatDate(r),x=gr(m,h,a!=null?a:this.service);d.headers[Ma]=f,c.sessionToken&&(d.headers[Dl]=c.sessionToken);const S=yield yr(d,this.sha256);!Fl(Jr,d.headers)&&this.applyChecksum&&(d.headers[Jr]=S);const y=ki(d,i,n),v=yield this.getSignature(f,x,this.getSigningKey(c,h,m,a),this.createCanonicalRequest(d,y,S));return d.headers[Pa]=`${mr} Credential=${c.accessKeyId}/${x}, SignedHeaders=${this.getCanonicalHeaderList(y)}, Signature=${v}`,d})}getSignature(s,r,n,i){return C(this,null,function*(){const o=yield this.createStringToSign(s,r,i,mr),a=new this.sha256(yield n);return a.update(Nt(o)),ke(yield a.digest())})}getSigningKey(s,r,n,i){return Ml(this.sha256,s,n,r,i||this.service)}}const Vl=t=>{let e=t.credentials,s=!!t.credentials,r;Object.defineProperty(t,"credentials",{set(c){c&&c!==e&&c!==r&&(s=!0),e=c;const h=Wl(t,{credentials:e,credentialDefaultProvider:t.credentialDefaultProvider}),d=Kl(t,h);s&&!d.attributed?(r=f=>C(null,null,function*(){return d(f).then(m=>cd(m,"CREDENTIALS_CODE","e"))}),r.memoized=d.memoized,r.configBound=d.configBound,r.attributed=!0):r=d},get(){return r},enumerable:!0,configurable:!0}),t.credentials=e;const{signingEscapePath:n=!0,systemClockOffset:i=t.systemClockOffset||0,sha256:o}=t;let a;return t.signer?a=It(t.signer):t.regionInfoProvider?a=()=>It(t.region)().then(c=>C(null,null,function*(){return[(yield t.regionInfoProvider(c,{useFipsEndpoint:yield t.useFipsEndpoint(),useDualstackEndpoint:yield t.useDualstackEndpoint()}))||{},c]})).then(([c,h])=>{const{signingRegion:d,signingService:f}=c;t.signingRegion=t.signingRegion||d||h,t.signingName=t.signingName||f||t.serviceId;const m=H(k({},t),{credentials:t.credentials,region:t.signingRegion,service:t.signingName,sha256:o,uriEscapePath:n}),x=t.signerConstructor||Yr;return new x(m)}):a=c=>C(null,null,function*(){c=Object.assign({},{name:"sigv4",signingName:t.signingName||t.defaultSigningName,signingRegion:yield It(t.region)(),properties:{}},c);const h=c.signingRegion,d=c.signingName;t.signingRegion=t.signingRegion||h,t.signingName=t.signingName||d||t.serviceId;const f=H(k({},t),{credentials:t.credentials,region:t.signingRegion,service:t.signingName,sha256:o,uriEscapePath:n}),m=t.signerConstructor||Yr;return new m(f)}),Object.assign(t,{systemClockOffset:i,signingEscapePath:n,signer:a})};function Wl(t,{credentials:e,credentialDefaultProvider:s}){let r;return e?e!=null&&e.memoized?r=e:r=yl(e,gl,Ba):s?r=It(s(Object.assign({},t,{parentClientConfig:t}))):r=()=>C(null,null,function*(){throw new Error("@aws-sdk/core::resolveAwsSdkSigV4Config - `credentials` not provided and no credentialDefaultProvider was configured.")}),r.memoized=!0,r}function Kl(t,e){if(e.configBound)return e;const s=r=>C(null,null,function*(){return e(H(k({},r),{callerClientConfig:t}))});return s.memoized=e.memoized,s.configBound=!0,s}const Ii=typeof TextEncoder=="function"?new TextEncoder:null,Gl=t=>{if(typeof t=="string"){if(Ii)return Ii.encode(t).byteLength;let e=t.length;for(let s=e-1;s>=0;s--){const r=t.charCodeAt(s);r>127&&r<=2047?e++:r>2047&&r<=65535&&(e+=2),r>=56320&&r<=57343&&s--}return e}else{if(typeof t.byteLength=="number")return t.byteLength;if(typeof t.size=="number")return t.size}throw new Error(`Body Length computation failed for ${t}`)},lt=(t,e)=>{const s=[];if(t&&s.push(t),e)for(const r of e)s.push(r);return s},Ze=(t,e)=>`${t||"anonymous"}${e&&e.length>0?` (a.k.a. ${e.join(",")})`:""}`,Os=()=>{let t=[],e=[],s=!1;const r=new Set,n=d=>d.sort((f,m)=>Oi[m.step]-Oi[f.step]||Pi[m.priority||"normal"]-Pi[f.priority||"normal"]),i=d=>{let f=!1;const m=x=>{const S=lt(x.name,x.aliases);if(S.includes(d)){f=!0;for(const y of S)r.delete(y);return!1}return!0};return t=t.filter(m),e=e.filter(m),f},o=d=>{let f=!1;const m=x=>{if(x.middleware===d){f=!0;for(const S of lt(x.name,x.aliases))r.delete(S);return!1}return!0};return t=t.filter(m),e=e.filter(m),f},a=d=>{var f;return t.forEach(m=>{d.add(m.middleware,k({},m))}),e.forEach(m=>{d.addRelativeTo(m.middleware,k({},m))}),(f=d.identifyOnResolve)==null||f.call(d,h.identifyOnResolve()),d},u=d=>{const f=[];return d.before.forEach(m=>{m.before.length===0&&m.after.length===0?f.push(m):f.push(...u(m))}),f.push(d),d.after.reverse().forEach(m=>{m.before.length===0&&m.after.length===0?f.push(m):f.push(...u(m))}),f},c=(d=!1)=>{const f=[],m=[],x={};return t.forEach(y=>{const v=H(k({},y),{before:[],after:[]});for(const T of lt(v.name,v.aliases))x[T]=v;f.push(v)}),e.forEach(y=>{const v=H(k({},y),{before:[],after:[]});for(const T of lt(v.name,v.aliases))x[T]=v;m.push(v)}),m.forEach(y=>{if(y.toMiddleware){const v=x[y.toMiddleware];if(v===void 0){if(d)return;throw new Error(`${y.toMiddleware} is not found when adding ${Ze(y.name,y.aliases)} middleware ${y.relation} ${y.toMiddleware}`)}y.relation==="after"&&v.after.push(y),y.relation==="before"&&v.before.push(y)}}),n(f).map(u).reduce((y,v)=>(y.push(...v),y),[])},h={add:(d,f={})=>{const{name:m,override:x,aliases:S}=f,y=k({step:"initialize",priority:"normal",middleware:d},f),v=lt(m,S);if(v.length>0){if(v.some(T=>r.has(T))){if(!x)throw new Error(`Duplicate middleware name '${Ze(m,S)}'`);for(const T of v){const M=t.findIndex(G=>{var W;return G.name===T||((W=G.aliases)==null?void 0:W.some(te=>te===T))});if(M===-1)continue;const U=t[M];if(U.step!==y.step||y.priority!==U.priority)throw new Error(`"${Ze(U.name,U.aliases)}" middleware with ${U.priority} priority in ${U.step} step cannot be overridden by "${Ze(m,S)}" middleware with ${y.priority} priority in ${y.step} step.`);t.splice(M,1)}}for(const T of v)r.add(T)}t.push(y)},addRelativeTo:(d,f)=>{const{name:m,override:x,aliases:S}=f,y=k({middleware:d},f),v=lt(m,S);if(v.length>0){if(v.some(T=>r.has(T))){if(!x)throw new Error(`Duplicate middleware name '${Ze(m,S)}'`);for(const T of v){const M=e.findIndex(G=>{var W;return G.name===T||((W=G.aliases)==null?void 0:W.some(te=>te===T))});if(M===-1)continue;const U=e[M];if(U.toMiddleware!==y.toMiddleware||U.relation!==y.relation)throw new Error(`"${Ze(U.name,U.aliases)}" middleware ${U.relation} "${U.toMiddleware}" middleware cannot be overridden by "${Ze(m,S)}" middleware ${y.relation} "${y.toMiddleware}" middleware.`);e.splice(M,1)}}for(const T of v)r.add(T)}e.push(y)},clone:()=>a(Os()),use:d=>{d.applyToStack(h)},remove:d=>typeof d=="string"?i(d):o(d),removeByTag:d=>{let f=!1;const m=x=>{const{tags:S,name:y,aliases:v}=x;if(S&&S.includes(d)){const T=lt(y,v);for(const M of T)r.delete(M);return f=!0,!1}return!0};return t=t.filter(m),e=e.filter(m),f},concat:d=>{var m,x;const f=a(Os());return f.use(d),f.identifyOnResolve(s||f.identifyOnResolve()||((x=(m=d.identifyOnResolve)==null?void 0:m.call(d))!=null?x:!1)),f},applyToStack:a,identify:()=>c(!0).map(d=>{var m;const f=(m=d.step)!=null?m:d.relation+" "+d.toMiddleware;return Ze(d.name,d.aliases)+" - "+f}),identifyOnResolve(d){return typeof d=="boolean"&&(s=d),s},resolve:(d,f)=>{for(const m of c().map(x=>x.middleware).reverse())d=m(d,f);return s&&console.log(h.identify()),d}};return h},Oi={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},Pi={high:3,normal:2,low:1};class Xl{constructor(e){g(this,"config");g(this,"middlewareStack",Os());g(this,"initConfig");g(this,"handlers");this.config=e;const{protocol:s,protocolSettings:r}=e;r&&typeof s=="function"&&(e.protocol=new s(r))}send(e,s,r){const n=typeof s!="function"?s:void 0,i=typeof s=="function"?s:r,o=n===void 0&&this.config.cacheMiddleware===!0;let a;if(o){this.handlers||(this.handlers=new WeakMap);const u=this.handlers;u.has(e.constructor)?a=u.get(e.constructor):(a=e.resolveMiddleware(this.middlewareStack,this.config,n),u.set(e.constructor,a))}else delete this.handlers,a=e.resolveMiddleware(this.middlewareStack,this.config,n);if(i)a(e).then(u=>i(null,u.output),u=>i(u)).catch(()=>{});else return a(e).then(u=>u.output)}destroy(){var e,s,r;(r=(s=(e=this.config)==null?void 0:e.requestHandler)==null?void 0:s.destroy)==null||r.call(s),delete this.handlers}}const Sr="***SensitiveInformation***";function en(t,e){if(e==null)return e;const s=se.of(t);if(s.getMergedTraits().sensitive)return Sr;if(s.isListSchema()){if(!!s.getValueSchema().getMergedTraits().sensitive)return Sr}else if(s.isMapSchema()){if(!!s.getKeySchema().getMergedTraits().sensitive||!!s.getValueSchema().getMergedTraits().sensitive)return Sr}else if(s.isStructSchema()&&typeof e=="object"){const r=e,n={};for(const[i,o]of s.structIterator())r[i]!=null&&(n[i]=en(o,r[i]));return n}return e}class ct{constructor(){g(this,"middlewareStack",Os());g(this,"schema")}static classBuilder(){return new Zl}resolveMiddlewareWithContext(e,s,r,{middlewareFn:n,clientName:i,commandName:o,inputFilterSensitiveLog:a,outputFilterSensitiveLog:u,smithyContext:c,additionalContext:h,CommandCtor:d}){for(const y of n.bind(this)(d,e,s,r))this.middlewareStack.use(y);const f=e.concat(this.middlewareStack),{logger:m}=s,x=k({logger:m,clientName:i,commandName:o,inputFilterSensitiveLog:a,outputFilterSensitiveLog:u,[Kr]:k({commandInstance:this},c)},h),{requestHandler:S}=s;return f.resolve(y=>S.handle(y.request,r||{}),x)}}class Zl{constructor(){g(this,"_init",()=>{});g(this,"_ep",{});g(this,"_middlewareFn",()=>[]);g(this,"_commandName","");g(this,"_clientName","");g(this,"_additionalContext",{});g(this,"_smithyContext",{});g(this,"_inputFilterSensitiveLog");g(this,"_outputFilterSensitiveLog");g(this,"_serializer",null);g(this,"_deserializer",null);g(this,"_operationSchema")}init(e){this._init=e}ep(e){return this._ep=e,this}m(e){return this._middlewareFn=e,this}s(e,s,r={}){return this._smithyContext=k({service:e,operation:s},r),this}c(e={}){return this._additionalContext=e,this}n(e,s){return this._clientName=e,this._commandName=s,this}f(e=r=>r,s=r=>r){return this._inputFilterSensitiveLog=e,this._outputFilterSensitiveLog=s,this}ser(e){return this._serializer=e,this}de(e){return this._deserializer=e,this}sc(e){return this._operationSchema=e,this._smithyContext.operationSchema=e,this}build(){const e=this;let s;return s=class extends ct{constructor(...[n]){super();g(this,"input");g(this,"serialize",e._serializer);g(this,"deserialize",e._deserializer);this.input=n!=null?n:{},e._init(this),this.schema=e._operationSchema}static getEndpointParameterInstructions(){return e._ep}resolveMiddleware(n,i,o){var h,d,f,m;const a=e._operationSchema,u=(h=a==null?void 0:a[4])!=null?h:a==null?void 0:a.input,c=(d=a==null?void 0:a[5])!=null?d:a==null?void 0:a.output;return this.resolveMiddlewareWithContext(n,i,o,{CommandCtor:s,middlewareFn:e._middlewareFn,clientName:e._clientName,commandName:e._commandName,inputFilterSensitiveLog:(f=e._inputFilterSensitiveLog)!=null?f:a?en.bind(null,u):x=>x,outputFilterSensitiveLog:(m=e._outputFilterSensitiveLog)!=null?m:a?en.bind(null,c):x=>x,smithyContext:e._smithyContext,additionalContext:e._additionalContext})}}}}class _t extends Error{constructor(s){super(s.message);g(this,"$fault");g(this,"$response");g(this,"$retryable");g(this,"$metadata");Object.setPrototypeOf(this,Object.getPrototypeOf(this).constructor.prototype),this.name=s.name,this.$fault=s.$fault,this.$metadata=s.$metadata}static isInstance(s){if(!s)return!1;const r=s;return _t.prototype.isPrototypeOf(r)||!!r.$fault&&!!r.$metadata&&(r.$fault==="client"||r.$fault==="server")}static[Symbol.hasInstance](s){if(!s)return!1;const r=s;return this===_t?_t.isInstance(s):_t.isInstance(s)?r.name&&this.name?this.prototype.isPrototypeOf(s)||r.name===this.name:this.prototype.isPrototypeOf(s):!1}}const Mi=(t,e={})=>{Object.entries(e).filter(([,r])=>r!==void 0).forEach(([r,n])=>{(t[r]==null||t[r]==="")&&(t[r]=n)});const s=t.message||t.Message||"UnknownError";return t.message=s,delete t.Message,t},Ql=t=>{switch(t){case"standard":return{retryMode:"standard",connectionTimeout:3100};case"in-region":return{retryMode:"standard",connectionTimeout:1100};case"cross-region":return{retryMode:"standard",connectionTimeout:3100};case"mobile":return{retryMode:"standard",connectionTimeout:3e4};default:return{}}},Jl=t=>{const e=[];for(const s in Is){const r=Is[s];t[r]!==void 0&&e.push({algorithmId:()=>r,checksumConstructor:()=>t[r]})}return{addChecksumAlgorithm(s){e.push(s)},checksumAlgorithms(){return e}}},Yl=t=>{const e={};return t.checksumAlgorithms().forEach(s=>{e[s.algorithmId()]=s.checksumConstructor()}),e},ef=t=>({setRetryStrategy(e){t.retryStrategy=e},retryStrategy(){return t.retryStrategy}}),tf=t=>{const e={};return e.retryStrategy=t.retryStrategy(),e},sf=t=>Object.assign(Jl(t),ef(t)),rf=t=>Object.assign(Yl(t),tf(t)),Fa=t=>{const e="#text";for(const s in t)t.hasOwnProperty(s)&&t[s][e]!==void 0?t[s]=t[s][e]:typeof t[s]=="object"&&t[s]!==null&&(t[s]=Fa(t[s]));return t};class Dn{trace(){}debug(){}info(){}warn(){}error(){}}class nf{constructor(e=!1){g(this,"queryCompat");this.queryCompat=e}resolveRestContentType(e,s){const r=s.getMemberSchemas(),n=Object.values(r).find(i=>!!i.getMergedTraits().httpPayload);if(n){const i=n.getMergedTraits().mediaType;return i||(n.isStringSchema()?"text/plain":n.isBlobSchema()?"application/octet-stream":e)}else if(!s.isUnitSchema()&&Object.values(r).find(o=>{const{httpQuery:a,httpQueryParams:u,httpHeader:c,httpLabel:h,httpPrefixHeaders:d}=o.getMergedTraits();return!a&&!u&&!c&&!h&&d===void 0}))return e}getErrorSchemaOrThrowBaseException(e,s,r,n,i,o){return C(this,null,function*(){var d,f,m,x;let a=s,u=e;e.includes("#")&&([a,u]=e.split("#"));const c={$metadata:i,$fault:r.statusCode<500?"client":"server"},h=fe.for(a);try{return{errorSchema:(d=o==null?void 0:o(h,u))!=null?d:h.getSchema(e),errorMetadata:c}}catch(S){n.message=(m=(f=n.message)!=null?f:n.Message)!=null?m:"UnknownError";const y=fe.for("smithy.ts.sdk.synthetic."+a),v=y.getBaseException();if(v){const T=(x=y.getErrorCtor(v))!=null?x:Error;throw this.decorateServiceException(Object.assign(new T({name:u}),c),n)}throw this.decorateServiceException(Object.assign(new Error(u),c),n)}})}decorateServiceException(e,s={}){var r,n,i;if(this.queryCompat){const o=(r=e.Message)!=null?r:s.Message,a=Mi(e,s);o&&(a.message=o),a.Error=H(k({},a.Error),{Type:a.Error.Type,Code:a.Error.Code,Message:(i=(n=a.Error.message)!=null?n:a.Error.Message)!=null?i:o});const u=a.$metadata.requestId;return u&&(a.RequestId=u),a}return Mi(e,s)}setQueryCompatError(e,s){var n;const r=(n=s.headers)==null?void 0:n["x-amzn-query-error"];if(e!==void 0&&r!=null){const[i,o]=r.split(";"),a=Object.entries(e),u={Code:i,Type:o};Object.assign(e,u);for(const[c,h]of a)u[c==="message"?"Message":c]=h;delete u.__type,e.Error=u}}queryCompatOutput(e,s){e.Error&&(s.Error=e.Error),e.Type&&(s.Type=e.Type),e.Code&&(s.Code=e.Code)}findQueryCompatibleError(e,s){try{return e.getSchema(s)}catch(r){return e.find(n=>{var i;return((i=se.of(n).getMergedTraits().awsQueryError)==null?void 0:i[0])===s})}}}class kn{constructor(){g(this,"serdeContext")}setSerdeContext(e){this.serdeContext=e}}function*of(t,e){if(t.isUnitSchema())return;const s=t.getSchema();for(let r=0;r<s[4].length;++r){const n=s[4][r],i=s[5][r],o=new se([i,0],n);!(n in e)&&!o.isIdempotencyToken()||(yield[n,o])}}class af{constructor(e,s){g(this,"from");g(this,"to");g(this,"keys");this.from=e,this.to=s,this.keys=new Set(Object.keys(this.from).filter(r=>r!=="__type"))}mark(e){this.keys.delete(e)}hasUnknown(){return this.keys.size===1&&Object.keys(this.to).length===0}writeUnknown(){if(this.hasUnknown()){const e=this.keys.values().next().value,s=this.from[e];this.to.$unknown=[e,s]}}}function cf(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}function uf(t){return t.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r/g,"&#x0D;").replace(/\n/g,"&#x0A;").replace(/\u0085/g,"&#x85;").replace(/\u2028/,"&#x2028;")}class tn{constructor(e){g(this,"value");this.value=e}toString(){return uf(""+this.value)}}class De{constructor(e,s=[]){g(this,"name");g(this,"children");g(this,"attributes",{});this.name=e,this.children=s}static of(e,s,r){const n=new De(e);return s!==void 0&&n.addChildNode(new tn(s)),r!==void 0&&n.withName(r),n}withName(e){return this.name=e,this}addAttribute(e,s){return this.attributes[e]=s,this}addChildNode(e){return this.children.push(e),this}removeAttribute(e){return delete this.attributes[e],this}n(e){return this.name=e,this}c(e){return this.children.push(e),this}a(e,s){return s!=null&&(this.attributes[e]=s),this}cc(e,s,r=s){if(e[s]!=null){const n=De.of(s,e[s]).withName(r);this.c(n)}}l(e,s,r,n){e[s]!=null&&n().map(o=>{o.withName(r),this.c(o)})}lc(e,s,r,n){if(e[s]!=null){const i=n(),o=new De(r);i.map(a=>{o.c(a)}),this.c(o)}}toString(){const e=!!this.children.length;let s=`<${this.name}`;const r=this.attributes;for(const n of Object.keys(r)){const i=r[n];i!=null&&(s+=` ${n}="${cf(""+i)}"`)}return s+=e?`>${this.children.map(n=>n.toString()).join("")}</${this.name}>`:"/>"}}let xr;function df(t){xr||(xr=new DOMParser);const e=xr.parseFromString(t,"application/xml");if(e.getElementsByTagName("parsererror").length>0)throw new Error("DOMParser XML parsing error.");const s=r=>{var n;if(r.nodeType===Node.TEXT_NODE&&(n=r.textContent)!=null&&n.trim())return r.textContent;if(r.nodeType===Node.ELEMENT_NODE){const i=r;if(i.attributes.length===0&&i.childNodes.length===0)return"";const o={},a=Array.from(i.attributes);for(const c of a)o[`${c.name}`]=c.value;const u=Array.from(i.childNodes);for(const c of u){const h=s(c);if(h!=null){const d=c.nodeName;if(u.length===1&&a.length===0&&d==="#text")return h;o[d]?Array.isArray(o[d])?o[d].push(h):o[d]=[o[d],h]:o[d]=h}else if(u.length===1&&a.length===0)return i.textContent}return o}return null};return{[e.documentElement.nodeName]:s(e.documentElement)}}class lf extends kn{constructor(s){super();g(this,"settings");g(this,"stringDeserializer");this.settings=s,this.stringDeserializer=new Ta(s)}setSerdeContext(s){this.serdeContext=s,this.stringDeserializer.setSerdeContext(s)}read(s,r,n){var h,d;const i=se.of(s),o=i.getMemberSchemas();if(i.isStructSchema()&&i.isMemberSchema()&&!!Object.values(o).find(f=>!!f.getMemberTraits().eventPayload)){const f={},m=Object.keys(o)[0];return o[m].isBlobSchema()?f[m]=r:f[m]=this.read(o[m],r),f}const u=((d=(h=this.serdeContext)==null?void 0:h.utf8Encoder)!=null?d:Lt)(r),c=this.parseXml(u);return this.readSchema(s,n?c[n]:c)}readSchema(s,r){var o,a,u,c,h,d;const n=se.of(s);if(n.isUnitSchema())return;const i=n.getMergedTraits();if(n.isListSchema()&&!Array.isArray(r))return this.readSchema(n,[r]);if(r==null)return r;if(typeof r=="object"){const f=!!i.sparse,m=!!i.xmlFlattened;if(n.isListSchema()){const S=n.getValueSchema(),y=[],v=(o=S.getMergedTraits().xmlName)!=null?o:"member",T=m?r:((a=r[0])!=null?a:r)[v],M=Array.isArray(T)?T:[T];for(const U of M)(U!=null||f)&&y.push(this.readSchema(S,U));return y}const x={};if(n.isMapSchema()){const S=n.getKeySchema(),y=n.getValueSchema();let v;m?v=Array.isArray(r)?r:[r]:v=Array.isArray(r.entry)?r.entry:[r.entry];const T=(u=S.getMergedTraits().xmlName)!=null?u:"key",M=(c=y.getMergedTraits().xmlName)!=null?c:"value";for(const U of v){const G=U[T],W=U[M];(W!=null||f)&&(x[G]=this.readSchema(y,W))}return x}if(n.isStructSchema()){const S=n.isUnionSchema();let y;S&&(y=new af(r,x));for(const[v,T]of n.structIterator()){const M=T.getMergedTraits(),U=M.httpPayload?(d=M.xmlName)!=null?d:T.getName():(h=T.getMemberTraits().xmlName)!=null?h:v;S&&y.mark(U),r[U]!=null&&(x[v]=this.readSchema(T,r[U]))}return S&&y.writeUnknown(),x}if(n.isDocumentSchema())return r;throw new Error(`@aws-sdk/core/protocols - xml deserializer unhandled schema type for ${n.getName(!0)}`)}return n.isListSchema()?[]:n.isMapSchema()||n.isStructSchema()?{}:this.stringDeserializer.read(n,r)}parseXml(s){if(s.length){let r;try{r=df(s)}catch(a){throw a&&typeof a=="object"&&Object.defineProperty(a,"$responseBodyText",{value:s}),a}const n="#text",i=Object.keys(r)[0],o=r[i];return o[n]&&(o[i]=o[n],delete o[n]),Fa(o)}return{}}}const ff=(t,e)=>{var s;if(((s=e==null?void 0:e.Error)==null?void 0:s.Code)!==void 0)return e.Error.Code;if((e==null?void 0:e.Code)!==void 0)return e.Code;if(t.statusCode==404)return"NotFound"};class hf extends kn{constructor(s){super();g(this,"settings");g(this,"stringBuffer");g(this,"byteBuffer");g(this,"buffer");this.settings=s}write(s,r){var i,o;const n=se.of(s);if(n.isStringSchema()&&typeof r=="string")this.stringBuffer=r;else if(n.isBlobSchema())this.byteBuffer="byteLength"in r?r:((o=(i=this.serdeContext)==null?void 0:i.base64Decoder)!=null?o:Mt)(r);else{this.buffer=this.writeStruct(n,r,void 0);const a=n.getMergedTraits();a.httpPayload&&!a.xmlName&&this.buffer.withName(n.getName())}}flush(){var r;if(this.byteBuffer!==void 0){const n=this.byteBuffer;return delete this.byteBuffer,n}if(this.stringBuffer!==void 0){const n=this.stringBuffer;return delete this.stringBuffer,n}const s=this.buffer;return this.settings.xmlNamespace&&((r=s==null?void 0:s.attributes)!=null&&r.xmlns||s.addAttribute("xmlns",this.settings.xmlNamespace)),delete this.buffer,s.toString()}writeStruct(s,r,n){var d,f,m,x;const i=s.getMergedTraits(),o=s.isMemberSchema()&&!i.httpPayload?(d=s.getMemberTraits().xmlName)!=null?d:s.getMemberName():(f=i.xmlName)!=null?f:s.getName();if(!o||!s.isStructSchema())throw new Error(`@aws-sdk/core/protocols - xml serializer, cannot write struct with empty name or non-struct, schema=${s.getName(!0)}.`);const a=De.of(o),[u,c]=this.getXmlnsAttribute(s,n);for(const[S,y]of of(s,r)){const v=r[S];if(v!=null||y.isIdempotencyToken()){if(y.getMergedTraits().xmlAttribute){a.addAttribute((m=y.getMergedTraits().xmlName)!=null?m:S,this.writeSimple(y,v));continue}if(y.isListSchema())this.writeList(y,v,a,c);else if(y.isMapSchema())this.writeMap(y,v,a,c);else if(y.isStructSchema())a.addChildNode(this.writeStruct(y,v,c));else{const T=De.of((x=y.getMergedTraits().xmlName)!=null?x:y.getMemberName());this.writeSimpleInto(y,v,T,c),a.addChildNode(T)}}}const{$unknown:h}=r;if(h&&s.isUnionSchema()&&Array.isArray(h)&&Object.keys(r).length===1){const[S,y]=h,v=De.of(S);if(typeof y!="string")if(r instanceof De||r instanceof tn)a.addChildNode(r);else throw new Error("@aws-sdk - $unknown union member in XML requires value of type string, @aws-sdk/xml-builder::XmlNode or XmlText.");this.writeSimpleInto(0,y,v,c),a.addChildNode(v)}return c&&a.addAttribute(u,c),a}writeList(s,r,n,i){var x;if(!s.isMemberSchema())throw new Error(`@aws-sdk/core/protocols - xml serializer, cannot write non-member list: ${s.getName(!0)}`);const o=s.getMergedTraits(),a=s.getValueSchema(),u=a.getMergedTraits(),c=!!u.sparse,h=!!o.xmlFlattened,[d,f]=this.getXmlnsAttribute(s,i),m=(S,y)=>{var v,T,M,U;if(a.isListSchema())this.writeList(a,Array.isArray(y)?y:[y],S,f);else if(a.isMapSchema())this.writeMap(a,y,S,f);else if(a.isStructSchema()){const G=this.writeStruct(a,y,f);S.addChildNode(G.withName(h?(v=o.xmlName)!=null?v:s.getMemberName():(T=u.xmlName)!=null?T:"member"))}else{const G=De.of(h?(M=o.xmlName)!=null?M:s.getMemberName():(U=u.xmlName)!=null?U:"member");this.writeSimpleInto(a,y,G,f),S.addChildNode(G)}};if(h)for(const S of r)(c||S!=null)&&m(n,S);else{const S=De.of((x=o.xmlName)!=null?x:s.getMemberName());f&&S.addAttribute(d,f);for(const y of r)(c||y!=null)&&m(S,y);n.addChildNode(S)}}writeMap(s,r,n,i,o=!1){var M,U,G,W;if(!s.isMemberSchema())throw new Error(`@aws-sdk/core/protocols - xml serializer, cannot write non-member map: ${s.getName(!0)}`);const a=s.getMergedTraits(),u=s.getKeySchema(),h=(M=u.getMergedTraits().xmlName)!=null?M:"key",d=s.getValueSchema(),f=d.getMergedTraits(),m=(U=f.xmlName)!=null?U:"value",x=!!f.sparse,S=!!a.xmlFlattened,[y,v]=this.getXmlnsAttribute(s,i),T=(te,Se,ie)=>{const Ie=De.of(h,Se),[bs,Qt]=this.getXmlnsAttribute(u,v);Qt&&Ie.addAttribute(bs,Qt),te.addChildNode(Ie);let ut=De.of(m);d.isListSchema()?this.writeList(d,ie,ut,v):d.isMapSchema()?this.writeMap(d,ie,ut,v,!0):d.isStructSchema()?ut=this.writeStruct(d,ie,v):this.writeSimpleInto(d,ie,ut,v),te.addChildNode(ut)};if(S){for(const[te,Se]of Object.entries(r))if(x||Se!=null){const ie=De.of((G=a.xmlName)!=null?G:s.getMemberName());T(ie,te,Se),n.addChildNode(ie)}}else{let te;o||(te=De.of((W=a.xmlName)!=null?W:s.getMemberName()),v&&te.addAttribute(y,v),n.addChildNode(te));for(const[Se,ie]of Object.entries(r))if(x||ie!=null){const Ie=De.of("entry");T(Ie,Se,ie),(o?n:te).addChildNode(Ie)}}}writeSimple(s,r){var o,a;if(r===null)throw new Error("@aws-sdk/core/protocols - (XML serializer) cannot write null value.");const n=se.of(s);let i=null;if(r&&typeof r=="object")if(n.isBlobSchema())i=((a=(o=this.serdeContext)==null?void 0:o.base64Encoder)!=null?a:gt)(r);else if(n.isTimestampSchema()&&r instanceof Date)switch(vn(n,this.settings)){case 5:i=r.toISOString().replace(".000Z","Z");break;case 6:i=Qr(r);break;case 7:i=String(r.getTime()/1e3);break;default:console.warn("Missing timestamp format, using http date",r),i=Qr(r);break}else{if(n.isBigDecimalSchema()&&r)return r instanceof Gs?r.string:String(r);throw n.isMapSchema()||n.isListSchema()?new Error("@aws-sdk/core/protocols - xml serializer, cannot call _write() on List/Map schema, call writeList or writeMap() instead."):new Error(`@aws-sdk/core/protocols - xml serializer, unhandled schema type for object value and schema: ${n.getName(!0)}`)}if((n.isBooleanSchema()||n.isNumericSchema()||n.isBigIntegerSchema()||n.isBigDecimalSchema())&&(i=String(r)),n.isStringSchema()&&(r===void 0&&n.isIdempotencyToken()?i=En():i=String(r)),i===null)throw new Error(`Unhandled schema-value pair ${n.getName(!0)}=${r}`);return i}writeSimpleInto(s,r,n,i){const o=this.writeSimple(s,r),a=se.of(s),u=new tn(o),[c,h]=this.getXmlnsAttribute(a,i);h&&n.addAttribute(c,h),n.addChildNode(u)}getXmlnsAttribute(s,r){var a;const n=s.getMergedTraits(),[i,o]=(a=n.xmlNamespace)!=null?a:[];return o&&o!==r?[i?`xmlns:${i}`:"xmlns",o]:[void 0,void 0]}}class mf extends kn{constructor(s){super();g(this,"settings");this.settings=s}createSerializer(){const s=new hf(this.settings);return s.setSerdeContext(this.serdeContext),s}createDeserializer(){const s=new lf(this.settings);return s.setSerdeContext(this.serdeContext),s}}class Ps extends cl{constructor(s){super(s);g(this,"codec");g(this,"serializer");g(this,"deserializer");g(this,"mixin",new nf);const r={timestampFormat:{useTrait:!0,default:5},httpBindings:!0,xmlNamespace:s.xmlNamespace,serviceNamespace:s.defaultNamespace};this.codec=new mf(r),this.serializer=new ll(this.codec.createSerializer(),r),this.deserializer=new ul(this.codec.createDeserializer(),r)}getPayloadCodec(){return this.codec}getShapeId(){return"aws.protocols#restXml"}serializeRequest(s,r,n){return C(this,null,function*(){const i=yield ar(Ps.prototype,this,"serializeRequest").call(this,s,r,n),o=se.of(s.input);if(!i.headers["content-type"]){const a=this.mixin.resolveRestContentType(this.getDefaultContentType(),o);a&&(i.headers["content-type"]=a)}return typeof i.body=="string"&&i.headers["content-type"]===this.getDefaultContentType()&&!i.body.startsWith("<?xml ")&&!this.hasUnstructuredPayloadBinding(o)&&(i.body='<?xml version="1.0" encoding="UTF-8"?>'+i.body),i})}deserializeResponse(s,r,n){return C(this,null,function*(){return ar(Ps.prototype,this,"deserializeResponse").call(this,s,r,n)})}handleError(s,r,n,i,o){return C(this,null,function*(){var S,y,v,T,M,U,G,W,te,Se,ie;const a=(S=ff(n,i))!=null?S:"Unknown",{errorSchema:u,errorMetadata:c}=yield this.mixin.getErrorSchemaOrThrowBaseException(a,this.options.defaultNamespace,n,i,o),h=se.of(u),d=(G=(U=(M=(T=(y=i.Error)==null?void 0:y.message)!=null?T:(v=i.Error)==null?void 0:v.Message)!=null?M:i.message)!=null?U:i.Message)!=null?G:"Unknown",f=(W=fe.for(u[1]).getErrorCtor(u))!=null?W:Error,m=new f(d);yield this.deserializeHttpMessage(u,r,n,i);const x={};for(const[Ie,bs]of h.structIterator()){const Qt=(te=bs.getMergedTraits().xmlName)!=null?te:Ie,ut=(ie=(Se=i.Error)==null?void 0:Se[Qt])!=null?ie:i[Qt];x[Ie]=this.codec.createDeserializer().readSchema(bs,ut)}throw this.mixin.decorateServiceException(Object.assign(m,c,{$fault:h.getMergedTraits().error,message:d},x),i)})}getDefaultContentType(){return"application/xml"}hasUnstructuredPayloadBinding(s){for(const[,r]of s.structIterator())if(r.getMergedTraits().httpPayload)return!(r.isStructSchema()||r.isMapSchema()||r.isListSchema());return!1}}const sn=[Q.CRC32,Q.CRC32C,Q.CRC64NVME,Q.SHA1,Q.SHA256],pf=[Q.SHA256,Q.SHA1,Q.CRC32,Q.CRC32C,Q.CRC64NVME],gf=(t,{requestChecksumRequired:e,requestAlgorithmMember:s,requestChecksumCalculation:r})=>{if(!s)return r===Pt.WHEN_SUPPORTED||e?Gr:void 0;if(!t[s])return;const n=t[s];if(!sn.includes(n))throw new Error(`The checksum algorithm "${n}" is not supported by the client. Select one of ${sn}.`);return n},Tn=t=>t===Q.MD5?"content-md5":`x-amz-checksum-${t.toLowerCase()}`,yf=(t,e)=>{const s=t.toLowerCase();for(const r of Object.keys(e))if(s===r.toLowerCase())return!0;return!1},Sf=(t,e)=>{const s=t.toLowerCase();for(const r of Object.keys(e))if(r.toLowerCase().startsWith(s))return!0;return!1},La=t=>t!==void 0&&typeof t!="string"&&!ArrayBuffer.isView(t)&&!Ua(t);function Bn(t,e,s,r){function n(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function a(h){try{c(r.next(h))}catch(d){o(d)}}function u(h){try{c(r.throw(h))}catch(d){o(d)}}function c(h){h.done?i(h.value):n(h.value).then(a,u)}c((r=r.apply(t,e||[])).next())})}function _n(t,e){var s={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,n,i,o=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return o.next=a(0),o.throw=a(1),o.return=a(2),typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(h){return u([c,h])}}function u(c){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(s=0)),s;)try{if(r=1,n&&(i=c[0]&2?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return s.label++,{value:c[1],done:!1};case 5:s.label++,n=c[1],c=[0];continue;case 7:c=s.ops.pop(),s.trys.pop();continue;default:if(i=s.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){s=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){s.label=c[1];break}if(c[0]===6&&s.label<i[1]){s.label=i[1],i=c;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(c);break}i[2]&&s.ops.pop(),s.trys.pop();continue}c=e.call(t,s)}catch(h){c=[6,h],n=0}finally{r=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function Ha(t){var e=typeof Symbol=="function"&&Symbol.iterator,s=e&&t[e],r=0;if(s)return s.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}const xf=t=>new TextEncoder().encode(t);var bf=typeof Buffer!="undefined"&&Buffer.from?function(t){return Buffer.from(t,"utf8")}:xf;function it(t){return t instanceof Uint8Array?t:typeof t=="string"?bf(t):ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(t)}function fs(t){return typeof t=="string"?t.length===0:t.byteLength===0}function za(t){return new Uint8Array([(t&4278190080)>>24,(t&16711680)>>16,(t&65280)>>8,t&255])}function ja(t){if(!Uint32Array.from){for(var e=new Uint32Array(t.length),s=0;s<t.length;)e[s]=t[s],s+=1;return e}return Uint32Array.from(t)}var wf=(function(){function t(){this.crc32c=new Ni}return t.prototype.update=function(e){fs(e)||this.crc32c.update(it(e))},t.prototype.digest=function(){return Bn(this,void 0,void 0,function(){return _n(this,function(e){return[2,za(this.crc32c.digest())]})})},t.prototype.reset=function(){this.crc32c=new Ni},t})(),Ni=(function(){function t(){this.checksum=4294967295}return t.prototype.update=function(e){var s,r;try{for(var n=Ha(e),i=n.next();!i.done;i=n.next()){var o=i.value;this.checksum=this.checksum>>>8^Cf[(this.checksum^o)&255]}}catch(a){s={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return this},t.prototype.digest=function(){return(this.checksum^4294967295)>>>0},t})(),Ef=[0,4067132163,3778769143,324072436,3348797215,904991772,648144872,3570033899,2329499855,2024987596,1809983544,2575936315,1296289744,3207089363,2893594407,1578318884,274646895,3795141740,4049975192,51262619,3619967088,632279923,922689671,3298075524,2592579488,1760304291,2075979607,2312596564,1562183871,2943781820,3156637768,1313733451,549293790,3537243613,3246849577,871202090,3878099393,357341890,102525238,4101499445,2858735121,1477399826,1264559846,3107202533,1845379342,2677391885,2361733625,2125378298,820201905,3263744690,3520608582,598981189,4151959214,85089709,373468761,3827903834,3124367742,1213305469,1526817161,2842354314,2107672161,2412447074,2627466902,1861252501,1098587580,3004210879,2688576843,1378610760,2262928035,1955203488,1742404180,2511436119,3416409459,969524848,714683780,3639785095,205050476,4266873199,3976438427,526918040,1361435347,2739821008,2954799652,1114974503,2529119692,1691668175,2005155131,2247081528,3690758684,697762079,986182379,3366744552,476452099,3993867776,4250756596,255256311,1640403810,2477592673,2164122517,1922457750,2791048317,1412925310,1197962378,3037525897,3944729517,427051182,170179418,4165941337,746937522,3740196785,3451792453,1070968646,1905808397,2213795598,2426610938,1657317369,3053634322,1147748369,1463399397,2773627110,4215344322,153784257,444234805,3893493558,1021025245,3467647198,3722505002,797665321,2197175160,1889384571,1674398607,2443626636,1164749927,3070701412,2757221520,1446797203,137323447,4198817972,3910406976,461344835,3484808360,1037989803,781091935,3705997148,2460548119,1623424788,1939049696,2180517859,1429367560,2807687179,3020495871,1180866812,410100952,3927582683,4182430767,186734380,3756733383,763408580,1053836080,3434856499,2722870694,1344288421,1131464017,2971354706,1708204729,2545590714,2229949006,1988219213,680717673,3673779818,3383336350,1002577565,4010310262,493091189,238226049,4233660802,2987750089,1082061258,1395524158,2705686845,1972364758,2279892693,2494862625,1725896226,952904198,3399985413,3656866545,731699698,4283874585,222117402,510512622,3959836397,3280807620,837199303,582374963,3504198960,68661723,4135334616,3844915500,390545967,1230274059,3141532936,2825850620,1510247935,2395924756,2091215383,1878366691,2644384480,3553878443,565732008,854102364,3229815391,340358836,3861050807,4117890627,119113024,1493875044,2875275879,3090270611,1247431312,2660249211,1828433272,2141937292,2378227087,3811616794,291187481,34330861,4032846830,615137029,3603020806,3314634738,939183345,1776939221,2609017814,2295496738,2058945313,2926798794,1545135305,1330124605,3173225534,4084100981,17165430,307568514,3762199681,888469610,3332340585,3587147933,665062302,2042050490,2346497209,2559330125,1793573966,3190661285,1279665062,1595330642,2910671697],Cf=ja(Ef);const Af=()=>{const e=new Array(8);for(let s=0;s<8;s++){const r=new Array(512);for(let n=0;n<256;n++){let i=BigInt(n);for(let o=0;o<8*(s+1);o++)i&BigInt(1)?i=i>>BigInt(1)^BigInt("0x9a6c9329ac4bc9b5"):i=i>>BigInt(1);r[n*2]=Number(i>>BigInt(32)&BigInt(0xffffffff)),r[n*2+1]=Number(i&BigInt(0xffffffff))}e[s]=new Uint32Array(r)}return e};let br,ss,rn,nn,on,an,cn,un,dn;const Rf=()=>{br||(br=Af(),[ss,rn,nn,on,an,cn,un,dn]=br)};class vf{constructor(){g(this,"c1",0);g(this,"c2",0);Rf(),this.reset()}update(e){const s=e.length;let r=0,n=this.c1,i=this.c2;for(;r+8<=s;){const o=((i^e[r++])&255)<<1,a=((i>>>8^e[r++])&255)<<1,u=((i>>>16^e[r++])&255)<<1,c=((i>>>24^e[r++])&255)<<1,h=((n^e[r++])&255)<<1,d=((n>>>8^e[r++])&255)<<1,f=((n>>>16^e[r++])&255)<<1,m=((n>>>24^e[r++])&255)<<1;n=dn[o]^un[a]^cn[u]^an[c]^on[h]^nn[d]^rn[f]^ss[m],i=dn[o+1]^un[a+1]^cn[u+1]^an[c+1]^on[h+1]^nn[d+1]^rn[f+1]^ss[m+1]}for(;r<s;){const o=((i^e[r])&255)<<1;i=(i>>>8|(n&255)<<24)>>>0,n=n>>>8^ss[o],i^=ss[o+1],r++}this.c1=n,this.c2=i}digest(){return C(this,null,function*(){const e=this.c1^4294967295,s=this.c2^4294967295;return new Uint8Array([e>>>24,e>>>16&255,e>>>8&255,e&255,s>>>24,s>>>16&255,s>>>8&255,s&255])})}reset(){this.c1=4294967295,this.c2=4294967295}}var Df=(function(){function t(){this.crc32=new Ms}return t.prototype.update=function(e){fs(e)||this.crc32.update(it(e))},t.prototype.digest=function(){return Bn(this,void 0,void 0,function(){return _n(this,function(e){return[2,za(this.crc32.digest())]})})},t.prototype.reset=function(){this.crc32=new Ms},t})(),Ms=(function(){function t(){this.checksum=4294967295}return t.prototype.update=function(e){var s,r;try{for(var n=Ha(e),i=n.next();!i.done;i=n.next()){var o=i.value;this.checksum=this.checksum>>>8^Tf[(this.checksum^o)&255]}}catch(a){s={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return this},t.prototype.digest=function(){return(this.checksum^4294967295)>>>0},t})(),kf=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117],Tf=ja(kf);const Bf=()=>Df,qa=(t,e)=>{switch(t){case Q.MD5:return e.md5;case Q.CRC32:return Bf();case Q.CRC32C:return wf;case Q.CRC64NVME:return vf;case Q.SHA1:return e.sha1;case Q.SHA256:return e.sha256;default:throw new Error(`Unsupported checksum algorithm: ${t}`)}},Va=(t,e)=>{const s=new t;return s.update(Nt(e||"")),s.digest()},_f={name:"flexibleChecksumsMiddleware",step:"build",tags:["BODY_CHECKSUM"],override:!0},If=(t,e)=>(s,r)=>n=>C(null,null,function*(){if(!le.isInstance(n.request)||Sf("x-amz-checksum-",n.request.headers))return s(n);const{request:i,input:o}=n,{body:a,headers:u}=i,{base64Encoder:c,streamHasher:h}=t,{requestChecksumRequired:d,requestAlgorithmMember:f}=e,m=yield t.requestChecksumCalculation(),x=f==null?void 0:f.name,S=f==null?void 0:f.httpHeader;x&&!o[x]&&(m===Pt.WHEN_SUPPORTED||d)&&(o[x]=Gr,S&&(u[S]=Gr));const y=gf(o,{requestChecksumRequired:d,requestAlgorithmMember:f==null?void 0:f.name,requestChecksumCalculation:m});let v=a,T=u;if(y){switch(y){case Q.CRC32:ae(r,"FLEXIBLE_CHECKSUMS_REQ_CRC32","U");break;case Q.CRC32C:ae(r,"FLEXIBLE_CHECKSUMS_REQ_CRC32C","V");break;case Q.CRC64NVME:ae(r,"FLEXIBLE_CHECKSUMS_REQ_CRC64","W");break;case Q.SHA1:ae(r,"FLEXIBLE_CHECKSUMS_REQ_SHA1","X");break;case Q.SHA256:ae(r,"FLEXIBLE_CHECKSUMS_REQ_SHA256","Y");break}const M=Tn(y),U=qa(y,t);if(La(a)){const{getAwsChunkedEncodingStream:G,bodyLengthChecker:W}=t;v=G(typeof t.requestStreamBufferSize=="number"&&t.requestStreamBufferSize>=8*1024?kd(a,t.requestStreamBufferSize,r.logger):a,{base64Encoder:c,bodyLengthChecker:W,checksumLocationName:M,checksumAlgorithmFn:U,streamHasher:h}),T=H(k({},u),{"content-encoding":u["content-encoding"]?`${u["content-encoding"]},aws-chunked`:"aws-chunked","transfer-encoding":"chunked","x-amz-decoded-content-length":u["content-length"],"x-amz-content-sha256":"STREAMING-UNSIGNED-PAYLOAD-TRAILER","x-amz-trailer":M}),delete T["content-length"]}else if(!yf(M,u)){const G=yield Va(U,a);T=H(k({},u),{[M]:c(G)})}}try{return yield s(H(k({},n),{request:H(k({},i),{headers:T,body:v})}))}catch(M){if(M instanceof Error&&M.name==="InvalidChunkSizeError")try{M.message.endsWith(".")||(M.message+="."),M.message+=" Set [requestStreamBufferSize=number e.g. 65_536] in client constructor to instruct AWS SDK to buffer your input stream."}catch(U){}throw M}}),Of={name:"flexibleChecksumsInputMiddleware",toMiddleware:"serializerMiddleware",relation:"before",tags:["BODY_CHECKSUM"],override:!0},Pf=(t,e)=>(s,r)=>n=>C(null,null,function*(){const i=n.input,{requestValidationModeMember:o}=e,a=yield t.requestChecksumCalculation(),u=yield t.responseChecksumValidation();switch(a){case Pt.WHEN_REQUIRED:ae(r,"FLEXIBLE_CHECKSUMS_REQ_WHEN_REQUIRED","a");break;case Pt.WHEN_SUPPORTED:ae(r,"FLEXIBLE_CHECKSUMS_REQ_WHEN_SUPPORTED","Z");break}switch(u){case cr.WHEN_REQUIRED:ae(r,"FLEXIBLE_CHECKSUMS_RES_WHEN_REQUIRED","c");break;case cr.WHEN_SUPPORTED:ae(r,"FLEXIBLE_CHECKSUMS_RES_WHEN_SUPPORTED","b");break}return o&&!i[o]&&u===cr.WHEN_SUPPORTED&&(i[o]="ENABLED"),s(n)}),Wa=(t=[])=>{const e=[];for(const s of pf)!t.includes(s)||!sn.includes(s)||e.push(s);return e},Mf=t=>{const e=t.lastIndexOf("-");if(e!==-1){const s=t.slice(e+1);if(!s.startsWith("0")){const r=parseInt(s,10);if(!isNaN(r)&&r>=1&&r<=1e4)return!0}}return!1},Nf=(r,n)=>C(null,[r,n],function*(t,{checksumAlgorithmFn:e,base64Encoder:s}){return s(yield Va(e,t))}),Uf=(n,i)=>C(null,[n,i],function*(t,{config:e,responseAlgorithms:s,logger:r}){const o=Wa(s),{body:a,headers:u}=t;for(const c of o){const h=Tn(c),d=u[h];if(d){let f;try{f=qa(c,e)}catch(S){if(c===Q.CRC64NVME){r==null||r.warn(`Skipping ${Q.CRC64NVME} checksum validation: ${S.message}`);continue}throw S}const{base64Encoder:m}=e;if(La(a)){t.body=Rd({expectedChecksum:d,checksumSourceLocation:h,checksum:new f,source:a,base64Encoder:m});return}const x=yield Nf(a,{checksumAlgorithmFn:f,base64Encoder:m});if(x===d)break;throw new Error(`Checksum mismatch: expected "${x}" but received "${d}" in response header "${h}".`)}}}),$f={name:"flexibleChecksumsResponseMiddleware",toMiddleware:"deserializerMiddleware",relation:"after",tags:["BODY_CHECKSUM"],override:!0},Ff=(t,e)=>(s,r)=>n=>C(null,null,function*(){if(!le.isInstance(n.request))return s(n);const i=n.input,o=yield s(n),a=o.response,{requestValidationModeMember:u,responseAlgorithms:c}=e;if(u&&i[u]==="ENABLED"){const{clientName:h,commandName:d}=r;if(h==="S3Client"&&d==="GetObjectCommand"&&Wa(c).every(m=>{const x=Tn(m),S=a.headers[x];return!S||Mf(S)}))return o;yield Uf(a,{config:t,responseAlgorithms:c,logger:r.logger})}return o}),Ka=(t,e)=>({applyToStack:s=>{s.add(If(t,e),_f),s.addRelativeTo(Pf(t,e),Of),s.addRelativeTo(Ff(t,e),$f)}}),Lf=t=>{const{requestChecksumCalculation:e,responseChecksumValidation:s,requestStreamBufferSize:r}=t;return Object.assign(t,{requestChecksumCalculation:ze(e!=null?e:od),responseChecksumValidation:ze(s!=null?s:ad),requestStreamBufferSize:Number(r!=null?r:0)})};const Hf=t=>e=>s=>C(null,null,function*(){if(!le.isInstance(s.request))return e(s);const{request:r}=s,{handlerProtocol:n=""}=t.requestHandler.metadata||{};if(n.indexOf("h2")>=0&&!r.headers[":authority"])delete r.headers.host,r.headers[":authority"]=r.hostname+(r.port?":"+r.port:"");else if(!r.headers.host){let i=r.hostname;r.port!=null&&(i+=`:${r.port}`),r.headers.host=i}return e(s)}),zf={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0},jf=t=>({applyToStack:e=>{e.add(Hf(t),zf)}}),qf=()=>(t,e)=>s=>C(null,null,function*(){var n,i;try{const o=yield t(s),{clientName:a,commandName:u,logger:c,dynamoDbDocumentClientOptions:h={}}=e,{overrideInputFilterSensitiveLog:d,overrideOutputFilterSensitiveLog:f}=h,m=d!=null?d:e.inputFilterSensitiveLog,x=f!=null?f:e.outputFilterSensitiveLog,r=o.output,{$metadata:S}=r,y=Es(r,["$metadata"]);return(n=c==null?void 0:c.info)==null||n.call(c,{clientName:a,commandName:u,input:m(s.input),output:x(y),metadata:S}),o}catch(o){const{clientName:a,commandName:u,logger:c,dynamoDbDocumentClientOptions:h={}}=e,{overrideInputFilterSensitiveLog:d}=h,f=d!=null?d:e.inputFilterSensitiveLog;throw(i=c==null?void 0:c.error)==null||i.call(c,{clientName:a,commandName:u,input:f(s.input),error:o,metadata:o.$metadata}),o}}),Vf={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0},Wf=t=>({applyToStack:e=>{e.add(qf(),Vf)}}),Kf={step:"build",tags:["RECURSION_DETECTION"],name:"recursionDetectionMiddleware",override:!0,priority:"low"},Gf=()=>t=>e=>C(null,null,function*(){return t(e)}),Xf=t=>({applyToStack:e=>{e.add(Gf(),Kf)}}),Zf="content-length",Qf="x-amz-decoded-content-length";function Jf(){return(t,e)=>s=>C(null,null,function*(){var n;const{request:r}=s;if(le.isInstance(r)&&!(Zf in r.headers)&&!(Qf in r.headers)){const i="Are you using a Stream of unknown length as the Body of a PutObject request? Consider using Upload instead from @aws-sdk/lib-storage.";typeof((n=e==null?void 0:e.logger)==null?void 0:n.warn)=="function"&&!(e.logger instanceof Dn)?e.logger.warn(i):console.warn(i)}return t(k({},s))})}const Yf={step:"finalizeRequest",tags:["CHECK_CONTENT_LENGTH_HEADER"],name:"getCheckContentLengthHeaderPlugin",override:!0},eh=t=>({applyToStack:e=>{e.add(Jf(),Yf)}}),th=t=>(e,s)=>r=>C(null,null,function*(){const n=yield t.region(),i=t.region;let o=()=>{};s.__s3RegionRedirect&&(Object.defineProperty(t,"region",{writable:!1,value:()=>C(null,null,function*(){return s.__s3RegionRedirect})}),o=()=>Object.defineProperty(t,"region",{writable:!0,value:i}));try{const a=yield e(r);if(s.__s3RegionRedirect){o();const u=yield t.region();if(n!==u)throw new Error("Region was not restored following S3 region redirect.")}return a}catch(a){throw o(),a}}),sh={tags:["REGION_REDIRECT","S3"],name:"regionRedirectEndpointMiddleware",override:!0,relation:"before",toMiddleware:"endpointV2Middleware"};function rh(t){return(e,s)=>r=>C(null,null,function*(){var n,i,o,a;try{return yield e(r)}catch(u){if(t.followRegionRedirects){const c=(n=u==null?void 0:u.$metadata)==null?void 0:n.httpStatusCode,h=s.commandName==="HeadBucketCommand",d=(o=(i=u==null?void 0:u.$response)==null?void 0:i.headers)==null?void 0:o["x-amz-bucket-region"];if(d&&(c===301||c===400&&((u==null?void 0:u.name)==="IllegalLocationConstraintException"||h))){try{const f=d;(a=s.logger)==null||a.debug(`Redirecting from ${yield t.region()} to ${f}`),s.__s3RegionRedirect=f}catch(f){throw new Error("Region redirect failed: "+f)}return e(r)}}throw u}})}const nh={step:"initialize",tags:["REGION_REDIRECT","S3"],name:"regionRedirectMiddleware",override:!0},ih=t=>({applyToStack:e=>{e.add(rh(t),nh),e.addRelativeTo(th(t),sh)}}),Vs=class Vs{constructor(e={}){g(this,"data");g(this,"lastPurgeTime",Date.now());this.data=e}get(e){const s=this.data[e];if(s)return s}set(e,s){return this.data[e]=s,s}delete(e){delete this.data[e]}purgeExpired(){return C(this,null,function*(){const e=Date.now();if(!(this.lastPurgeTime+Vs.EXPIRED_CREDENTIAL_PURGE_INTERVAL_MS>e))for(const s in this.data){const r=this.data[s];if(!r.isRefreshing){const n=yield r.identity;n.expiration&&n.expiration.getTime()<e&&delete this.data[s]}}})}};g(Vs,"EXPIRED_CREDENTIAL_PURGE_INTERVAL_MS",3e4);let ln=Vs;class wr{constructor(e,s=!1,r=Date.now()){g(this,"_identity");g(this,"isRefreshing");g(this,"accessed");this._identity=e,this.isRefreshing=s,this.accessed=r}get identity(){return this.accessed=Date.now(),this._identity}}const Ws=class Ws{constructor(e,s=new ln){g(this,"createSessionFn");g(this,"cache");this.createSessionFn=e,this.cache=s}getS3ExpressIdentity(e,s){return C(this,null,function*(){const r=s.Bucket,{cache:n}=this,i=n.get(r);return i?i.identity.then(o=>{var c,h,d,f;return((h=(c=o.expiration)==null?void 0:c.getTime())!=null?h:0)<Date.now()?n.set(r,new wr(this.getIdentity(r))).identity:(((f=(d=o.expiration)==null?void 0:d.getTime())!=null?f:0)<Date.now()+Ws.REFRESH_WINDOW_MS&&!i.isRefreshing&&(i.isRefreshing=!0,this.getIdentity(r).then(m=>{n.set(r,new wr(Promise.resolve(m)))})),o)}):n.set(r,new wr(this.getIdentity(r))).identity})}getIdentity(e){return C(this,null,function*(){var n,i;yield this.cache.purgeExpired().catch(o=>{console.warn(`Error while clearing expired entries in S3ExpressIdentityCache: 
`+o)});const s=yield this.createSessionFn(e);if(!((n=s.Credentials)!=null&&n.AccessKeyId)||!((i=s.Credentials)!=null&&i.SecretAccessKey))throw new Error("s3#createSession response credential missing AccessKeyId or SecretAccessKey.");return{accessKeyId:s.Credentials.AccessKeyId,secretAccessKey:s.Credentials.SecretAccessKey,sessionToken:s.Credentials.SessionToken,expiration:s.Credentials.Expiration?new Date(s.Credentials.Expiration):void 0}})}};g(Ws,"REFRESH_WINDOW_MS",6e4);let fn=Ws;const oh="Directory",ah="S3Express",ch="sigv4-s3express",hn="X-Amz-S3session-Token",mn=hn.toLowerCase();class uh extends Yr{signWithCredentials(e,s,r){return C(this,null,function*(){const n=Ui(s);e.headers[mn]=s.sessionToken;const i=this;return $i(i,n),i.signRequest(e,r!=null?r:{})})}presignWithCredentials(e,s,r){return C(this,null,function*(){var o;const n=Ui(s);return delete e.headers[mn],e.headers[hn]=s.sessionToken,e.query=(o=e.query)!=null?o:{},e.query[hn]=s.sessionToken,$i(this,n),this.presign(e,r)})}}function Ui(t){return{accessKeyId:t.accessKeyId,secretAccessKey:t.secretAccessKey,expiration:t.expiration}}function $i(t,e){const s=setTimeout(()=>{throw new Error("SignatureV4S3Express credential override was created but not called.")},10),r=t.credentialProvider,n=()=>(clearTimeout(s),t.credentialProvider=r,Promise.resolve(e));t.credentialProvider=n}const dh=t=>(e,s)=>r=>C(null,null,function*(){var n,i,o,a,u;if(s.endpointV2){const c=s.endpointV2,h=((o=(i=(n=c.properties)==null?void 0:n.authSchemes)==null?void 0:i[0])==null?void 0:o.name)===ch;if((((a=c.properties)==null?void 0:a.backend)===ah||((u=c.properties)==null?void 0:u.bucketType)===oh)&&(ae(s,"S3_EXPRESS_BUCKET","J"),s.isS3ExpressBucket=!0),h){const f=r.input.Bucket;if(f){const m=yield t.s3ExpressIdentityProvider.getS3ExpressIdentity(yield t.credentials(),{Bucket:f});s.s3ExpressIdentity=m,le.isInstance(r.request)&&m.sessionToken&&(r.request.headers[mn]=m.sessionToken)}}}return e(r)}),lh={name:"s3ExpressMiddleware",step:"build",tags:["S3","S3_EXPRESS"],override:!0},fh=t=>({applyToStack:e=>{e.add(dh(t),lh)}}),hh=(t,e,s,r)=>C(null,null,function*(){const n=yield r.signWithCredentials(s,t,{});if(n.headers["X-Amz-Security-Token"]||n.headers["x-amz-security-token"])throw new Error("X-Amz-Security-Token must not be set for s3-express requests.");return n}),mh=t=>e=>{throw e},ph=(t,e)=>{},gh=t=>(e,s)=>r=>C(null,null,function*(){if(!le.isInstance(r.request))return e(r);const i=at(s).selectedHttpAuthScheme;if(!i)throw new Error("No HttpAuthScheme was selected: unable to sign request");const{httpAuthOption:{signingProperties:o={}},identity:a,signer:u}=i;let c;s.s3ExpressIdentity?c=yield hh(s.s3ExpressIdentity,o,r.request,yield t.signer()):c=yield u.sign(r.request,a,o);const h=yield e(H(k({},r),{request:c})).catch((u.errorHandler||mh)(o));return(u.successHandler||ph)(h.response,o),h}),yh=t=>({applyToStack:e=>{e.addRelativeTo(gh(t),xa)}}),Sh=(t,{session:e})=>{const[s,r]=e,{forcePathStyle:n,useAccelerateEndpoint:i,disableMultiregionAccessPoints:o,followRegionRedirects:a,s3ExpressIdentityProvider:u,bucketEndpoint:c,expectContinueHeader:h}=t;return Object.assign(t,{forcePathStyle:n!=null?n:!1,useAccelerateEndpoint:i!=null?i:!1,disableMultiregionAccessPoints:o!=null?o:!1,followRegionRedirects:a!=null?a:!1,s3ExpressIdentityProvider:u!=null?u:new fn(d=>C(null,null,function*(){return s().send(new r({Bucket:d}))})),bucketEndpoint:c!=null?c:!1,expectContinueHeader:h!=null?h:2097152})},xh={CopyObjectCommand:!0,UploadPartCopyCommand:!0,CompleteMultipartUploadCommand:!0},bh=3e3,wh=t=>(e,s)=>r=>C(null,null,function*(){const n=yield e(r),{response:i}=n;if(!pt.isInstance(i))return n;const{statusCode:o,body:a}=i;if(o<200||o>=300||!(typeof(a==null?void 0:a.stream)=="function"||typeof(a==null?void 0:a.pipe)=="function"||typeof(a==null?void 0:a.tee)=="function"))return n;let c=a,h=a;a&&typeof a=="object"&&!(a instanceof Uint8Array)&&([c,h]=yield Fd(a)),i.body=h;const d=yield Eh(c,{streamCollector:m=>C(null,null,function*(){return Id(m,bh)})});typeof(c==null?void 0:c.destroy)=="function"&&c.destroy();const f=t.utf8Encoder(d.subarray(d.length-16));if(d.length===0&&xh[s.commandName]){const m=new Error("S3 aborted request");throw m.name="InternalError",m}return f&&f.endsWith("</Error>")&&(i.statusCode=400),n}),Eh=(t=new Uint8Array,e)=>t instanceof Uint8Array?Promise.resolve(t):e.streamCollector(t)||Promise.resolve(new Uint8Array),Ch={relation:"after",toMiddleware:"deserializerMiddleware",tags:["THROW_200_EXCEPTIONS","S3"],name:"throw200ExceptionsMiddleware",override:!0},yt=t=>({applyToStack:e=>{e.addRelativeTo(wh(t),Ch)}}),Ah=t=>typeof t=="string"&&t.indexOf("arn:")===0&&t.split(":").length>=6;function Rh(t){return(e,s)=>r=>C(null,null,function*(){var n,i,o,a;if(t.bucketEndpoint){const u=s.endpointV2;if(u){const c=r.input.Bucket;if(typeof c=="string")try{const h=new URL(c);s.endpointV2=H(k({},u),{url:h})}catch(h){const d=`@aws-sdk/middleware-sdk-s3: bucketEndpoint=true was set but Bucket=${c} could not be parsed as URL.`;throw((i=(n=s.logger)==null?void 0:n.constructor)==null?void 0:i.name)==="NoOpLogger"?console.warn(d):(a=(o=s.logger)==null?void 0:o.warn)==null||a.call(o,d),h}}}return e(r)})}const vh={name:"bucketEndpointMiddleware",override:!0,relation:"after",toMiddleware:"endpointV2Middleware"};function Dh({bucketEndpoint:t}){return e=>s=>C(null,null,function*(){const{input:{Bucket:r}}=s;if(!t&&typeof r=="string"&&!Ah(r)&&r.indexOf("/")>=0){const n=new Error(`Bucket name shouldn't contain '/', received '${r}'`);throw n.name="InvalidBucketName",n}return e(k({},s))})}const kh={step:"initialize",tags:["VALIDATE_BUCKET_NAME"],name:"validateBucketNameMiddleware",override:!0},Th=t=>({applyToStack:e=>{e.add(Dh(t),kh),e.addRelativeTo(Rh(t),vh)}}),Bh=void 0;function _h(t){return t===void 0?!0:typeof t=="string"&&t.length<=50}function Ih(t){var r;const e=It((r=t.userAgentAppId)!=null?r:Bh),{customUserAgent:s}=t;return Object.assign(t,{customUserAgent:typeof s=="string"?[[s]]:s,userAgentAppId:()=>C(null,null,function*(){var i,o;const n=yield e();if(!_h(n)){const a=((o=(i=t.logger)==null?void 0:i.constructor)==null?void 0:o.name)==="NoOpLogger"||!t.logger?console:t.logger;typeof n!="string"?a==null||a.warn("userAgentAppId must be a string or undefined."):n.length>50&&(a==null||a.warn("The provided userAgentAppId exceeds the maximum length of 50 characters."))}return n})})}class Oh{constructor({size:e,params:s}){g(this,"capacity");g(this,"data",new Map);g(this,"parameters",[]);this.capacity=e!=null?e:50,s&&(this.parameters=s)}get(e,s){const r=this.hash(e);if(r===!1)return s();if(!this.data.has(r)){if(this.data.size>this.capacity+10){const n=this.data.keys();let i=0;for(;;){const{value:o,done:a}=n.next();if(this.data.delete(o),a||++i>10)break}}this.data.set(r,s())}return this.data.get(r)}size(){return this.data.size}hash(e){var n;let s="";const{parameters:r}=this;if(r.length===0)return!1;for(const i of r){const o=String((n=e[i])!=null?n:"");if(o.includes("|;"))return!1;s+=o+"|;"}return s}}const Ph=new RegExp("^(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}$"),Ga=t=>Ph.test(t)||t.startsWith("[")&&t.endsWith("]"),Mh=new RegExp("^(?!.*-$)(?!-)[a-zA-Z0-9-]{1,63}$"),Zs=(t,e=!1)=>{if(!e)return Mh.test(t);const s=t.split(".");for(const r of s)if(!Zs(r))return!1;return!0},Ns={},hs="endpoints";function ot(t){return typeof t!="object"||t==null?t:"ref"in t?`$${ot(t.ref)}`:"fn"in t?`${t.fn}(${(t.argv||[]).map(ot).join(", ")})`:JSON.stringify(t,null,2)}class Ne extends Error{constructor(e){super(e),this.name="EndpointError"}}const Nh=(t,e)=>t===e,Uh=t=>{const e=t.split("."),s=[];for(const r of e){const n=r.indexOf("[");if(n!==-1){if(r.indexOf("]")!==r.length-1)throw new Ne(`Path: '${t}' does not end with ']'`);const i=r.slice(n+1,-1);if(Number.isNaN(parseInt(i)))throw new Ne(`Invalid array index: '${i}' in path: '${t}'`);n!==0&&s.push(r.slice(0,n)),s.push(i)}else s.push(r)}return s},Xa=(t,e)=>Uh(e).reduce((s,r)=>{if(typeof s!="object")throw new Ne(`Index '${r}' in '${e}' not found in '${JSON.stringify(t)}'`);return Array.isArray(s)?s[parseInt(r)]:s[r]},t),$h=t=>t!=null,Fh=t=>!t,Er={[ls.HTTP]:80,[ls.HTTPS]:443},Lh=t=>{const e=(()=>{try{if(t instanceof URL)return t;if(typeof t=="object"&&"hostname"in t){const{hostname:f,port:m,protocol:x="",path:S="",query:y={}}=t,v=new URL(`${x}//${f}${m?`:${m}`:""}${S}`);return v.search=Object.entries(y).map(([T,M])=>`${T}=${M}`).join("&"),v}return new URL(t)}catch(f){return null}})();if(!e)return console.error(`Unable to parse ${JSON.stringify(t)} as a whatwg URL.`),null;const s=e.href,{host:r,hostname:n,pathname:i,protocol:o,search:a}=e;if(a)return null;const u=o.slice(0,-1);if(!Object.values(ls).includes(u))return null;const c=Ga(n),h=s.includes(`${r}:${Er[u]}`)||typeof t=="string"&&t.includes(`${r}:${Er[u]}`),d=`${r}${h?`:${Er[u]}`:""}`;return{scheme:u,authority:d,path:i,normalizedPath:i.endsWith("/")?i:`${i}/`,isIp:c}},Hh=(t,e)=>t===e,zh=(t,e,s,r)=>e>=s||t.length<s?null:r?t.substring(t.length-s,t.length-e):t.substring(e,s),jh=t=>encodeURIComponent(t).replace(/[!*'()]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`),qh={booleanEquals:Nh,getAttr:Xa,isSet:$h,isValidHostLabel:Zs,not:Fh,parseURL:Lh,stringEquals:Hh,substring:zh,uriEncode:jh},Za=(t,e)=>{const s=[],r=k(k({},e.endpointParams),e.referenceRecord);let n=0;for(;n<t.length;){const i=t.indexOf("{",n);if(i===-1){s.push(t.slice(n));break}s.push(t.slice(n,i));const o=t.indexOf("}",i);if(o===-1){s.push(t.slice(i));break}t[i+1]==="{"&&t[o+1]==="}"&&(s.push(t.slice(i+1,o)),n=o+2);const a=t.substring(i+1,o);if(a.includes("#")){const[u,c]=a.split("#");s.push(Xa(r[u],c))}else s.push(r[a]);n=o+1}return s.join("")},Vh=({ref:t},e)=>k(k({},e.endpointParams),e.referenceRecord)[t],Qs=(t,e,s)=>{if(typeof t=="string")return Za(t,s);if(t.fn)return Ja.callFunction(t,s);if(t.ref)return Vh(t,s);throw new Ne(`'${e}': ${String(t)} is not a string, function or reference.`)},Qa=({fn:t,argv:e},s)=>{const r=e.map(i=>["boolean","number"].includes(typeof i)?i:Ja.evaluateExpression(i,"arg",s)),n=t.split(".");return n[0]in Ns&&n[1]!=null?Ns[n[0]][n[1]](...r):qh[t](...r)},Ja={evaluateExpression:Qs,callFunction:Qa},Wh=(r,s)=>{var n=r,{assign:t}=n,e=Es(n,["assign"]);var o,a;if(t&&t in s.referenceRecord)throw new Ne(`'${t}' is already defined in Reference Record.`);const i=Qa(e,s);return(a=(o=s.logger)==null?void 0:o.debug)==null||a.call(o,`${hs} evaluateCondition: ${ot(e)} = ${ot(i)}`),k({result:i===""?!0:!!i},t!=null&&{toAssign:{name:t,value:i}})},In=(t=[],e)=>{var r,n;const s={};for(const i of t){const{result:o,toAssign:a}=Wh(i,H(k({},e),{referenceRecord:k(k({},e.referenceRecord),s)}));if(!o)return{result:o};a&&(s[a.name]=a.value,(n=(r=e.logger)==null?void 0:r.debug)==null||n.call(r,`${hs} assign: ${a.name} := ${ot(a.value)}`))}return{result:!0,referenceRecord:s}},Kh=(t,e)=>Object.entries(t).reduce((s,[r,n])=>H(k({},s),{[r]:n.map(i=>{const o=Qs(i,"Header value entry",e);if(typeof o!="string")throw new Ne(`Header '${r}' value '${o}' is not a string`);return o})}),{}),Ya=(t,e)=>Object.entries(t).reduce((s,[r,n])=>H(k({},s),{[r]:tc.getEndpointProperty(n,e)}),{}),ec=(t,e)=>{if(Array.isArray(t))return t.map(s=>ec(s,e));switch(typeof t){case"string":return Za(t,e);case"object":if(t===null)throw new Ne(`Unexpected endpoint property: ${t}`);return tc.getEndpointProperties(t,e);case"boolean":return t;default:throw new Ne(`Unexpected endpoint property type: ${typeof t}`)}},tc={getEndpointProperty:ec,getEndpointProperties:Ya},Gh=(t,e)=>{const s=Qs(t,"Endpoint URL",e);if(typeof s=="string")try{return new URL(s)}catch(r){throw console.error(`Failed to construct URL with ${s}`,r),r}throw new Ne(`Endpoint URL must be a string, got ${typeof s}`)},Xh=(t,e)=>{var h,d;const{conditions:s,endpoint:r}=t,{result:n,referenceRecord:i}=In(s,e);if(!n)return;const o=H(k({},e),{referenceRecord:k(k({},e.referenceRecord),i)}),{url:a,properties:u,headers:c}=r;return(d=(h=e.logger)==null?void 0:h.debug)==null||d.call(h,`${hs} Resolving endpoint from template: ${ot(r)}`),H(k(k({},c!=null&&{headers:Kh(c,o)}),u!=null&&{properties:Ya(u,o)}),{url:Gh(a,o)})},Zh=(t,e)=>{const{conditions:s,error:r}=t,{result:n,referenceRecord:i}=In(s,e);if(n)throw new Ne(Qs(r,"Error",H(k({},e),{referenceRecord:k(k({},e.referenceRecord),i)})))},sc=(t,e)=>{for(const s of t)if(s.type==="endpoint"){const r=Xh(s,e);if(r)return r}else if(s.type==="error")Zh(s,e);else if(s.type==="tree"){const r=rc.evaluateTreeRule(s,e);if(r)return r}else throw new Ne(`Unknown endpoint rule: ${s}`);throw new Ne("Rules evaluation failed")},Qh=(t,e)=>{const{conditions:s,rules:r}=t,{result:n,referenceRecord:i}=In(s,e);if(n)return rc.evaluateRules(r,H(k({},e),{referenceRecord:k(k({},e.referenceRecord),i)}))},rc={evaluateRules:sc,evaluateTreeRule:Qh},Jh=(t,e)=>{var c,h,d,f,m;const{endpointParams:s,logger:r}=e,{parameters:n,rules:i}=t;(h=(c=e.logger)==null?void 0:c.debug)==null||h.call(c,`${hs} Initial EndpointParams: ${ot(s)}`);const o=Object.entries(n).filter(([,x])=>x.default!=null).map(([x,S])=>[x,S.default]);if(o.length>0)for(const[x,S]of o)s[x]=(d=s[x])!=null?d:S;const a=Object.entries(n).filter(([,x])=>x.required).map(([x])=>x);for(const x of a)if(s[x]==null)throw new Ne(`Missing required parameter: '${x}'`);const u=sc(i,{endpointParams:s,logger:r,referenceRecord:{}});return(m=(f=e.logger)==null?void 0:f.debug)==null||m.call(f,`${hs} Resolved endpoint: ${ot(u)}`),u},nc=(t,e=!1)=>{if(e){for(const s of t.split("."))if(!nc(s))return!1;return!0}return!(!Zs(t)||t.length<3||t.length>63||t!==t.toLowerCase()||Ga(t))},Fi=":",Yh="/",em=t=>{const e=t.split(Fi);if(e.length<6)return null;const[s,r,n,i,o,...a]=e;if(s!=="arn"||r===""||n===""||a.join(Fi)==="")return null;const u=a.map(c=>c.split(Yh)).flat();return{partition:r,service:n,region:i,accountId:o,resourceId:u}},tm=[{id:"aws",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-east-1",name:"aws",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^(us|eu|ap|sa|ca|me|af|il|mx)\\-\\w+\\-\\d+$",regions:{"af-south-1":{description:"Africa (Cape Town)"},"ap-east-1":{description:"Asia Pacific (Hong Kong)"},"ap-east-2":{description:"Asia Pacific (Taipei)"},"ap-northeast-1":{description:"Asia Pacific (Tokyo)"},"ap-northeast-2":{description:"Asia Pacific (Seoul)"},"ap-northeast-3":{description:"Asia Pacific (Osaka)"},"ap-south-1":{description:"Asia Pacific (Mumbai)"},"ap-south-2":{description:"Asia Pacific (Hyderabad)"},"ap-southeast-1":{description:"Asia Pacific (Singapore)"},"ap-southeast-2":{description:"Asia Pacific (Sydney)"},"ap-southeast-3":{description:"Asia Pacific (Jakarta)"},"ap-southeast-4":{description:"Asia Pacific (Melbourne)"},"ap-southeast-5":{description:"Asia Pacific (Malaysia)"},"ap-southeast-6":{description:"Asia Pacific (New Zealand)"},"ap-southeast-7":{description:"Asia Pacific (Thailand)"},"aws-global":{description:"aws global region"},"ca-central-1":{description:"Canada (Central)"},"ca-west-1":{description:"Canada West (Calgary)"},"eu-central-1":{description:"Europe (Frankfurt)"},"eu-central-2":{description:"Europe (Zurich)"},"eu-north-1":{description:"Europe (Stockholm)"},"eu-south-1":{description:"Europe (Milan)"},"eu-south-2":{description:"Europe (Spain)"},"eu-west-1":{description:"Europe (Ireland)"},"eu-west-2":{description:"Europe (London)"},"eu-west-3":{description:"Europe (Paris)"},"il-central-1":{description:"Israel (Tel Aviv)"},"me-central-1":{description:"Middle East (UAE)"},"me-south-1":{description:"Middle East (Bahrain)"},"mx-central-1":{description:"Mexico (Central)"},"sa-east-1":{description:"South America (Sao Paulo)"},"us-east-1":{description:"US East (N. Virginia)"},"us-east-2":{description:"US East (Ohio)"},"us-west-1":{description:"US West (N. California)"},"us-west-2":{description:"US West (Oregon)"}}},{id:"aws-cn",outputs:{dnsSuffix:"amazonaws.com.cn",dualStackDnsSuffix:"api.amazonwebservices.com.cn",implicitGlobalRegion:"cn-northwest-1",name:"aws-cn",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^cn\\-\\w+\\-\\d+$",regions:{"aws-cn-global":{description:"aws-cn global region"},"cn-north-1":{description:"China (Beijing)"},"cn-northwest-1":{description:"China (Ningxia)"}}},{id:"aws-eusc",outputs:{dnsSuffix:"amazonaws.eu",dualStackDnsSuffix:"api.amazonwebservices.eu",implicitGlobalRegion:"eusc-de-east-1",name:"aws-eusc",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^eusc\\-(de)\\-\\w+\\-\\d+$",regions:{"eusc-de-east-1":{description:"EU (Germany)"}}},{id:"aws-iso",outputs:{dnsSuffix:"c2s.ic.gov",dualStackDnsSuffix:"api.aws.ic.gov",implicitGlobalRegion:"us-iso-east-1",name:"aws-iso",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-iso\\-\\w+\\-\\d+$",regions:{"aws-iso-global":{description:"aws-iso global region"},"us-iso-east-1":{description:"US ISO East"},"us-iso-west-1":{description:"US ISO WEST"}}},{id:"aws-iso-b",outputs:{dnsSuffix:"sc2s.sgov.gov",dualStackDnsSuffix:"api.aws.scloud",implicitGlobalRegion:"us-isob-east-1",name:"aws-iso-b",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-isob\\-\\w+\\-\\d+$",regions:{"aws-iso-b-global":{description:"aws-iso-b global region"},"us-isob-east-1":{description:"US ISOB East (Ohio)"},"us-isob-west-1":{description:"US ISOB West"}}},{id:"aws-iso-e",outputs:{dnsSuffix:"cloud.adc-e.uk",dualStackDnsSuffix:"api.cloud-aws.adc-e.uk",implicitGlobalRegion:"eu-isoe-west-1",name:"aws-iso-e",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^eu\\-isoe\\-\\w+\\-\\d+$",regions:{"aws-iso-e-global":{description:"aws-iso-e global region"},"eu-isoe-west-1":{description:"EU ISOE West"}}},{id:"aws-iso-f",outputs:{dnsSuffix:"csp.hci.ic.gov",dualStackDnsSuffix:"api.aws.hci.ic.gov",implicitGlobalRegion:"us-isof-south-1",name:"aws-iso-f",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-isof\\-\\w+\\-\\d+$",regions:{"aws-iso-f-global":{description:"aws-iso-f global region"},"us-isof-east-1":{description:"US ISOF EAST"},"us-isof-south-1":{description:"US ISOF SOUTH"}}},{id:"aws-us-gov",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-gov-west-1",name:"aws-us-gov",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-gov\\-\\w+\\-\\d+$",regions:{"aws-us-gov-global":{description:"aws-us-gov global region"},"us-gov-east-1":{description:"AWS GovCloud (US-East)"},"us-gov-west-1":{description:"AWS GovCloud (US-West)"}}}],sm={partitions:tm};let rm=sm;const nm=t=>{const{partitions:e}=rm;for(const r of e){const{regions:n,outputs:i}=r;for(const[o,a]of Object.entries(n))if(o===t)return k(k({},i),a)}for(const r of e){const{regionRegex:n,outputs:i}=r;if(new RegExp(n).test(t))return k({},i)}const s=e.find(r=>r.id==="aws");if(!s)throw new Error("Provided region was not found in the partition array or regex, and default partition with id 'aws' doesn't exist.");return k({},s.outputs)},ic={isVirtualHostableS3Bucket:nc,parseArn:em,partition:nm};Ns.aws=ic;function im(t){const e={};if(t=t.replace(/^\?/,""),t)for(const s of t.split("&")){let[r,n=null]=s.split("=");r=decodeURIComponent(r),n&&(n=decodeURIComponent(n)),r in e?Array.isArray(e[r])?e[r].push(n):e[r]=[e[r],n]:e[r]=n}return e}const Us=t=>{if(typeof t=="string")return Us(new URL(t));const{hostname:e,pathname:s,port:r,protocol:n,search:i}=t;let o;return i&&(o=im(i)),{hostname:e,port:r?parseInt(r):void 0,protocol:n,path:s,query:o}},om=/\d{12}\.ddb/;function am(t,e,s){return C(this,null,function*(){var i,o,a,u,c,h,d,f;const r=s.request;if(((i=r==null?void 0:r.headers)==null?void 0:i["smithy-protocol"])==="rpc-v2-cbor"&&ae(t,"PROTOCOL_RPC_V2_CBOR","M"),typeof e.retryStrategy=="function"){const m=yield e.retryStrategy();typeof m.acquireInitialRetryToken=="function"?(a=(o=m.constructor)==null?void 0:o.name)!=null&&a.includes("Adaptive")?ae(t,"RETRY_MODE_ADAPTIVE","F"):ae(t,"RETRY_MODE_STANDARD","E"):ae(t,"RETRY_MODE_LEGACY","D")}if(typeof e.accountIdEndpointMode=="function"){const m=t.endpointV2;switch(String((u=m==null?void 0:m.url)==null?void 0:u.hostname).match(om)&&ae(t,"ACCOUNT_ID_ENDPOINT","O"),yield(c=e.accountIdEndpointMode)==null?void 0:c.call(e)){case"disabled":ae(t,"ACCOUNT_ID_MODE_DISABLED","Q");break;case"preferred":ae(t,"ACCOUNT_ID_MODE_PREFERRED","P");break;case"required":ae(t,"ACCOUNT_ID_MODE_REQUIRED","R");break}}const n=(d=(h=t.__smithy_context)==null?void 0:h.selectedHttpAuthScheme)==null?void 0:d.identity;if(n!=null&&n.$source){const m=n;m.accountId&&ae(t,"RESOLVED_ACCOUNT_ID","T");for(const[x,S]of Object.entries((f=m.$source)!=null?f:{}))ae(t,x,S)}})}const Li="user-agent",Cr="x-amz-user-agent",Hi=" ",Ar="/",cm=/[^!$%&'*+\-.^_`|~\w]/g,um=/[^!$%&'*+\-.^_`|~\w#]/g,zi="-",dm=1024;function lm(t){let e="";for(const s in t){const r=t[s];if(e.length+r.length+1<=dm){e.length?e+=","+r:e+=r;continue}break}return e}const fm=t=>(e,s)=>r=>C(null,null,function*(){var m,x,S,y;const{request:n}=r;if(!le.isInstance(n))return e(r);const{headers:i}=n,o=((m=s==null?void 0:s.userAgent)==null?void 0:m.map(Rs))||[],a=(yield t.defaultUserAgentProvider()).map(Rs);yield am(s,t,r);const u=s;a.push(`m/${lm(Object.assign({},(x=s.__smithy_context)==null?void 0:x.features,(S=u.__aws_sdk_context)==null?void 0:S.features))}`);const c=((y=t==null?void 0:t.customUserAgent)==null?void 0:y.map(Rs))||[],h=yield t.userAgentAppId();h&&a.push(Rs(["app",`${h}`]));const d=[].concat([...a,...o,...c]).join(Hi),f=[...a.filter(v=>v.startsWith("aws-sdk-")),...c].join(Hi);return t.runtime!=="browser"?(f&&(i[Cr]=i[Cr]?`${i[Li]} ${f}`:f),i[Li]=d):i[Cr]=d,e(H(k({},r),{request:n}))}),Rs=t=>{var o;const e=t[0].split(Ar).map(a=>a.replace(cm,zi)).join(Ar),s=(o=t[1])==null?void 0:o.replace(um,zi),r=e.indexOf(Ar),n=e.substring(0,r);let i=e.substring(r+1);return n==="api"&&(i=i.toLowerCase()),[n,i,s].filter(a=>a&&a.length>0).reduce((a,u,c)=>{switch(c){case 0:return u;case 1:return`${a}/${u}`;default:return`${a}#${u}`}},"")},hm={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0},mm=t=>({applyToStack:e=>{e.add(fm(t),hm)}}),pm=!1,gm=!1,ji=new Set,ym=(t,e=Zs)=>{if(!ji.has(t)&&!e(t))if(t==="*")console.warn('@smithy/config-resolver WARN - Please use the caller region instead of "*". See "sigv4a" in https://github.com/aws/aws-sdk-js-v3/blob/main/supplemental-docs/CLIENTS.md.');else throw new Error(`Region not accepted: region="${t}" is not a valid hostname component.`);else ji.add(t)},oc=t=>typeof t=="string"&&(t.startsWith("fips-")||t.endsWith("-fips")),Sm=t=>oc(t)?["fips-aws-global","aws-fips"].includes(t)?"us-east-1":t.replace(/fips-(dkr-|prod-)?|-fips/,""):t,xm=t=>{const{region:e,useFipsEndpoint:s}=t;if(!e)throw new Error("Region is missing");return Object.assign(t,{region:()=>C(null,null,function*(){const r=typeof e=="function"?yield e():e,n=Sm(r);return ym(n),n}),useFipsEndpoint:()=>C(null,null,function*(){const r=typeof e=="string"?e:yield e();return oc(r)?!0:typeof s!="function"?Promise.resolve(!!s):s()})})},bm=t=>Object.assign(t,{eventStreamMarshaller:t.eventStreamSerdeProvider(t)}),qi="content-length";function wm(t){return e=>s=>C(null,null,function*(){const r=s.request;if(le.isInstance(r)){const{body:n,headers:i}=r;if(n&&Object.keys(i).map(o=>o.toLowerCase()).indexOf(qi)===-1)try{const o=t(n);r.headers=H(k({},r.headers),{[qi]:String(o)})}catch(o){}}return e(H(k({},s),{request:r}))})}const Em={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0},Cm=t=>({applyToStack:e=>{e.add(wm(t.bodyLengthChecker),Em)}}),Am=t=>C(null,null,function*(){const e=(t==null?void 0:t.Bucket)||"";if(typeof t.Bucket=="string"&&(t.Bucket=e.replace(/#/g,encodeURIComponent("#")).replace(/\?/g,encodeURIComponent("?"))),Tm(e)){if(t.ForcePathStyle===!0)throw new Error("Path-style addressing cannot be used with ARN buckets")}else(!km(e)||e.indexOf(".")!==-1&&!String(t.Endpoint).startsWith("http:")||e.toLowerCase()!==e||e.length<3)&&(t.ForcePathStyle=!0);return t.DisableMultiRegionAccessPoints&&(t.disableMultiRegionAccessPoints=!0,t.DisableMRAP=!0),t}),Rm=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,vm=/(\d+\.){3}\d+/,Dm=/\.\./,km=t=>Rm.test(t)&&!vm.test(t)&&!Dm.test(t),Tm=t=>{const[e,s,r,,,n]=t.split(":"),i=e==="arn"&&t.split(":").length>=6,o=!!(i&&s&&r&&n);if(i&&!o)throw new Error(`Invalid ARN: ${t} was an invalid ARN.`);return o},Bm=(t,e,s,r=!1)=>{const n=()=>C(null,null,function*(){var o,a;let i;if(r){const u=s.clientContextParams,c=u==null?void 0:u[t];i=(o=c!=null?c:s[t])!=null?o:s[e]}else i=(a=s[t])!=null?a:s[e];return typeof i=="function"?i():i});return t==="credentialScope"||e==="CredentialScope"?()=>C(null,null,function*(){var a;const i=typeof s.credentials=="function"?yield s.credentials():s.credentials;return(a=i==null?void 0:i.credentialScope)!=null?a:i==null?void 0:i.CredentialScope}):t==="accountId"||e==="AccountId"?()=>C(null,null,function*(){var a;const i=typeof s.credentials=="function"?yield s.credentials():s.credentials;return(a=i==null?void 0:i.accountId)!=null?a:i==null?void 0:i.AccountId}):t==="endpoint"||e==="endpoint"?()=>C(null,null,function*(){if(s.isCustomEndpoint===!1)return;const i=yield n();if(i&&typeof i=="object"){if("url"in i)return i.url.href;if("hostname"in i){const{protocol:o,hostname:a,port:u,path:c}=i;return`${o}//${a}${u?":"+u:""}${c}`}}return i}):n},ac=t=>C(null,null,function*(){}),cc=t=>typeof t=="object"?"url"in t?Us(t.url):t:Us(t),_m=(t,e,s,r)=>C(null,null,function*(){if(!s.isCustomEndpoint){let o;s.serviceConfiguredEndpoint?o=yield s.serviceConfiguredEndpoint():o=yield ac(s.serviceId),o&&(s.endpoint=()=>Promise.resolve(cc(o)),s.isCustomEndpoint=!0)}const n=yield uc(t,e,s);if(typeof s.endpointProvider!="function")throw new Error("config.endpointProvider is not set.");return s.endpointProvider(n,r)}),uc=(t,e,s)=>C(null,null,function*(){var i;const r={},n=((i=e==null?void 0:e.getEndpointParameterInstructions)==null?void 0:i.call(e))||{};for(const[o,a]of Object.entries(n))switch(a.type){case"staticContextParams":r[o]=a.value;break;case"contextParams":r[o]=t[a.name];break;case"clientContextParams":case"builtInParams":r[o]=yield Bm(a.name,o,s,a.type!=="builtInParams")();break;case"operationContextParams":r[o]=a.get(t);break;default:throw new Error("Unrecognized endpoint parameter instruction: "+JSON.stringify(a))}return Object.keys(n).length===0&&Object.assign(r,s),String(s.serviceId).toLowerCase()==="s3"&&(yield Am(r)),r}),Im=({config:t,instructions:e})=>(s,r)=>n=>C(null,null,function*(){var a,u,c;t.isCustomEndpoint&&fl(r,"ENDPOINT_OVERRIDE","N");const i=yield _m(n.input,{getEndpointParameterInstructions(){return e}},k({},t),r);r.endpointV2=i,r.authSchemes=(a=i.properties)==null?void 0:a.authSchemes;const o=(u=r.authSchemes)==null?void 0:u[0];if(o){r.signing_region=o.signingRegion,r.signing_service=o.signingName;const h=at(r),d=(c=h==null?void 0:h.selectedHttpAuthScheme)==null?void 0:c.httpAuthOption;d&&(d.signingProperties=Object.assign(d.signingProperties||{},{signing_region:o.signingRegion,signingRegion:o.signingRegion,signing_service:o.signingName,signingName:o.signingName,signingRegionSet:o.signingRegionSet},o.properties))}return s(k({},n))}),Om={step:"serialize",tags:["ENDPOINT_PARAMETERS","ENDPOINT_V2","ENDPOINT"],name:"endpointV2Middleware",override:!0,relation:"before",toMiddleware:gd.name},St=(t,e)=>({applyToStack:s=>{s.addRelativeTo(Im({config:t,instructions:e}),Om)}}),Pm=t=>{var c;const e=(c=t.tls)!=null?c:!0,{endpoint:s,useDualstackEndpoint:r,useFipsEndpoint:n}=t,i=s!=null?()=>C(null,null,function*(){return cc(yield ze(s)())}):void 0,a=Object.assign(t,{endpoint:i,tls:e,isCustomEndpoint:!!s,useDualstackEndpoint:ze(r!=null?r:!1),useFipsEndpoint:ze(n!=null?n:!1)});let u;return a.serviceConfiguredEndpoint=()=>C(null,null,function*(){return t.serviceId&&!u&&(u=ac(t.serviceId)),u}),a};var Ut;(function(t){t.STANDARD="standard",t.ADAPTIVE="adaptive"})(Ut||(Ut={}));const $s=3,Mm=Ut.STANDARD,Nm=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],Um=["TimeoutError","RequestTimeout","RequestTimeoutException"],$m=[500,502,503,504],Fm=["ECONNRESET","ECONNREFUSED","EPIPE","ETIMEDOUT"],Lm=["EHOSTUNREACH","ENETUNREACH","ENOTFOUND"],Hm=t=>(t==null?void 0:t.$retryable)!==void 0,zm=t=>{var e;return(e=t.$metadata)==null?void 0:e.clockSkewCorrected},jm=t=>{const e=new Set(["Failed to fetch","NetworkError when attempting to fetch resource","The Internet connection appears to be offline","Load failed","Network request failed"]);return t&&t instanceof TypeError?e.has(t.message):!1},dc=t=>{var e,s;return((e=t.$metadata)==null?void 0:e.httpStatusCode)===429||Nm.includes(t.name)||((s=t.$retryable)==null?void 0:s.throttling)==!0},On=(t,e=0)=>{var s;return Hm(t)||zm(t)||Um.includes(t.name)||Fm.includes((t==null?void 0:t.code)||"")||Lm.includes((t==null?void 0:t.code)||"")||$m.includes(((s=t.$metadata)==null?void 0:s.httpStatusCode)||0)||jm(t)||t.cause!==void 0&&e<=10&&On(t.cause,e+1)},qm=t=>{var e;if(((e=t.$metadata)==null?void 0:e.httpStatusCode)!==void 0){const s=t.$metadata.httpStatusCode;return 500<=s&&s<=599&&!On(t)}return!1},Ks=class Ks{constructor(e){g(this,"beta");g(this,"minCapacity");g(this,"minFillRate");g(this,"scaleConstant");g(this,"smooth");g(this,"currentCapacity",0);g(this,"enabled",!1);g(this,"lastMaxRate",0);g(this,"measuredTxRate",0);g(this,"requestCount",0);g(this,"fillRate");g(this,"lastThrottleTime");g(this,"lastTimestamp",0);g(this,"lastTxRateBucket");g(this,"maxCapacity");g(this,"timeWindow",0);var r,n,i,o,a;this.beta=(r=e==null?void 0:e.beta)!=null?r:.7,this.minCapacity=(n=e==null?void 0:e.minCapacity)!=null?n:1,this.minFillRate=(i=e==null?void 0:e.minFillRate)!=null?i:.5,this.scaleConstant=(o=e==null?void 0:e.scaleConstant)!=null?o:.4,this.smooth=(a=e==null?void 0:e.smooth)!=null?a:.8;const s=this.getCurrentTimeInSeconds();this.lastThrottleTime=s,this.lastTxRateBucket=Math.floor(this.getCurrentTimeInSeconds()),this.fillRate=this.minFillRate,this.maxCapacity=this.minCapacity}getCurrentTimeInSeconds(){return Date.now()/1e3}getSendToken(){return C(this,null,function*(){return this.acquireTokenBucket(1)})}acquireTokenBucket(e){return C(this,null,function*(){if(this.enabled){if(this.refillTokenBucket(),e>this.currentCapacity){const s=(e-this.currentCapacity)/this.fillRate*1e3;yield new Promise(r=>Ks.setTimeoutFn(r,s))}this.currentCapacity=this.currentCapacity-e}})}refillTokenBucket(){const e=this.getCurrentTimeInSeconds();if(!this.lastTimestamp){this.lastTimestamp=e;return}const s=(e-this.lastTimestamp)*this.fillRate;this.currentCapacity=Math.min(this.maxCapacity,this.currentCapacity+s),this.lastTimestamp=e}updateClientSendingRate(e){let s;if(this.updateMeasuredRate(),dc(e)){const n=this.enabled?Math.min(this.measuredTxRate,this.fillRate):this.measuredTxRate;this.lastMaxRate=n,this.calculateTimeWindow(),this.lastThrottleTime=this.getCurrentTimeInSeconds(),s=this.cubicThrottle(n),this.enableTokenBucket()}else this.calculateTimeWindow(),s=this.cubicSuccess(this.getCurrentTimeInSeconds());const r=Math.min(s,2*this.measuredTxRate);this.updateTokenBucketRate(r)}calculateTimeWindow(){this.timeWindow=this.getPrecise(Math.pow(this.lastMaxRate*(1-this.beta)/this.scaleConstant,1/3))}cubicThrottle(e){return this.getPrecise(e*this.beta)}cubicSuccess(e){return this.getPrecise(this.scaleConstant*Math.pow(e-this.lastThrottleTime-this.timeWindow,3)+this.lastMaxRate)}enableTokenBucket(){this.enabled=!0}updateTokenBucketRate(e){this.refillTokenBucket(),this.fillRate=Math.max(e,this.minFillRate),this.maxCapacity=Math.max(e,this.minCapacity),this.currentCapacity=Math.min(this.currentCapacity,this.maxCapacity)}updateMeasuredRate(){const e=this.getCurrentTimeInSeconds(),s=Math.floor(e*2)/2;if(this.requestCount++,s>this.lastTxRateBucket){const r=this.requestCount/(s-this.lastTxRateBucket);this.measuredTxRate=this.getPrecise(r*this.smooth+this.measuredTxRate*(1-this.smooth)),this.requestCount=0,this.lastTxRateBucket=s}}getPrecise(e){return parseFloat(e.toFixed(8))}};g(Ks,"setTimeoutFn",setTimeout);let pn=Ks;const gn=100,lc=20*1e3,Vm=500,Vi=500,Wm=5,Km=10,Gm=1,Xm="amz-sdk-invocation-id",Zm="amz-sdk-request",Qm=()=>{let t=gn;return{computeNextBackoffDelay:r=>Math.floor(Math.min(lc,Math.random()*pi(2,r)*t)),setDelayBase:r=>{t=r}}},Wi=({retryDelay:t,retryCount:e,retryCost:s})=>({getRetryCount:()=>e,getRetryDelay:()=>Math.min(lc,t),getRetryCost:()=>s});class fc{constructor(e){g(this,"maxAttempts");g(this,"mode",Ut.STANDARD);g(this,"capacity",Vi);g(this,"retryBackoffStrategy",Qm());g(this,"maxAttemptsProvider");this.maxAttempts=e,this.maxAttemptsProvider=typeof e=="function"?e:()=>C(this,null,function*(){return e})}acquireInitialRetryToken(e){return C(this,null,function*(){return Wi({retryDelay:gn,retryCount:0})})}refreshRetryTokenForRetry(e,s){return C(this,null,function*(){const r=yield this.getMaxAttempts();if(this.shouldRetry(e,s,r)){const n=s.errorType;this.retryBackoffStrategy.setDelayBase(n==="THROTTLING"?Vm:gn);const i=this.retryBackoffStrategy.computeNextBackoffDelay(e.getRetryCount()),o=s.retryAfterHint?Math.max(s.retryAfterHint.getTime()-Date.now()||0,i):i,a=this.getCapacityCost(n);return this.capacity-=a,Wi({retryDelay:o,retryCount:e.getRetryCount()+1,retryCost:a})}throw new Error("No retry token available")})}recordSuccess(e){var s;this.capacity=Math.max(Vi,this.capacity+((s=e.getRetryCost())!=null?s:Gm))}getCapacity(){return this.capacity}getMaxAttempts(){return C(this,null,function*(){try{return yield this.maxAttemptsProvider()}catch(e){return console.warn(`Max attempts provider could not resolve. Using default of ${$s}`),$s}})}shouldRetry(e,s,r){return e.getRetryCount()+1<r&&this.capacity>=this.getCapacityCost(s.errorType)&&this.isRetryableError(s.errorType)}getCapacityCost(e){return e==="TRANSIENT"?Km:Wm}isRetryableError(e){return e==="THROTTLING"||e==="TRANSIENT"}}class Jm{constructor(e,s){g(this,"maxAttemptsProvider");g(this,"rateLimiter");g(this,"standardRetryStrategy");g(this,"mode",Ut.ADAPTIVE);this.maxAttemptsProvider=e;const{rateLimiter:r}=s!=null?s:{};this.rateLimiter=r!=null?r:new pn,this.standardRetryStrategy=new fc(e)}acquireInitialRetryToken(e){return C(this,null,function*(){return yield this.rateLimiter.getSendToken(),this.standardRetryStrategy.acquireInitialRetryToken(e)})}refreshRetryTokenForRetry(e,s){return C(this,null,function*(){return this.rateLimiter.updateClientSendingRate(s),this.standardRetryStrategy.refreshRetryTokenForRetry(e,s)})}recordSuccess(e){this.rateLimiter.updateClientSendingRate({}),this.standardRetryStrategy.recordSuccess(e)}}const Ym=t=>t instanceof Error?t:t instanceof Object?Object.assign(new Error,t):typeof t=="string"?new Error(t):new Error(`AWS SDK error wrapper for ${t}`),ep=t=>{const{retryStrategy:e,retryMode:s,maxAttempts:r}=t,n=ze(r!=null?r:$s);return Object.assign(t,{maxAttempts:n,retryStrategy:()=>C(null,null,function*(){return e||((yield ze(s)())===Ut.ADAPTIVE?new Jm(n):new fc(n))})})},tp=t=>(t==null?void 0:t.body)instanceof ReadableStream,sp=t=>(e,s)=>r=>C(null,null,function*(){var o;let n=yield t.retryStrategy();const i=yield t.maxAttempts();if(rp(n)){n=n;let a=yield n.acquireInitialRetryToken(s.partition_id),u=new Error,c=0,h=0;const{request:d}=r,f=le.isInstance(d);for(f&&(d.headers[Xm]=En());;)try{f&&(d.headers[Zm]=`attempt=${c+1}; max=${i}`);const{response:m,output:x}=yield e(r);return n.recordSuccess(a),x.$metadata.attempts=c+1,x.$metadata.totalRetryDelay=h,{response:m,output:x}}catch(m){const x=np(m);if(u=Ym(m),f&&tp(d))throw(o=s.logger instanceof Dn?console:s.logger)==null||o.warn("An error was encountered in a non-retryable streaming request."),u;try{a=yield n.refreshRetryTokenForRetry(a,x)}catch(y){throw u.$metadata||(u.$metadata={}),u.$metadata.attempts=c+1,u.$metadata.totalRetryDelay=h,u}c=a.getRetryCount();const S=a.getRetryDelay();h+=S,yield new Promise(y=>setTimeout(y,S))}}else return n=n,n!=null&&n.mode&&(s.userAgent=[...s.userAgent||[],["cfg/retry-mode",n.mode]]),n.retry(e,r)}),rp=t=>typeof t.acquireInitialRetryToken!="undefined"&&typeof t.refreshRetryTokenForRetry!="undefined"&&typeof t.recordSuccess!="undefined",np=t=>{const e={error:t,errorType:ip(t)},s=cp(t.$response);return s&&(e.retryAfterHint=s),e},ip=t=>dc(t)?"THROTTLING":On(t)?"TRANSIENT":qm(t)?"SERVER_ERROR":"CLIENT_ERROR",op={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0},ap=t=>({applyToStack:e=>{e.add(sp(t),op)}}),cp=t=>{if(!pt.isInstance(t))return;const e=Object.keys(t.headers).find(i=>i.toLowerCase()==="retry-after");if(!e)return;const s=t.headers[e],r=Number(s);return Number.isNaN(r)?new Date(s):new Date(r*1e3)};class hc{constructor(e){g(this,"sigv4aSigner");g(this,"sigv4Signer");g(this,"signerOptions");this.sigv4Signer=new uh(e),this.signerOptions=e}static sigv4aDependency(){return"none"}sign(r){return C(this,arguments,function*(e,s={}){return s.signingRegion==="*"?this.getSigv4aSigner().sign(e,s):this.sigv4Signer.sign(e,s)})}signWithCredentials(n,i){return C(this,arguments,function*(e,s,r={}){if(r.signingRegion==="*")throw this.getSigv4aSigner(),new Error(`signWithCredentials with signingRegion '*' is only supported when using the CRT dependency @aws-sdk/signature-v4-crt. Please check whether you have installed the "@aws-sdk/signature-v4-crt" package explicitly. You must also register the package by calling [require("@aws-sdk/signature-v4-crt");] or an ESM equivalent such as [import "@aws-sdk/signature-v4-crt";]. For more information please go to https://github.com/aws/aws-sdk-js-v3#functionality-requiring-aws-common-runtime-crt`);return this.sigv4Signer.signWithCredentials(e,s,r)})}presign(r){return C(this,arguments,function*(e,s={}){if(s.signingRegion==="*")throw this.getSigv4aSigner(),new Error(`presign with signingRegion '*' is only supported when using the CRT dependency @aws-sdk/signature-v4-crt. Please check whether you have installed the "@aws-sdk/signature-v4-crt" package explicitly. You must also register the package by calling [require("@aws-sdk/signature-v4-crt");] or an ESM equivalent such as [import "@aws-sdk/signature-v4-crt";]. For more information please go to https://github.com/aws/aws-sdk-js-v3#functionality-requiring-aws-common-runtime-crt`);return this.sigv4Signer.presign(e,s)})}presignWithCredentials(n,i){return C(this,arguments,function*(e,s,r={}){if(r.signingRegion==="*")throw new Error("Method presignWithCredentials is not supported for [signingRegion=*].");return this.sigv4Signer.presignWithCredentials(e,s,r)})}getSigv4aSigner(){if(!this.sigv4aSigner)throw this.signerOptions.runtime==="node"?new Error("Neither CRT nor JS SigV4a implementation is available. Please load either @aws-sdk/signature-v4-crt or @aws-sdk/signature-v4a. For more information please go to https://github.com/aws/aws-sdk-js-v3#functionality-requiring-aws-common-runtime-crt"):new Error("JS SigV4a implementation is not available or not a valid constructor. Please check whether you have installed the @aws-sdk/signature-v4a package explicitly. The CRT implementation is not available for browsers. You must also register the package by calling [require('@aws-sdk/signature-v4a');] or an ESM equivalent such as [import '@aws-sdk/signature-v4a';]. For more information please go to https://github.com/aws/aws-sdk-js-v3#using-javascript-non-crt-implementation-of-sigv4a");return this.sigv4aSigner}}const Pn="required",l="type",A="rules",p="conditions",b="fn",w="argv",N="ref",L="assign",B="url",_="properties",Xe="backend",ye="authSchemes",ce="disableDoubleEncoding",ue="signingName",xe="signingRegion",I="headers",Mn="signingRegionSet",up=6,dp=!1,je=!0,Me="isSet",ne="booleanEquals",P="error",Fs="aws.partition",K="stringEquals",Y="getAttr",ee="name",Z="substring",Ki="bucketSuffix",Nn="parseURL",D="endpoint",R="tree",Ls="aws.isVirtualHostableS3Bucket",Hs="{url#scheme}://{Bucket}.{url#authority}{url#path}",Ke="not",Gi="accessPointSuffix",Bs="{url#scheme}://{url#authority}{url#path}",mc="hardwareType",pc="regionPrefix",Xi="bucketAliasSuffix",yn="outpostId",xt="isValidHostLabel",Un="sigv4a",ms="s3-outposts",$t="s3",gc="{url#scheme}://{url#authority}{url#normalizedPath}{Bucket}",yc="https://{Bucket}.s3-accelerate.{partitionResult#dnsSuffix}",Zi="https://{Bucket}.s3.{partitionResult#dnsSuffix}",Sc="aws.parseArn",xc="bucketArn",bc="arnType",zs="",$n="s3-object-lambda",wc="accesspoint",Fn="accessPointName",Qi="{url#scheme}://{accessPointName}-{bucketArn#accountId}.{url#authority}{url#path}",Ji="mrapPartition",Yi="outpostType",eo="arnPrefix",Ec="{url#scheme}://{url#authority}{url#normalizedPath}{uri_encoded_bucket}",to="https://s3.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",so="https://s3.{partitionResult#dnsSuffix}",Dt={[Pn]:!1,[l]:"string"},kt={[Pn]:!0,default:!1,[l]:"boolean"},es={[Pn]:!1,[l]:"boolean"},Fe={[b]:ne,[w]:[{[N]:"Accelerate"},!0]},J={[b]:ne,[w]:[{[N]:"UseFIPS"},!0]},X={[b]:ne,[w]:[{[N]:"UseDualStack"},!0]},re={[b]:Me,[w]:[{[N]:"Endpoint"}]},Cc={[b]:Fs,[w]:[{[N]:"Region"}],[L]:"partitionResult"},ro={[b]:K,[w]:[{[b]:Y,[w]:[{[N]:"partitionResult"},ee]},"aws-cn"]},os={[b]:Me,[w]:[{[N]:"Bucket"}]},V={[N]:"Bucket"},no={[p]:[Fe],[P]:"S3Express does not support S3 Accelerate.",[l]:P},io={[p]:[re,{[b]:Nn,[w]:[{[N]:"Endpoint"}],[L]:"url"}],[A]:[{[p]:[{[b]:Me,[w]:[{[N]:"DisableS3ExpressSessionAuth"}]},{[b]:ne,[w]:[{[N]:"DisableS3ExpressSessionAuth"},!0]}],[A]:[{[p]:[{[b]:ne,[w]:[{[b]:Y,[w]:[{[N]:"url"},"isIp"]},!0]}],[A]:[{[p]:[{[b]:"uriEncode",[w]:[V],[L]:"uri_encoded_bucket"}],[A]:[{[D]:{[B]:"{url#scheme}://{url#authority}/{uri_encoded_bucket}{url#path}",[_]:{[Xe]:"S3Express",[ye]:[{[ce]:!0,[ee]:"sigv4",[ue]:"s3express",[xe]:"{Region}"}]},[I]:{}},[l]:D}],[l]:R}],[l]:R},{[p]:[{[b]:Ls,[w]:[V,!1]}],[A]:[{[D]:{[B]:Hs,[_]:{[Xe]:"S3Express",[ye]:[{[ce]:!0,[ee]:"sigv4",[ue]:"s3express",[xe]:"{Region}"}]},[I]:{}},[l]:D}],[l]:R},{[P]:"S3Express bucket name is not a valid virtual hostable name.",[l]:P}],[l]:R},{[p]:[{[b]:ne,[w]:[{[b]:Y,[w]:[{[N]:"url"},"isIp"]},!0]}],[A]:[{[p]:[{[b]:"uriEncode",[w]:[V],[L]:"uri_encoded_bucket"}],[A]:[{[D]:{[B]:"{url#scheme}://{url#authority}/{uri_encoded_bucket}{url#path}",[_]:{[Xe]:"S3Express",[ye]:[{[ce]:!0,[ee]:"sigv4-s3express",[ue]:"s3express",[xe]:"{Region}"}]},[I]:{}},[l]:D}],[l]:R}],[l]:R},{[p]:[{[b]:Ls,[w]:[V,!1]}],[A]:[{[D]:{[B]:Hs,[_]:{[Xe]:"S3Express",[ye]:[{[ce]:!0,[ee]:"sigv4-s3express",[ue]:"s3express",[xe]:"{Region}"}]},[I]:{}},[l]:D}],[l]:R},{[P]:"S3Express bucket name is not a valid virtual hostable name.",[l]:P}],[l]:R},ve={[b]:Nn,[w]:[{[N]:"Endpoint"}],[L]:"url"},Rr={[b]:ne,[w]:[{[b]:Y,[w]:[{[N]:"url"},"isIp"]},!0]},Ac={[N]:"url"},Rc={[b]:"uriEncode",[w]:[V],[L]:"uri_encoded_bucket"},Pe={[Xe]:"S3Express",[ye]:[{[ce]:!0,[ee]:"sigv4",[ue]:"s3express",[xe]:"{Region}"}]},$={},vc={[b]:Ls,[w]:[V,!1]},oo={[P]:"S3Express bucket name is not a valid virtual hostable name.",[l]:P},ao={[b]:Me,[w]:[{[N]:"UseS3ExpressControlEndpoint"}]},co={[b]:ne,[w]:[{[N]:"UseS3ExpressControlEndpoint"},!0]},F={[b]:Ke,[w]:[re]},j={[b]:ne,[w]:[{[N]:"UseDualStack"},!1]},z={[b]:ne,[w]:[{[N]:"UseFIPS"},!1]},vs={[P]:"Unrecognized S3Express bucket name format.",[l]:P},uo={[b]:Ke,[w]:[os]},lo={[N]:mc},fo={[p]:[F],[P]:"Expected a endpoint to be specified but no endpoint was found",[l]:P},Ds={[ye]:[{[ce]:!0,[ee]:Un,[ue]:ms,[Mn]:["*"]},{[ce]:!0,[ee]:"sigv4",[ue]:ms,[xe]:"{Region}"}]},vr={[b]:ne,[w]:[{[N]:"ForcePathStyle"},!1]},lp={[N]:"ForcePathStyle"},oe={[b]:ne,[w]:[{[N]:"Accelerate"},!1]},he={[b]:K,[w]:[{[N]:"Region"},"aws-global"]},me={[ye]:[{[ce]:!0,[ee]:"sigv4",[ue]:$t,[xe]:"us-east-1"}]},q={[b]:Ke,[w]:[he]},pe={[b]:ne,[w]:[{[N]:"UseGlobalEndpoint"},!0]},ho={[B]:"https://{Bucket}.s3-fips.dualstack.{Region}.{partitionResult#dnsSuffix}",[_]:{[ye]:[{[ce]:!0,[ee]:"sigv4",[ue]:$t,[xe]:"{Region}"}]},[I]:{}},de={[ye]:[{[ce]:!0,[ee]:"sigv4",[ue]:$t,[xe]:"{Region}"}]},ge={[b]:ne,[w]:[{[N]:"UseGlobalEndpoint"},!1]},mo={[B]:"https://{Bucket}.s3-fips.{Region}.{partitionResult#dnsSuffix}",[_]:de,[I]:{}},po={[B]:"https://{Bucket}.s3-accelerate.dualstack.{partitionResult#dnsSuffix}",[_]:de,[I]:{}},go={[B]:"https://{Bucket}.s3.dualstack.{Region}.{partitionResult#dnsSuffix}",[_]:de,[I]:{}},Dr={[b]:ne,[w]:[{[b]:Y,[w]:[Ac,"isIp"]},!1]},kr={[B]:gc,[_]:de,[I]:{}},Sn={[B]:Hs,[_]:de,[I]:{}},yo={[D]:Sn,[l]:D},Tr={[B]:yc,[_]:de,[I]:{}},So={[B]:"https://{Bucket}.s3.{Region}.{partitionResult#dnsSuffix}",[_]:de,[I]:{}},ks={[P]:"Invalid region: region was not a valid DNS name.",[l]:P},Te={[N]:xc},Dc={[N]:bc},Br={[b]:Y,[w]:[Te,"service"]},Ln={[N]:Fn},xo={[p]:[X],[P]:"S3 Object Lambda does not support Dual-stack",[l]:P},bo={[p]:[Fe],[P]:"S3 Object Lambda does not support S3 Accelerate",[l]:P},wo={[p]:[{[b]:Me,[w]:[{[N]:"DisableAccessPoints"}]},{[b]:ne,[w]:[{[N]:"DisableAccessPoints"},!0]}],[P]:"Access points are not supported for this operation",[l]:P},_r={[p]:[{[b]:Me,[w]:[{[N]:"UseArnRegion"}]},{[b]:ne,[w]:[{[N]:"UseArnRegion"},!1]},{[b]:Ke,[w]:[{[b]:K,[w]:[{[b]:Y,[w]:[Te,"region"]},"{Region}"]}]}],[P]:"Invalid configuration: region from ARN `{bucketArn#region}` does not match client region `{Region}` and UseArnRegion is `false`",[l]:P},kc={[b]:Y,[w]:[{[N]:"bucketPartition"},ee]},Tc={[b]:Y,[w]:[Te,"accountId"]},Ir={[ye]:[{[ce]:!0,[ee]:"sigv4",[ue]:$n,[xe]:"{bucketArn#region}"}]},Eo={[P]:"Invalid ARN: The access point name may only contain a-z, A-Z, 0-9 and `-`. Found: `{accessPointName}`",[l]:P},Or={[P]:"Invalid ARN: The account id may only contain a-z, A-Z, 0-9 and `-`. Found: `{bucketArn#accountId}`",[l]:P},Pr={[P]:"Invalid region in ARN: `{bucketArn#region}` (invalid DNS name)",[l]:P},Mr={[P]:"Client was configured for partition `{partitionResult#name}` but ARN (`{Bucket}`) has `{bucketPartition#name}`",[l]:P},Co={[P]:"Invalid ARN: The ARN may only contain a single resource component after `accesspoint`.",[l]:P},Ao={[P]:"Invalid ARN: Expected a resource of the format `accesspoint:<accesspoint name>` but no name was provided",[l]:P},ts={[ye]:[{[ce]:!0,[ee]:"sigv4",[ue]:$t,[xe]:"{bucketArn#region}"}]},Ro={[ye]:[{[ce]:!0,[ee]:Un,[ue]:ms,[Mn]:["*"]},{[ce]:!0,[ee]:"sigv4",[ue]:ms,[xe]:"{bucketArn#region}"}]},vo={[b]:Sc,[w]:[V]},Do={[B]:"https://s3-fips.dualstack.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[_]:de,[I]:{}},ko={[B]:"https://s3-fips.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[_]:de,[I]:{}},To={[B]:"https://s3.dualstack.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[_]:de,[I]:{}},Nr={[B]:Ec,[_]:de,[I]:{}},Bo={[B]:"https://s3.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[_]:de,[I]:{}},_o={[N]:"UseObjectLambdaEndpoint"},Ur={[ye]:[{[ce]:!0,[ee]:"sigv4",[ue]:$n,[xe]:"{Region}"}]},Io={[B]:"https://s3-fips.dualstack.{Region}.{partitionResult#dnsSuffix}",[_]:de,[I]:{}},Oo={[B]:"https://s3-fips.{Region}.{partitionResult#dnsSuffix}",[_]:de,[I]:{}},Po={[B]:"https://s3.dualstack.{Region}.{partitionResult#dnsSuffix}",[_]:de,[I]:{}},$r={[B]:Bs,[_]:de,[I]:{}},Mo={[B]:"https://s3.{Region}.{partitionResult#dnsSuffix}",[_]:de,[I]:{}},Fr=[{[N]:"Region"}],fp=[{[N]:"Endpoint"}],hp=[V],Lr=[Fe],Tt=[re,ve],No=[{[b]:Me,[w]:[{[N]:"DisableS3ExpressSessionAuth"}]},{[b]:ne,[w]:[{[N]:"DisableS3ExpressSessionAuth"},!0]}],mp=[Rc],Uo=[vc],$e=[Cc],Hr=[J,X],as=[J,j],cs=[z,X],us=[z,j],$o=[{[b]:Z,[w]:[V,6,14,!0],[L]:"s3expressAvailabilityZoneId"},{[b]:Z,[w]:[V,14,16,!0],[L]:"s3expressAvailabilityZoneDelim"},{[b]:K,[w]:[{[N]:"s3expressAvailabilityZoneDelim"},"--"]}],qe=[{[p]:[J,X],[D]:{[B]:"https://{Bucket}.s3express-fips-{s3expressAvailabilityZoneId}.dualstack.{Region}.{partitionResult#dnsSuffix}",[_]:Pe,[I]:{}},[l]:D},{[p]:as,[D]:{[B]:"https://{Bucket}.s3express-fips-{s3expressAvailabilityZoneId}.{Region}.{partitionResult#dnsSuffix}",[_]:Pe,[I]:{}},[l]:D},{[p]:cs,[D]:{[B]:"https://{Bucket}.s3express-{s3expressAvailabilityZoneId}.dualstack.{Region}.{partitionResult#dnsSuffix}",[_]:Pe,[I]:{}},[l]:D},{[p]:us,[D]:{[B]:"https://{Bucket}.s3express-{s3expressAvailabilityZoneId}.{Region}.{partitionResult#dnsSuffix}",[_]:Pe,[I]:{}},[l]:D}],Fo=[{[b]:Z,[w]:[V,6,15,!0],[L]:"s3expressAvailabilityZoneId"},{[b]:Z,[w]:[V,15,17,!0],[L]:"s3expressAvailabilityZoneDelim"},{[b]:K,[w]:[{[N]:"s3expressAvailabilityZoneDelim"},"--"]}],Lo=[{[b]:Z,[w]:[V,6,19,!0],[L]:"s3expressAvailabilityZoneId"},{[b]:Z,[w]:[V,19,21,!0],[L]:"s3expressAvailabilityZoneDelim"},{[b]:K,[w]:[{[N]:"s3expressAvailabilityZoneDelim"},"--"]}],Ho=[{[b]:Z,[w]:[V,6,20,!0],[L]:"s3expressAvailabilityZoneId"},{[b]:Z,[w]:[V,20,22,!0],[L]:"s3expressAvailabilityZoneDelim"},{[b]:K,[w]:[{[N]:"s3expressAvailabilityZoneDelim"},"--"]}],zo=[{[b]:Z,[w]:[V,6,26,!0],[L]:"s3expressAvailabilityZoneId"},{[b]:Z,[w]:[V,26,28,!0],[L]:"s3expressAvailabilityZoneDelim"},{[b]:K,[w]:[{[N]:"s3expressAvailabilityZoneDelim"},"--"]}],Ve=[{[p]:[J,X],[D]:{[B]:"https://{Bucket}.s3express-fips-{s3expressAvailabilityZoneId}.dualstack.{Region}.{partitionResult#dnsSuffix}",[_]:{[Xe]:"S3Express",[ye]:[{[ce]:!0,[ee]:"sigv4-s3express",[ue]:"s3express",[xe]:"{Region}"}]},[I]:{}},[l]:D},{[p]:as,[D]:{[B]:"https://{Bucket}.s3express-fips-{s3expressAvailabilityZoneId}.{Region}.{partitionResult#dnsSuffix}",[_]:{[Xe]:"S3Express",[ye]:[{[ce]:!0,[ee]:"sigv4-s3express",[ue]:"s3express",[xe]:"{Region}"}]},[I]:{}},[l]:D},{[p]:cs,[D]:{[B]:"https://{Bucket}.s3express-{s3expressAvailabilityZoneId}.dualstack.{Region}.{partitionResult#dnsSuffix}",[_]:{[Xe]:"S3Express",[ye]:[{[ce]:!0,[ee]:"sigv4-s3express",[ue]:"s3express",[xe]:"{Region}"}]},[I]:{}},[l]:D},{[p]:us,[D]:{[B]:"https://{Bucket}.s3express-{s3expressAvailabilityZoneId}.{Region}.{partitionResult#dnsSuffix}",[_]:{[Xe]:"S3Express",[ye]:[{[ce]:!0,[ee]:"sigv4-s3express",[ue]:"s3express",[xe]:"{Region}"}]},[I]:{}},[l]:D}],jo=[V,0,7,!0],qo=[{[b]:Z,[w]:[V,7,15,!0],[L]:"s3expressAvailabilityZoneId"},{[b]:Z,[w]:[V,15,17,!0],[L]:"s3expressAvailabilityZoneDelim"},{[b]:K,[w]:[{[N]:"s3expressAvailabilityZoneDelim"},"--"]}],Vo=[{[b]:Z,[w]:[V,7,16,!0],[L]:"s3expressAvailabilityZoneId"},{[b]:Z,[w]:[V,16,18,!0],[L]:"s3expressAvailabilityZoneDelim"},{[b]:K,[w]:[{[N]:"s3expressAvailabilityZoneDelim"},"--"]}],Wo=[{[b]:Z,[w]:[V,7,20,!0],[L]:"s3expressAvailabilityZoneId"},{[b]:Z,[w]:[V,20,22,!0],[L]:"s3expressAvailabilityZoneDelim"},{[b]:K,[w]:[{[N]:"s3expressAvailabilityZoneDelim"},"--"]}],Ko=[{[b]:Z,[w]:[V,7,21,!0],[L]:"s3expressAvailabilityZoneId"},{[b]:Z,[w]:[V,21,23,!0],[L]:"s3expressAvailabilityZoneDelim"},{[b]:K,[w]:[{[N]:"s3expressAvailabilityZoneDelim"},"--"]}],Go=[{[b]:Z,[w]:[V,7,27,!0],[L]:"s3expressAvailabilityZoneId"},{[b]:Z,[w]:[V,27,29,!0],[L]:"s3expressAvailabilityZoneDelim"},{[b]:K,[w]:[{[N]:"s3expressAvailabilityZoneDelim"},"--"]}],pp=[os],Xo=[{[b]:xt,[w]:[{[N]:yn},!1]}],Zo=[{[b]:K,[w]:[{[N]:pc},"beta"]}],gp=["*"],Qo=[{[b]:xt,[w]:[{[N]:"Region"},!1]}],Qe=[{[b]:K,[w]:[{[N]:"Region"},"us-east-1"]}],zr=[{[b]:K,[w]:[Dc,wc]}],Jo=[{[b]:Y,[w]:[Te,"resourceId[1]"],[L]:Fn},{[b]:Ke,[w]:[{[b]:K,[w]:[Ln,zs]}]}],yp=[Te,"resourceId[1]"],Yo=[X],jr=[{[b]:Ke,[w]:[{[b]:K,[w]:[{[b]:Y,[w]:[Te,"region"]},zs]}]}],ea=[{[b]:Ke,[w]:[{[b]:Me,[w]:[{[b]:Y,[w]:[Te,"resourceId[2]"]}]}]}],Sp=[Te,"resourceId[2]"],qr=[{[b]:Fs,[w]:[{[b]:Y,[w]:[Te,"region"]}],[L]:"bucketPartition"}],ta=[{[b]:K,[w]:[kc,{[b]:Y,[w]:[{[N]:"partitionResult"},ee]}]}],Vr=[{[b]:xt,[w]:[{[b]:Y,[w]:[Te,"region"]},!0]}],Wr=[{[b]:xt,[w]:[Tc,!1]}],sa=[{[b]:xt,[w]:[Ln,!1]}],Ts=[J],ra=[{[b]:xt,[w]:[{[N]:"Region"},!0]}],xp={parameters:{Bucket:Dt,Region:Dt,UseFIPS:kt,UseDualStack:kt,Endpoint:Dt,ForcePathStyle:kt,Accelerate:kt,UseGlobalEndpoint:kt,UseObjectLambdaEndpoint:es,Key:Dt,Prefix:Dt,CopySource:Dt,DisableAccessPoints:es,DisableMultiRegionAccessPoints:kt,UseArnRegion:es,UseS3ExpressControlEndpoint:es,DisableS3ExpressSessionAuth:es},[A]:[{[p]:[{[b]:Me,[w]:Fr}],[A]:[{[p]:[Fe,J],error:"Accelerate cannot be used with FIPS",[l]:P},{[p]:[X,re],error:"Cannot set dual-stack in combination with a custom endpoint.",[l]:P},{[p]:[re,J],error:"A custom endpoint cannot be combined with FIPS",[l]:P},{[p]:[re,Fe],error:"A custom endpoint cannot be combined with S3 Accelerate",[l]:P},{[p]:[J,Cc,ro],error:"Partition does not support FIPS",[l]:P},{[p]:[os,{[b]:Z,[w]:[V,0,up,je],[L]:Ki},{[b]:K,[w]:[{[N]:Ki},"--x-s3"]}],[A]:[no,io,{[p]:[ao,co],[A]:[{[p]:$e,[A]:[{[p]:[Rc,F],[A]:[{[p]:Hr,endpoint:{[B]:"https://s3express-control-fips.dualstack.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[_]:Pe,[I]:$},[l]:D},{[p]:as,endpoint:{[B]:"https://s3express-control-fips.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[_]:Pe,[I]:$},[l]:D},{[p]:cs,endpoint:{[B]:"https://s3express-control.dualstack.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[_]:Pe,[I]:$},[l]:D},{[p]:us,endpoint:{[B]:"https://s3express-control.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[_]:Pe,[I]:$},[l]:D}],[l]:R}],[l]:R}],[l]:R},{[p]:Uo,[A]:[{[p]:$e,[A]:[{[p]:No,[A]:[{[p]:$o,[A]:qe,[l]:R},{[p]:Fo,[A]:qe,[l]:R},{[p]:Lo,[A]:qe,[l]:R},{[p]:Ho,[A]:qe,[l]:R},{[p]:zo,[A]:qe,[l]:R},vs],[l]:R},{[p]:$o,[A]:Ve,[l]:R},{[p]:Fo,[A]:Ve,[l]:R},{[p]:Lo,[A]:Ve,[l]:R},{[p]:Ho,[A]:Ve,[l]:R},{[p]:zo,[A]:Ve,[l]:R},vs],[l]:R}],[l]:R},oo],[l]:R},{[p]:[os,{[b]:Z,[w]:jo,[L]:Gi},{[b]:K,[w]:[{[N]:Gi},"--xa-s3"]}],[A]:[no,io,{[p]:Uo,[A]:[{[p]:$e,[A]:[{[p]:No,[A]:[{[p]:qo,[A]:qe,[l]:R},{[p]:Vo,[A]:qe,[l]:R},{[p]:Wo,[A]:qe,[l]:R},{[p]:Ko,[A]:qe,[l]:R},{[p]:Go,[A]:qe,[l]:R},vs],[l]:R},{[p]:qo,[A]:Ve,[l]:R},{[p]:Vo,[A]:Ve,[l]:R},{[p]:Wo,[A]:Ve,[l]:R},{[p]:Ko,[A]:Ve,[l]:R},{[p]:Go,[A]:Ve,[l]:R},vs],[l]:R}],[l]:R},oo],[l]:R},{[p]:[uo,ao,co],[A]:[{[p]:$e,[A]:[{[p]:Tt,endpoint:{[B]:Bs,[_]:Pe,[I]:$},[l]:D},{[p]:Hr,endpoint:{[B]:"https://s3express-control-fips.dualstack.{Region}.{partitionResult#dnsSuffix}",[_]:Pe,[I]:$},[l]:D},{[p]:as,endpoint:{[B]:"https://s3express-control-fips.{Region}.{partitionResult#dnsSuffix}",[_]:Pe,[I]:$},[l]:D},{[p]:cs,endpoint:{[B]:"https://s3express-control.dualstack.{Region}.{partitionResult#dnsSuffix}",[_]:Pe,[I]:$},[l]:D},{[p]:us,endpoint:{[B]:"https://s3express-control.{Region}.{partitionResult#dnsSuffix}",[_]:Pe,[I]:$},[l]:D}],[l]:R}],[l]:R},{[p]:[os,{[b]:Z,[w]:[V,49,50,je],[L]:mc},{[b]:Z,[w]:[V,8,12,je],[L]:pc},{[b]:Z,[w]:jo,[L]:Xi},{[b]:Z,[w]:[V,32,49,je],[L]:yn},{[b]:Fs,[w]:Fr,[L]:"regionPartition"},{[b]:K,[w]:[{[N]:Xi},"--op-s3"]}],[A]:[{[p]:Xo,[A]:[{[p]:[{[b]:K,[w]:[lo,"e"]}],[A]:[{[p]:Zo,[A]:[fo,{[p]:Tt,endpoint:{[B]:"https://{Bucket}.ec2.{url#authority}",[_]:Ds,[I]:$},[l]:D}],[l]:R},{endpoint:{[B]:"https://{Bucket}.ec2.s3-outposts.{Region}.{regionPartition#dnsSuffix}",[_]:Ds,[I]:$},[l]:D}],[l]:R},{[p]:[{[b]:K,[w]:[lo,"o"]}],[A]:[{[p]:Zo,[A]:[fo,{[p]:Tt,endpoint:{[B]:"https://{Bucket}.op-{outpostId}.{url#authority}",[_]:Ds,[I]:$},[l]:D}],[l]:R},{endpoint:{[B]:"https://{Bucket}.op-{outpostId}.s3-outposts.{Region}.{regionPartition#dnsSuffix}",[_]:Ds,[I]:$},[l]:D}],[l]:R},{error:'Unrecognized hardware type: "Expected hardware type o or e but got {hardwareType}"',[l]:P}],[l]:R},{error:"Invalid ARN: The outpost Id must only contain a-z, A-Z, 0-9 and `-`.",[l]:P}],[l]:R},{[p]:pp,[A]:[{[p]:[re,{[b]:Ke,[w]:[{[b]:Me,[w]:[{[b]:Nn,[w]:fp}]}]}],error:"Custom endpoint `{Endpoint}` was not a valid URI",[l]:P},{[p]:[vr,vc],[A]:[{[p]:$e,[A]:[{[p]:Qo,[A]:[{[p]:[Fe,ro],error:"S3 Accelerate cannot be used in this region",[l]:P},{[p]:[X,J,oe,F,he],endpoint:{[B]:"https://{Bucket}.s3-fips.dualstack.us-east-1.{partitionResult#dnsSuffix}",[_]:me,[I]:$},[l]:D},{[p]:[X,J,oe,F,q,pe],[A]:[{endpoint:ho,[l]:D}],[l]:R},{[p]:[X,J,oe,F,q,ge],endpoint:ho,[l]:D},{[p]:[j,J,oe,F,he],endpoint:{[B]:"https://{Bucket}.s3-fips.us-east-1.{partitionResult#dnsSuffix}",[_]:me,[I]:$},[l]:D},{[p]:[j,J,oe,F,q,pe],[A]:[{endpoint:mo,[l]:D}],[l]:R},{[p]:[j,J,oe,F,q,ge],endpoint:mo,[l]:D},{[p]:[X,z,Fe,F,he],endpoint:{[B]:"https://{Bucket}.s3-accelerate.dualstack.us-east-1.{partitionResult#dnsSuffix}",[_]:me,[I]:$},[l]:D},{[p]:[X,z,Fe,F,q,pe],[A]:[{endpoint:po,[l]:D}],[l]:R},{[p]:[X,z,Fe,F,q,ge],endpoint:po,[l]:D},{[p]:[X,z,oe,F,he],endpoint:{[B]:"https://{Bucket}.s3.dualstack.us-east-1.{partitionResult#dnsSuffix}",[_]:me,[I]:$},[l]:D},{[p]:[X,z,oe,F,q,pe],[A]:[{endpoint:go,[l]:D}],[l]:R},{[p]:[X,z,oe,F,q,ge],endpoint:go,[l]:D},{[p]:[j,z,oe,re,ve,Rr,he],endpoint:{[B]:gc,[_]:me,[I]:$},[l]:D},{[p]:[j,z,oe,re,ve,Dr,he],endpoint:{[B]:Hs,[_]:me,[I]:$},[l]:D},{[p]:[j,z,oe,re,ve,Rr,q,pe],[A]:[{[p]:Qe,endpoint:kr,[l]:D},{endpoint:kr,[l]:D}],[l]:R},{[p]:[j,z,oe,re,ve,Dr,q,pe],[A]:[{[p]:Qe,endpoint:Sn,[l]:D},yo],[l]:R},{[p]:[j,z,oe,re,ve,Rr,q,ge],endpoint:kr,[l]:D},{[p]:[j,z,oe,re,ve,Dr,q,ge],endpoint:Sn,[l]:D},{[p]:[j,z,Fe,F,he],endpoint:{[B]:yc,[_]:me,[I]:$},[l]:D},{[p]:[j,z,Fe,F,q,pe],[A]:[{[p]:Qe,endpoint:Tr,[l]:D},{endpoint:Tr,[l]:D}],[l]:R},{[p]:[j,z,Fe,F,q,ge],endpoint:Tr,[l]:D},{[p]:[j,z,oe,F,he],endpoint:{[B]:Zi,[_]:me,[I]:$},[l]:D},{[p]:[j,z,oe,F,q,pe],[A]:[{[p]:Qe,endpoint:{[B]:Zi,[_]:de,[I]:$},[l]:D},{endpoint:So,[l]:D}],[l]:R},{[p]:[j,z,oe,F,q,ge],endpoint:So,[l]:D}],[l]:R},ks],[l]:R}],[l]:R},{[p]:[re,ve,{[b]:K,[w]:[{[b]:Y,[w]:[Ac,"scheme"]},"http"]},{[b]:Ls,[w]:[V,je]},vr,z,j,oe],[A]:[{[p]:$e,[A]:[{[p]:Qo,[A]:[yo],[l]:R},ks],[l]:R}],[l]:R},{[p]:[vr,{[b]:Sc,[w]:hp,[L]:xc}],[A]:[{[p]:[{[b]:Y,[w]:[Te,"resourceId[0]"],[L]:bc},{[b]:Ke,[w]:[{[b]:K,[w]:[Dc,zs]}]}],[A]:[{[p]:[{[b]:K,[w]:[Br,$n]}],[A]:[{[p]:zr,[A]:[{[p]:Jo,[A]:[xo,bo,{[p]:jr,[A]:[wo,{[p]:ea,[A]:[_r,{[p]:qr,[A]:[{[p]:$e,[A]:[{[p]:ta,[A]:[{[p]:Vr,[A]:[{[p]:[{[b]:K,[w]:[Tc,zs]}],error:"Invalid ARN: Missing account id",[l]:P},{[p]:Wr,[A]:[{[p]:sa,[A]:[{[p]:Tt,endpoint:{[B]:Qi,[_]:Ir,[I]:$},[l]:D},{[p]:Ts,endpoint:{[B]:"https://{accessPointName}-{bucketArn#accountId}.s3-object-lambda-fips.{bucketArn#region}.{bucketPartition#dnsSuffix}",[_]:Ir,[I]:$},[l]:D},{endpoint:{[B]:"https://{accessPointName}-{bucketArn#accountId}.s3-object-lambda.{bucketArn#region}.{bucketPartition#dnsSuffix}",[_]:Ir,[I]:$},[l]:D}],[l]:R},Eo],[l]:R},Or],[l]:R},Pr],[l]:R},Mr],[l]:R}],[l]:R}],[l]:R},Co],[l]:R},{error:"Invalid ARN: bucket ARN is missing a region",[l]:P}],[l]:R},Ao],[l]:R},{error:"Invalid ARN: Object Lambda ARNs only support `accesspoint` arn types, but found: `{arnType}`",[l]:P}],[l]:R},{[p]:zr,[A]:[{[p]:Jo,[A]:[{[p]:jr,[A]:[{[p]:zr,[A]:[{[p]:jr,[A]:[wo,{[p]:ea,[A]:[_r,{[p]:qr,[A]:[{[p]:$e,[A]:[{[p]:[{[b]:K,[w]:[kc,"{partitionResult#name}"]}],[A]:[{[p]:Vr,[A]:[{[p]:[{[b]:K,[w]:[Br,$t]}],[A]:[{[p]:Wr,[A]:[{[p]:sa,[A]:[{[p]:Lr,error:"Access Points do not support S3 Accelerate",[l]:P},{[p]:Hr,endpoint:{[B]:"https://{accessPointName}-{bucketArn#accountId}.s3-accesspoint-fips.dualstack.{bucketArn#region}.{bucketPartition#dnsSuffix}",[_]:ts,[I]:$},[l]:D},{[p]:as,endpoint:{[B]:"https://{accessPointName}-{bucketArn#accountId}.s3-accesspoint-fips.{bucketArn#region}.{bucketPartition#dnsSuffix}",[_]:ts,[I]:$},[l]:D},{[p]:cs,endpoint:{[B]:"https://{accessPointName}-{bucketArn#accountId}.s3-accesspoint.dualstack.{bucketArn#region}.{bucketPartition#dnsSuffix}",[_]:ts,[I]:$},[l]:D},{[p]:[z,j,re,ve],endpoint:{[B]:Qi,[_]:ts,[I]:$},[l]:D},{[p]:us,endpoint:{[B]:"https://{accessPointName}-{bucketArn#accountId}.s3-accesspoint.{bucketArn#region}.{bucketPartition#dnsSuffix}",[_]:ts,[I]:$},[l]:D}],[l]:R},Eo],[l]:R},Or],[l]:R},{error:"Invalid ARN: The ARN was not for the S3 service, found: {bucketArn#service}",[l]:P}],[l]:R},Pr],[l]:R},Mr],[l]:R}],[l]:R}],[l]:R},Co],[l]:R}],[l]:R}],[l]:R},{[p]:[{[b]:xt,[w]:[Ln,je]}],[A]:[{[p]:Yo,error:"S3 MRAP does not support dual-stack",[l]:P},{[p]:Ts,error:"S3 MRAP does not support FIPS",[l]:P},{[p]:Lr,error:"S3 MRAP does not support S3 Accelerate",[l]:P},{[p]:[{[b]:ne,[w]:[{[N]:"DisableMultiRegionAccessPoints"},je]}],error:"Invalid configuration: Multi-Region Access Point ARNs are disabled.",[l]:P},{[p]:[{[b]:Fs,[w]:Fr,[L]:Ji}],[A]:[{[p]:[{[b]:K,[w]:[{[b]:Y,[w]:[{[N]:Ji},ee]},{[b]:Y,[w]:[Te,"partition"]}]}],[A]:[{endpoint:{[B]:"https://{accessPointName}.accesspoint.s3-global.{mrapPartition#dnsSuffix}",[_]:{[ye]:[{[ce]:je,name:Un,[ue]:$t,[Mn]:gp}]},[I]:$},[l]:D}],[l]:R},{error:"Client was configured for partition `{mrapPartition#name}` but bucket referred to partition `{bucketArn#partition}`",[l]:P}],[l]:R}],[l]:R},{error:"Invalid Access Point Name",[l]:P}],[l]:R},Ao],[l]:R},{[p]:[{[b]:K,[w]:[Br,ms]}],[A]:[{[p]:Yo,error:"S3 Outposts does not support Dual-stack",[l]:P},{[p]:Ts,error:"S3 Outposts does not support FIPS",[l]:P},{[p]:Lr,error:"S3 Outposts does not support S3 Accelerate",[l]:P},{[p]:[{[b]:Me,[w]:[{[b]:Y,[w]:[Te,"resourceId[4]"]}]}],error:"Invalid Arn: Outpost Access Point ARN contains sub resources",[l]:P},{[p]:[{[b]:Y,[w]:yp,[L]:yn}],[A]:[{[p]:Xo,[A]:[_r,{[p]:qr,[A]:[{[p]:$e,[A]:[{[p]:ta,[A]:[{[p]:Vr,[A]:[{[p]:Wr,[A]:[{[p]:[{[b]:Y,[w]:Sp,[L]:Yi}],[A]:[{[p]:[{[b]:Y,[w]:[Te,"resourceId[3]"],[L]:Fn}],[A]:[{[p]:[{[b]:K,[w]:[{[N]:Yi},wc]}],[A]:[{[p]:Tt,endpoint:{[B]:"https://{accessPointName}-{bucketArn#accountId}.{outpostId}.{url#authority}",[_]:Ro,[I]:$},[l]:D},{endpoint:{[B]:"https://{accessPointName}-{bucketArn#accountId}.{outpostId}.s3-outposts.{bucketArn#region}.{bucketPartition#dnsSuffix}",[_]:Ro,[I]:$},[l]:D}],[l]:R},{error:"Expected an outpost type `accesspoint`, found {outpostType}",[l]:P}],[l]:R},{error:"Invalid ARN: expected an access point name",[l]:P}],[l]:R},{error:"Invalid ARN: Expected a 4-component resource",[l]:P}],[l]:R},Or],[l]:R},Pr],[l]:R},Mr],[l]:R}],[l]:R}],[l]:R},{error:"Invalid ARN: The outpost Id may only contain a-z, A-Z, 0-9 and `-`. Found: `{outpostId}`",[l]:P}],[l]:R},{error:"Invalid ARN: The Outpost Id was not set",[l]:P}],[l]:R},{error:"Invalid ARN: Unrecognized format: {Bucket} (type: {arnType})",[l]:P}],[l]:R},{error:"Invalid ARN: No ARN type specified",[l]:P}],[l]:R},{[p]:[{[b]:Z,[w]:[V,0,4,dp],[L]:eo},{[b]:K,[w]:[{[N]:eo},"arn:"]},{[b]:Ke,[w]:[{[b]:Me,[w]:[vo]}]}],error:"Invalid ARN: `{Bucket}` was not a valid ARN",[l]:P},{[p]:[{[b]:ne,[w]:[lp,je]},vo],error:"Path-style addressing cannot be used with ARN buckets",[l]:P},{[p]:mp,[A]:[{[p]:$e,[A]:[{[p]:[oe],[A]:[{[p]:[X,F,J,he],endpoint:{[B]:"https://s3-fips.dualstack.us-east-1.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[_]:me,[I]:$},[l]:D},{[p]:[X,F,J,q,pe],[A]:[{endpoint:Do,[l]:D}],[l]:R},{[p]:[X,F,J,q,ge],endpoint:Do,[l]:D},{[p]:[j,F,J,he],endpoint:{[B]:"https://s3-fips.us-east-1.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[_]:me,[I]:$},[l]:D},{[p]:[j,F,J,q,pe],[A]:[{endpoint:ko,[l]:D}],[l]:R},{[p]:[j,F,J,q,ge],endpoint:ko,[l]:D},{[p]:[X,F,z,he],endpoint:{[B]:"https://s3.dualstack.us-east-1.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[_]:me,[I]:$},[l]:D},{[p]:[X,F,z,q,pe],[A]:[{endpoint:To,[l]:D}],[l]:R},{[p]:[X,F,z,q,ge],endpoint:To,[l]:D},{[p]:[j,re,ve,z,he],endpoint:{[B]:Ec,[_]:me,[I]:$},[l]:D},{[p]:[j,re,ve,z,q,pe],[A]:[{[p]:Qe,endpoint:Nr,[l]:D},{endpoint:Nr,[l]:D}],[l]:R},{[p]:[j,re,ve,z,q,ge],endpoint:Nr,[l]:D},{[p]:[j,F,z,he],endpoint:{[B]:to,[_]:me,[I]:$},[l]:D},{[p]:[j,F,z,q,pe],[A]:[{[p]:Qe,endpoint:{[B]:to,[_]:de,[I]:$},[l]:D},{endpoint:Bo,[l]:D}],[l]:R},{[p]:[j,F,z,q,ge],endpoint:Bo,[l]:D}],[l]:R},{error:"Path-style addressing cannot be used with S3 Accelerate",[l]:P}],[l]:R}],[l]:R}],[l]:R},{[p]:[{[b]:Me,[w]:[_o]},{[b]:ne,[w]:[_o,je]}],[A]:[{[p]:$e,[A]:[{[p]:ra,[A]:[xo,bo,{[p]:Tt,endpoint:{[B]:Bs,[_]:Ur,[I]:$},[l]:D},{[p]:Ts,endpoint:{[B]:"https://s3-object-lambda-fips.{Region}.{partitionResult#dnsSuffix}",[_]:Ur,[I]:$},[l]:D},{endpoint:{[B]:"https://s3-object-lambda.{Region}.{partitionResult#dnsSuffix}",[_]:Ur,[I]:$},[l]:D}],[l]:R},ks],[l]:R}],[l]:R},{[p]:[uo],[A]:[{[p]:$e,[A]:[{[p]:ra,[A]:[{[p]:[J,X,F,he],endpoint:{[B]:"https://s3-fips.dualstack.us-east-1.{partitionResult#dnsSuffix}",[_]:me,[I]:$},[l]:D},{[p]:[J,X,F,q,pe],[A]:[{endpoint:Io,[l]:D}],[l]:R},{[p]:[J,X,F,q,ge],endpoint:Io,[l]:D},{[p]:[J,j,F,he],endpoint:{[B]:"https://s3-fips.us-east-1.{partitionResult#dnsSuffix}",[_]:me,[I]:$},[l]:D},{[p]:[J,j,F,q,pe],[A]:[{endpoint:Oo,[l]:D}],[l]:R},{[p]:[J,j,F,q,ge],endpoint:Oo,[l]:D},{[p]:[z,X,F,he],endpoint:{[B]:"https://s3.dualstack.us-east-1.{partitionResult#dnsSuffix}",[_]:me,[I]:$},[l]:D},{[p]:[z,X,F,q,pe],[A]:[{endpoint:Po,[l]:D}],[l]:R},{[p]:[z,X,F,q,ge],endpoint:Po,[l]:D},{[p]:[z,j,re,ve,he],endpoint:{[B]:Bs,[_]:me,[I]:$},[l]:D},{[p]:[z,j,re,ve,q,pe],[A]:[{[p]:Qe,endpoint:$r,[l]:D},{endpoint:$r,[l]:D}],[l]:R},{[p]:[z,j,re,ve,q,ge],endpoint:$r,[l]:D},{[p]:[z,j,F,he],endpoint:{[B]:so,[_]:me,[I]:$},[l]:D},{[p]:[z,j,F,q,pe],[A]:[{[p]:Qe,endpoint:{[B]:so,[_]:de,[I]:$},[l]:D},{endpoint:Mo,[l]:D}],[l]:R},{[p]:[z,j,F,q,ge],endpoint:Mo,[l]:D}],[l]:R},ks],[l]:R}],[l]:R}],[l]:R},{error:"A region must be set when sending requests to S3.",[l]:P}]},bp=xp,wp=new Oh({size:50,params:["Accelerate","Bucket","DisableAccessPoints","DisableMultiRegionAccessPoints","DisableS3ExpressSessionAuth","Endpoint","ForcePathStyle","Region","UseArnRegion","UseDualStack","UseFIPS","UseGlobalEndpoint","UseObjectLambdaEndpoint","UseS3ExpressControlEndpoint"]}),Bc=(t,e={})=>wp.get(t,()=>Jh(bp,{endpointParams:t,logger:e.logger}));Ns.aws=ic;const Ep=t=>(e,s,r)=>C(null,null,function*(){var a,u,c;if(!r)throw new Error("Could not find `input` for `defaultEndpointRuleSetHttpAuthSchemeParametersProvider`");const n=yield t(e,s,r),i=(c=(u=(a=at(s))==null?void 0:a.commandInstance)==null?void 0:u.constructor)==null?void 0:c.getEndpointParameterInstructions;if(!i)throw new Error(`getEndpointParameterInstructions() is not defined on \`${s.commandName}\``);const o=yield uc(r,{getEndpointParameterInstructions:i},e);return Object.assign(n,o)}),Cp=(t,e,s)=>C(null,null,function*(){return{operation:at(e).operation,region:(yield ze(t.region)())||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()}}),Ap=Ep(Cp);function _c(t){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"s3",region:t.region},propertiesExtractor:(e,s)=>({signingProperties:{config:e,context:s}})}}function Ic(t){return{schemeId:"aws.auth#sigv4a",signingProperties:{name:"s3",region:t.region},propertiesExtractor:(e,s)=>({signingProperties:{config:e,context:s}})}}const Rp=(t,e,s)=>n=>{var u;const o=(u=t(n).properties)==null?void 0:u.authSchemes;if(!o)return e(n);const a=[];for(const h of o){const c=h,{name:d,properties:f={}}=c,m=Es(c,["name","properties"]),x=d.toLowerCase();d!==x&&console.warn(`HttpAuthScheme has been normalized with lowercasing: \`${d}\` to \`${x}\``);let S;if(x==="sigv4a"){S="aws.auth#sigv4a";const T=o.find(M=>{const U=M.name.toLowerCase();return U!=="sigv4a"&&U.startsWith("sigv4")});if(hc.sigv4aDependency()==="none"&&T)continue}else if(x.startsWith("sigv4"))S="aws.auth#sigv4";else throw new Error(`Unknown HttpAuthScheme found in \`@smithy.rules#endpointRuleSet\`: \`${x}\``);const y=s[S];if(!y)throw new Error(`Could not find HttpAuthOption create function for \`${S}\``);const v=y(n);v.schemeId=S,v.signingProperties=k(k(k({},v.signingProperties||{}),m),f),a.push(v)}return a},vp=t=>{const e=[];switch(t.operation){default:e.push(_c(t)),e.push(Ic(t))}return e},Dp=Rp(Bc,vp,{"aws.auth#sigv4":_c,"aws.auth#sigv4a":Ic}),kp=t=>{var r;const e=Vl(t),s=xl(e);return Object.assign(s,{authSchemePreference:ze((r=t.authSchemePreference)!=null?r:[])})},Tp=t=>{var e,s,r,n,i,o,a;return Object.assign(t,{useFipsEndpoint:(e=t.useFipsEndpoint)!=null?e:!1,useDualstackEndpoint:(s=t.useDualstackEndpoint)!=null?s:!1,forcePathStyle:(r=t.forcePathStyle)!=null?r:!1,useAccelerateEndpoint:(n=t.useAccelerateEndpoint)!=null?n:!1,useGlobalEndpoint:(i=t.useGlobalEndpoint)!=null?i:!1,disableMultiregionAccessPoints:(o=t.disableMultiregionAccessPoints)!=null?o:!1,defaultSigningName:"s3",clientContextParams:(a=t.clientContextParams)!=null?a:{}})},bt={ForcePathStyle:{type:"clientContextParams",name:"forcePathStyle"},UseArnRegion:{type:"clientContextParams",name:"useArnRegion"},DisableMultiRegionAccessPoints:{type:"clientContextParams",name:"disableMultiregionAccessPoints"},Accelerate:{type:"clientContextParams",name:"useAccelerateEndpoint"},DisableS3ExpressSessionAuth:{type:"clientContextParams",name:"disableS3ExpressSessionAuth"},UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}};class be extends _t{constructor(e){super(e),Object.setPrototypeOf(this,be.prototype)}}class Hn extends be{constructor(s){super(k({name:"NoSuchUpload",$fault:"client"},s));g(this,"name","NoSuchUpload");g(this,"$fault","client");Object.setPrototypeOf(this,Hn.prototype)}}class zn extends be{constructor(s){super(k({name:"ObjectNotInActiveTierError",$fault:"client"},s));g(this,"name","ObjectNotInActiveTierError");g(this,"$fault","client");Object.setPrototypeOf(this,zn.prototype)}}class jn extends be{constructor(s){super(k({name:"BucketAlreadyExists",$fault:"client"},s));g(this,"name","BucketAlreadyExists");g(this,"$fault","client");Object.setPrototypeOf(this,jn.prototype)}}class qn extends be{constructor(s){super(k({name:"BucketAlreadyOwnedByYou",$fault:"client"},s));g(this,"name","BucketAlreadyOwnedByYou");g(this,"$fault","client");Object.setPrototypeOf(this,qn.prototype)}}class Vn extends be{constructor(s){super(k({name:"NoSuchBucket",$fault:"client"},s));g(this,"name","NoSuchBucket");g(this,"$fault","client");Object.setPrototypeOf(this,Vn.prototype)}}class Wn extends be{constructor(s){super(k({name:"InvalidObjectState",$fault:"client"},s));g(this,"name","InvalidObjectState");g(this,"$fault","client");g(this,"StorageClass");g(this,"AccessTier");Object.setPrototypeOf(this,Wn.prototype),this.StorageClass=s.StorageClass,this.AccessTier=s.AccessTier}}class Kn extends be{constructor(s){super(k({name:"NoSuchKey",$fault:"client"},s));g(this,"name","NoSuchKey");g(this,"$fault","client");Object.setPrototypeOf(this,Kn.prototype)}}class Gn extends be{constructor(s){super(k({name:"NotFound",$fault:"client"},s));g(this,"name","NotFound");g(this,"$fault","client");Object.setPrototypeOf(this,Gn.prototype)}}class Xn extends be{constructor(s){super(k({name:"EncryptionTypeMismatch",$fault:"client"},s));g(this,"name","EncryptionTypeMismatch");g(this,"$fault","client");Object.setPrototypeOf(this,Xn.prototype)}}class Zn extends be{constructor(s){super(k({name:"InvalidRequest",$fault:"client"},s));g(this,"name","InvalidRequest");g(this,"$fault","client");Object.setPrototypeOf(this,Zn.prototype)}}class Qn extends be{constructor(s){super(k({name:"InvalidWriteOffset",$fault:"client"},s));g(this,"name","InvalidWriteOffset");g(this,"$fault","client");Object.setPrototypeOf(this,Qn.prototype)}}class Jn extends be{constructor(s){super(k({name:"TooManyParts",$fault:"client"},s));g(this,"name","TooManyParts");g(this,"$fault","client");Object.setPrototypeOf(this,Jn.prototype)}}class Yn extends be{constructor(s){super(k({name:"IdempotencyParameterMismatch",$fault:"client"},s));g(this,"name","IdempotencyParameterMismatch");g(this,"$fault","client");Object.setPrototypeOf(this,Yn.prototype)}}class ei extends be{constructor(s){super(k({name:"ObjectAlreadyInActiveTierError",$fault:"client"},s));g(this,"name","ObjectAlreadyInActiveTierError");g(this,"$fault","client");Object.setPrototypeOf(this,ei.prototype)}}const Oc="ACL",na="AccessKeyId",Bp="AccessPointAlias",_p="AccessTier",wt="Bucket",Ip="BucketArn",Op="BucketAlreadyExists",Pp="BucketAlreadyOwnedByYou",Pc="BypassGovernanceRetention",Ht="BucketKeyEnabled",Mp="BucketLocationName",Np="BucketLocationType",Up="BucketRegion",$p="Body",Js="ChecksumAlgorithm",Mc="CacheControl",ti="ChecksumCRC32",si="ChecksumCRC32C",ri="ChecksumCRC64NVME",Nc="Cache-Control",Uc="Content-Disposition",$c="ContentDisposition",Fc="Content-Encoding",Lc="ContentEncoding",Hc="ContentLanguage",zc="Content-Language",Fp="Content-Length",Lp="ContentLength",Hp="Content-MD5",zp="ContentMD5",jp="CopyObject",qp="CopyObjectOutput",jc="CopyObjectResult",Vp="CopyObjectRequest",Wp="CommonPrefix",Kp="CommonPrefixList",Gp="CommonPrefixes",Xp="CopySource",ni="ChecksumSHA1",ii="ChecksumSHA256",Zp="CopySourceIfMatch",Qp="CopySourceIfModifiedSince",Jp="CopySourceIfNoneMatch",Yp="CopySourceIfUnmodifiedSince",e0="CreateSessionOutput",t0="CreateSessionResult",s0="CreateSessionRequest",r0="CopySourceSSECustomerAlgorithm",qc="CopySourceSSECustomerKey",n0="CopySourceSSECustomerKeyMD5",i0="CopySourceVersionId",o0="CreateSession",oi="ChecksumType",Vc="Content-Type",Wc="ContentType",Kc="ContinuationToken",a0="Code",c0="Contents",ia="Credentials",Gc="DeleteMarker",u0="DeleteMarkerVersionId",d0="DisplayName",l0="DeletedObject",f0="DeleteObjectOutput",h0="DeleteObjectsOutput",m0="DeleteObjectRequest",p0="DeleteObjectsRequest",g0="DeletedObjects",y0="DeleteObject",S0="DeleteObjects",x0="DeleteResult",xn="Delete",b0="Deleted",Xc="Delimiter",js="Expiration",zt="ExpectedBucketOwner",w0="ExpectedSourceBucketOwner",E0="EncryptionTypeMismatch",ps="ETag",Zc="EncodingType",Qc="Errors",Jc="Error",qs="Expires",C0="FetchOwner",Yc="GrantFullControl",eu="GrantRead",tu="GrantReadACP",su="GrantWriteACP",A0="HeadBucket",R0="HeadBucketOutput",v0="HeadBucketRequest",D0="ID",ai="IfMatch",k0="IfMatchLastModifiedTime",T0="IfMatchSize",ci="If-Match",ru="IfNoneMatch",nu="If-None-Match",B0="InvalidObjectState",_0="IdempotencyParameterMismatch",I0="InvalidRequest",O0="IsRestoreInProgress",P0="IsTruncated",M0="InvalidWriteOffset",Et="Key",N0="KeyCount",U0="ListBucketResult",iu="LastModified",$0="LastModifiedTime",F0="ListObjectsV2",L0="ListObjectsV2Output",H0="ListObjectsV2Request",ou="Metadata",z0="MetadataDirective",au="MFA",cu="MaxKeys",j0="Message",q0="Name",V0="NextContinuationToken",W0="NotFound",K0="NoSuchBucket",G0="NoSuchKey",X0="NoSuchUpload",uu="Owner",Z0="ObjectAlreadyInActiveTierError",Q0="ObjectIdentifier",J0="ObjectIdentifierList",du="ObjectLockLegalHoldStatus",lu="ObjectLockMode",fu="ObjectLockRetainUntilDate",Y0="ObjectList",eg="ObjectNotInActiveTierError",tg="OptionalObjectAttributes",sg="Objects",hu="Object",ui="Prefix",rg="PutObject",ng="PutObjectOutput",ig="PutObjectRequest",og="Quiet",gs="RequestCharged",ag="RestoreExpiryDate",ys="RequestPayer",mu="RestoreStatus",pu="StartAfter",oa="SecretAccessKey",cg="StreamingBlob",Ys="StorageClass",ug="SessionCredentialValue",dg="SessionCredentials",lg="SessionMode",jt="ServerSideEncryption",er="SSECustomerAlgorithm",di="SSECustomerKey",tr="SSECustomerKeyMD5",Ct="SSEKMSEncryptionContext",At="SSEKMSKeyId",aa="SessionToken",li="Size",fg="TaggingDirective",hg="TooManyParts",gu="Tagging",Rt="VersionId",mg="WriteOffsetBytes",yu="WebsiteRedirectLocation",Be="client",pg="continuation-token",gg="delimiter",_e="error",yg="encoding-type",Sg="fetch-owner",vt="http",Su="httpChecksum",Ue="httpError",E="httpHeader",xg="httpPayload",xu="httpPrefixHeaders",Ye="httpQuery",bg="max-keys",wg="prefix",Eg="streaming",Cg="start-after",bu="smithy.ts.sdk.synthetic.com.amazonaws.s3",Ag="versionId",Ft="xmlFlattened",He="xmlName",wu="x-amz-acl",Rg="x-amz-access-point-alias",vg="x-amz-bucket-arn",Eu="x-amz-bypass-governance-retention",Dg="x-amz-bucket-location-name",kg="x-amz-bucket-location-type",Tg="x-amz-bucket-region",Bg="x-amz-checksum-algorithm",Cu="x-amz-checksum-crc32",Au="x-amz-checksum-crc32c",Ru="x-amz-checksum-crc64nvme",vu="x-amz-checksum-sha1",Du="x-amz-checksum-sha256",_g="x-amz-copy-source",Ig="x-amz-copy-source-if-match",Og="x-amz-copy-source-if-modified-since",Pg="x-amz-copy-source-if-none-match",Mg="x-amz-copy-source-if-unmodified-since",Ng="x-amz-create-session-mode",Ug="x-amz-copy-source-server-side-encryption-customer-algorithm",$g="x-amz-copy-source-server-side-encryption-customer-key",Fg="x-amz-copy-source-server-side-encryption-customer-key-MD5",Lg="x-amz-copy-source-version-id",Hg="x-amz-checksum-type",zg="x-amz-delete-marker",ku="x-amz-expiration",qt="x-amz-expected-bucket-owner",Tu="x-amz-grant-full-control",Bu="x-amz-grant-read",_u="x-amz-grant-read-acp",Iu="x-amz-grant-write-acp",jg="x-amz-if-match-last-modified-time",qg="x-amz-if-match-size",Ou="x-amz-meta-",Pu="x-amz-mfa",Vg="x-amz-metadata-directive",Mu="x-amz-object-lock-legal-hold",Nu="x-amz-object-lock-mode",Uu="x-amz-object-lock-retain-until-date",Wg="x-amz-optional-object-attributes",Kg="x-amz-object-size",Ss="x-amz-request-charged",xs="x-amz-request-payer",$u="x-amz-storage-class",Fu="x-amz-sdk-checksum-algorithm",Gg="x-amz-source-expected-bucket-owner",Vt="x-amz-server-side-encryption",Wt="x-amz-server-side-encryption-aws-kms-key-id",Kt="x-amz-server-side-encryption-bucket-key-enabled",Gt="x-amz-server-side-encryption-context",sr="x-amz-server-side-encryption-customer-algorithm",Lu="x-amz-server-side-encryption-customer-key",rr="x-amz-server-side-encryption-customer-key-MD5",Hu="x-amz-tagging",Xg="x-amz-tagging-directive",fi="x-amz-version-id",Zg="x-amz-write-offset-bytes",zu="x-amz-website-redirect-location",O="com.amazonaws.s3";var Qg=[0,O,qc,8,0],ca=[0,O,ug,8,0],ju=[0,O,di,8,0],Xt=[0,O,Ct,8,0],Zt=[0,O,At,8,0],Jg=[0,O,cg,{[Eg]:1},42],Yg=[-3,O,Op,{[_e]:Be,[Ue]:409},[],[]];fe.for(O).registerError(Yg,jn);var ey=[-3,O,Pp,{[_e]:Be,[Ue]:409},[],[]];fe.for(O).registerError(ey,qn);var ty=[3,O,Wp,0,[ui],[0]],sy=[3,O,qp,0,[jc,js,i0,Rt,jt,er,tr,At,Ct,Ht,gs],[[()=>ny,16],[0,{[E]:ku}],[0,{[E]:Lg}],[0,{[E]:fi}],[0,{[E]:Vt}],[0,{[E]:sr}],[0,{[E]:rr}],[()=>Zt,{[E]:Wt}],[()=>Xt,{[E]:Gt}],[2,{[E]:Kt}],[0,{[E]:Ss}]]],ry=[3,O,Vp,0,[Oc,wt,Mc,Js,$c,Lc,Hc,Wc,Xp,Zp,Qp,Jp,Yp,qs,Yc,eu,tu,su,ai,ru,Et,ou,z0,fg,jt,Ys,yu,er,di,tr,At,Ct,Ht,r0,qc,n0,ys,gu,lu,fu,du,zt,w0],[[0,{[E]:wu}],[0,1],[0,{[E]:Nc}],[0,{[E]:Bg}],[0,{[E]:Uc}],[0,{[E]:Fc}],[0,{[E]:zc}],[0,{[E]:Vc}],[0,{[E]:_g}],[0,{[E]:Ig}],[4,{[E]:Og}],[0,{[E]:Pg}],[4,{[E]:Mg}],[4,{[E]:qs}],[0,{[E]:Tu}],[0,{[E]:Bu}],[0,{[E]:_u}],[0,{[E]:Iu}],[0,{[E]:ci}],[0,{[E]:nu}],[0,1],[128,{[xu]:Ou}],[0,{[E]:Vg}],[0,{[E]:Xg}],[0,{[E]:Vt}],[0,{[E]:$u}],[0,{[E]:zu}],[0,{[E]:sr}],[()=>ju,{[E]:Lu}],[0,{[E]:rr}],[()=>Zt,{[E]:Wt}],[()=>Xt,{[E]:Gt}],[2,{[E]:Kt}],[0,{[E]:Ug}],[()=>Qg,{[E]:$g}],[0,{[E]:Fg}],[0,{[E]:xs}],[0,{[E]:Hu}],[0,{[E]:Nu}],[5,{[E]:Uu}],[0,{[E]:Mu}],[0,{[E]:qt}],[0,{[E]:Gg}]]],ny=[3,O,jc,0,[ps,iu,oi,ti,si,ri,ni,ii],[0,4,0,0,0,0,0,0]],iy=[3,O,e0,{[He]:t0},[jt,At,Ct,Ht,ia],[[0,{[E]:Vt}],[()=>Zt,{[E]:Wt}],[()=>Xt,{[E]:Gt}],[2,{[E]:Kt}],[()=>My,{[He]:ia}]]],oy=[3,O,s0,0,[lg,wt,jt,At,Ct,Ht],[[0,{[E]:Ng}],[0,1],[0,{[E]:Vt}],[()=>Zt,{[E]:Wt}],[()=>Xt,{[E]:Gt}],[2,{[E]:Kt}]]],ay=[3,O,xn,0,[sg,og],[[()=>Hy,{[Ft]:1,[He]:hu}],2]],cy=[3,O,l0,0,[Et,Rt,Gc,u0],[0,0,2,0]],uy=[3,O,f0,0,[Gc,Rt,gs],[[2,{[E]:zg}],[0,{[E]:fi}],[0,{[E]:Ss}]]],dy=[3,O,m0,0,[wt,Et,au,Rt,ys,Pc,zt,ai,k0,T0],[[0,1],[0,1],[0,{[E]:Pu}],[0,{[Ye]:Ag}],[0,{[E]:xs}],[2,{[E]:Eu}],[0,{[E]:qt}],[0,{[E]:ci}],[6,{[E]:jg}],[1,{[E]:qg}]]],ly=[3,O,h0,{[He]:x0},[b0,gs,Qc],[[()=>Fy,{[Ft]:1}],[0,{[E]:Ss}],[()=>Ly,{[Ft]:1,[He]:Jc}]]],fy=[3,O,p0,0,[wt,xn,au,ys,Pc,zt,Js],[[0,1],[()=>ay,{[xg]:1,[He]:xn}],[0,{[E]:Pu}],[0,{[E]:xs}],[2,{[E]:Eu}],[0,{[E]:qt}],[0,{[E]:Fu}]]],hy=[-3,O,E0,{[_e]:Be,[Ue]:400},[],[]];fe.for(O).registerError(hy,Xn);var my=[3,O,Jc,0,[Et,Rt,a0,j0],[0,0,0,0]],py=[3,O,R0,0,[Ip,Np,Mp,Up,Bp],[[0,{[E]:vg}],[0,{[E]:kg}],[0,{[E]:Dg}],[0,{[E]:Tg}],[2,{[E]:Rg}]]],gy=[3,O,v0,0,[wt,zt],[[0,1],[0,{[E]:qt}]]],yy=[-3,O,_0,{[_e]:Be,[Ue]:400},[],[]];fe.for(O).registerError(yy,Yn);var Sy=[-3,O,B0,{[_e]:Be,[Ue]:403},[Ys,_p],[0,0]];fe.for(O).registerError(Sy,Wn);var xy=[-3,O,I0,{[_e]:Be,[Ue]:400},[],[]];fe.for(O).registerError(xy,Zn);var by=[-3,O,M0,{[_e]:Be,[Ue]:400},[],[]];fe.for(O).registerError(by,Qn);var wy=[3,O,L0,{[He]:U0},[P0,c0,q0,ui,Xc,cu,Gp,Zc,N0,Kc,V0,pu,gs],[2,[()=>zy,{[Ft]:1}],0,0,0,1,[()=>$y,{[Ft]:1}],0,1,0,0,0,[0,{[E]:Ss}]]],Ey=[3,O,H0,0,[wt,Xc,Zc,cu,ui,Kc,C0,pu,ys,zt,tg],[[0,1],[0,{[Ye]:gg}],[0,{[Ye]:yg}],[1,{[Ye]:bg}],[0,{[Ye]:wg}],[0,{[Ye]:pg}],[2,{[Ye]:Sg}],[0,{[Ye]:Cg}],[0,{[E]:xs}],[0,{[E]:qt}],[64,{[E]:Wg}]]],Cy=[-3,O,K0,{[_e]:Be,[Ue]:404},[],[]];fe.for(O).registerError(Cy,Vn);var Ay=[-3,O,G0,{[_e]:Be,[Ue]:404},[],[]];fe.for(O).registerError(Ay,Kn);var Ry=[-3,O,X0,{[_e]:Be,[Ue]:404},[],[]];fe.for(O).registerError(Ry,Hn);var vy=[-3,O,W0,{[_e]:Be},[],[]];fe.for(O).registerError(vy,Gn);var Dy=[3,O,hu,0,[Et,iu,ps,Js,oi,li,Ys,uu,mu],[0,4,0,[64,{[Ft]:1}],0,1,0,()=>_y,()=>Py]],ky=[-3,O,Z0,{[_e]:Be,[Ue]:403},[],[]];fe.for(O).registerError(ky,ei);var Ty=[3,O,Q0,0,[Et,Rt,ps,$0,li],[0,0,0,6,1]],By=[-3,O,eg,{[_e]:Be,[Ue]:403},[],[]];fe.for(O).registerError(By,zn);var _y=[3,O,uu,0,[d0,D0],[0,0]],Iy=[3,O,ng,0,[js,ps,ti,si,ri,ni,ii,oi,jt,Rt,er,tr,At,Ct,Ht,li,gs],[[0,{[E]:ku}],[0,{[E]:ps}],[0,{[E]:Cu}],[0,{[E]:Au}],[0,{[E]:Ru}],[0,{[E]:vu}],[0,{[E]:Du}],[0,{[E]:Hg}],[0,{[E]:Vt}],[0,{[E]:fi}],[0,{[E]:sr}],[0,{[E]:rr}],[()=>Zt,{[E]:Wt}],[()=>Xt,{[E]:Gt}],[2,{[E]:Kt}],[1,{[E]:Kg}],[0,{[E]:Ss}]]],Oy=[3,O,ig,0,[Oc,$p,wt,Mc,$c,Lc,Hc,Lp,zp,Wc,Js,ti,si,ri,ni,ii,qs,ai,ru,Yc,eu,tu,su,Et,mg,ou,jt,Ys,yu,er,di,tr,At,Ct,Ht,ys,gu,lu,fu,du,zt],[[0,{[E]:wu}],[()=>Jg,16],[0,1],[0,{[E]:Nc}],[0,{[E]:Uc}],[0,{[E]:Fc}],[0,{[E]:zc}],[1,{[E]:Fp}],[0,{[E]:Hp}],[0,{[E]:Vc}],[0,{[E]:Fu}],[0,{[E]:Cu}],[0,{[E]:Au}],[0,{[E]:Ru}],[0,{[E]:vu}],[0,{[E]:Du}],[4,{[E]:qs}],[0,{[E]:ci}],[0,{[E]:nu}],[0,{[E]:Tu}],[0,{[E]:Bu}],[0,{[E]:_u}],[0,{[E]:Iu}],[0,1],[1,{[E]:Zg}],[128,{[xu]:Ou}],[0,{[E]:Vt}],[0,{[E]:$u}],[0,{[E]:zu}],[0,{[E]:sr}],[()=>ju,{[E]:Lu}],[0,{[E]:rr}],[()=>Zt,{[E]:Wt}],[()=>Xt,{[E]:Gt}],[2,{[E]:Kt}],[0,{[E]:xs}],[0,{[E]:Hu}],[0,{[E]:Nu}],[5,{[E]:Uu}],[0,{[E]:Mu}],[0,{[E]:qt}]]],Py=[3,O,mu,0,[O0,ag],[2,4]],My=[3,O,dg,0,[na,oa,aa,js],[[0,{[He]:na}],[()=>ca,{[He]:oa}],[()=>ca,{[He]:aa}],[4,{[He]:js}]]],Ny=[-3,O,hg,{[_e]:Be,[Ue]:400},[],[]];fe.for(O).registerError(Ny,Jn);var Uy=[-3,bu,"S3ServiceException",0,[],[]];fe.for(bu).registerError(Uy,be);var $y=[1,O,Kp,0,()=>ty],Fy=[1,O,g0,0,()=>cy],Ly=[1,O,Qc,0,()=>my],Hy=[1,O,J0,0,()=>Ty],zy=[1,O,Y0,0,[()=>Dy,0]],jy=[9,O,jp,{[vt]:["PUT","/{Key+}?x-id=CopyObject",200]},()=>ry,()=>sy],qy=[9,O,o0,{[vt]:["GET","/?session",200]},()=>oy,()=>iy],Vy=[9,O,y0,{[vt]:["DELETE","/{Key+}?x-id=DeleteObject",204]},()=>dy,()=>uy],Wy=[9,O,S0,{[Su]:"-",[vt]:["POST","/?delete",200]},()=>fy,()=>ly],Ky=[9,O,A0,{[vt]:["HEAD","/",200]},()=>gy,()=>py],Gy=[9,O,F0,{[vt]:["GET","/?list-type=2",200]},()=>Ey,()=>wy],Xy=[9,O,rg,{[Su]:"-",[vt]:["PUT","/{Key+}?x-id=PutObject",200]},()=>Oy,()=>Iy];class Zy extends ct.classBuilder().ep(H(k({},bt),{DisableS3ExpressSessionAuth:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}})).m(function(e,s,r,n){return[St(r,e.getEndpointParameterInstructions()),yt(r)]}).s("AmazonS3","CreateSession",{}).n("S3Client","CreateSessionCommand").sc(qy).build(){}const Qy="3.957.0",Jy={version:Qy},Yy=t=>new TextEncoder().encode(t);function ua(t){return typeof t=="string"?t.length===0:t.byteLength===0}var qu={name:"SHA-1"},da={name:"HMAC",hash:qu},eS=new Uint8Array([218,57,163,238,94,107,75,13,50,85,191,239,149,96,24,144,175,216,7,9]);const tS={};function rt(){return typeof window!="undefined"?window:typeof self!="undefined"?self:tS}var sS=(function(){function t(e){this.toHash=new Uint8Array(0),e!==void 0&&(this.key=new Promise(function(s,r){rt().crypto.subtle.importKey("raw",la(e),da,!1,["sign"]).then(s,r)}),this.key.catch(function(){}))}return t.prototype.update=function(e){if(!ua(e)){var s=la(e),r=new Uint8Array(this.toHash.byteLength+s.byteLength);r.set(this.toHash,0),r.set(s,this.toHash.byteLength),this.toHash=r}},t.prototype.digest=function(){var e=this;return this.key?this.key.then(function(s){return rt().crypto.subtle.sign(da,s,e.toHash).then(function(r){return new Uint8Array(r)})}):ua(this.toHash)?Promise.resolve(eS):Promise.resolve().then(function(){return rt().crypto.subtle.digest(qu,e.toHash)}).then(function(s){return Promise.resolve(new Uint8Array(s))})},t.prototype.reset=function(){this.toHash=new Uint8Array(0)},t})();function la(t){return typeof t=="string"?Yy(t):ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(t)}var rS=["decrypt","digest","encrypt","exportKey","generateKey","importKey","sign","verify"];function Vu(t){if(nS(t)&&typeof t.crypto.subtle=="object"){var e=t.crypto.subtle;return iS(e)}return!1}function nS(t){if(typeof t=="object"&&typeof t.crypto=="object"){var e=t.crypto.getRandomValues;return typeof e=="function"}return!1}function iS(t){return t&&rS.every(function(e){return typeof t[e]=="function"})}var oS=(function(){function t(e){if(Vu(rt()))this.hash=new sS(e);else throw new Error("SHA1 not supported")}return t.prototype.update=function(e,s){this.hash.update(it(e))},t.prototype.digest=function(){return this.hash.digest()},t.prototype.reset=function(){this.hash.reset()},t})(),Wu={name:"SHA-256"},fa={name:"HMAC",hash:Wu},aS=new Uint8Array([227,176,196,66,152,252,28,20,154,251,244,200,153,111,185,36,39,174,65,228,100,155,147,76,164,149,153,27,120,82,184,85]),cS=(function(){function t(e){this.toHash=new Uint8Array(0),this.secret=e,this.reset()}return t.prototype.update=function(e){if(!fs(e)){var s=it(e),r=new Uint8Array(this.toHash.byteLength+s.byteLength);r.set(this.toHash,0),r.set(s,this.toHash.byteLength),this.toHash=r}},t.prototype.digest=function(){var e=this;return this.key?this.key.then(function(s){return rt().crypto.subtle.sign(fa,s,e.toHash).then(function(r){return new Uint8Array(r)})}):fs(this.toHash)?Promise.resolve(aS):Promise.resolve().then(function(){return rt().crypto.subtle.digest(Wu,e.toHash)}).then(function(s){return Promise.resolve(new Uint8Array(s))})},t.prototype.reset=function(){var e=this;this.toHash=new Uint8Array(0),this.secret&&this.secret!==void 0&&(this.key=new Promise(function(s,r){rt().crypto.subtle.importKey("raw",it(e.secret),fa,!1,["sign"]).then(s,r)}),this.key.catch(function(){}))},t})(),Le=64,uS=32,dS=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),lS=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],fS=Math.pow(2,53)-1,_s=(function(){function t(){this.state=Int32Array.from(lS),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return t.prototype.update=function(e){if(this.finished)throw new Error("Attempted to update an already finished hash.");var s=0,r=e.byteLength;if(this.bytesHashed+=r,this.bytesHashed*8>fS)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;r>0;)this.buffer[this.bufferLength++]=e[s++],r--,this.bufferLength===Le&&(this.hashBuffer(),this.bufferLength=0)},t.prototype.digest=function(){if(!this.finished){var e=this.bytesHashed*8,s=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),r=this.bufferLength;if(s.setUint8(this.bufferLength++,128),r%Le>=Le-8){for(var n=this.bufferLength;n<Le;n++)s.setUint8(n,0);this.hashBuffer(),this.bufferLength=0}for(var n=this.bufferLength;n<Le-8;n++)s.setUint8(n,0);s.setUint32(Le-8,Math.floor(e/4294967296),!0),s.setUint32(Le-4,e),this.hashBuffer(),this.finished=!0}for(var i=new Uint8Array(uS),n=0;n<8;n++)i[n*4]=this.state[n]>>>24&255,i[n*4+1]=this.state[n]>>>16&255,i[n*4+2]=this.state[n]>>>8&255,i[n*4+3]=this.state[n]>>>0&255;return i},t.prototype.hashBuffer=function(){for(var e=this,s=e.buffer,r=e.state,n=r[0],i=r[1],o=r[2],a=r[3],u=r[4],c=r[5],h=r[6],d=r[7],f=0;f<Le;f++){if(f<16)this.temp[f]=(s[f*4]&255)<<24|(s[f*4+1]&255)<<16|(s[f*4+2]&255)<<8|s[f*4+3]&255;else{var m=this.temp[f-2],x=(m>>>17|m<<15)^(m>>>19|m<<13)^m>>>10;m=this.temp[f-15];var S=(m>>>7|m<<25)^(m>>>18|m<<14)^m>>>3;this.temp[f]=(x+this.temp[f-7]|0)+(S+this.temp[f-16]|0)}var y=(((u>>>6|u<<26)^(u>>>11|u<<21)^(u>>>25|u<<7))+(u&c^~u&h)|0)+(d+(dS[f]+this.temp[f]|0)|0)|0,v=((n>>>2|n<<30)^(n>>>13|n<<19)^(n>>>22|n<<10))+(n&i^n&o^i&o)|0;d=h,h=c,c=u,u=a+y|0,a=o,o=i,i=n,n=y+v|0}r[0]+=n,r[1]+=i,r[2]+=o,r[3]+=a,r[4]+=u,r[5]+=c,r[6]+=h,r[7]+=d},t})(),hS=(function(){function t(e){this.secret=e,this.hash=new _s,this.reset()}return t.prototype.update=function(e){if(!(fs(e)||this.error))try{this.hash.update(it(e))}catch(s){this.error=s}},t.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},t.prototype.digest=function(){return Bn(this,void 0,void 0,function(){return _n(this,function(e){return[2,this.digestSync()]})})},t.prototype.reset=function(){if(this.hash=new _s,this.secret){this.outer=new _s;var e=mS(this.secret),s=new Uint8Array(Le);s.set(e);for(var r=0;r<Le;r++)e[r]^=54,s[r]^=92;this.hash.update(e),this.outer.update(s);for(var r=0;r<e.byteLength;r++)e[r]=0}},t})();function mS(t){var e=it(t);if(e.byteLength>Le){var s=new _s;s.update(e),e=s.digest()}var r=new Uint8Array(Le);return r.set(e),r}var pS=(function(){function t(e){Vu(rt())?this.hash=new cS(e):this.hash=new hS(e)}return t.prototype.update=function(e,s){this.hash.update(it(e))},t.prototype.digest=function(){return this.hash.digest()},t.prototype.reset=function(){this.hash.reset()},t})();const gS=({serviceId:t,clientVersion:e})=>s=>C(null,null,function*(){var m,x,S,y,v,T,M,U,G,W;const r=typeof window!="undefined"?window.navigator:void 0,n=(m=r==null?void 0:r.userAgent)!=null?m:"",i=(y=(S=(x=r==null?void 0:r.userAgentData)==null?void 0:x.platform)!=null?S:ha.os(n))!=null?y:"other",o=void 0,a=(T=(v=r==null?void 0:r.userAgentData)==null?void 0:v.brands)!=null?T:[],u=a[a.length-1],c=(U=(M=u==null?void 0:u.brand)!=null?M:ha.browser(n))!=null?U:"unknown",h=(G=u==null?void 0:u.version)!=null?G:"unknown",d=[["aws-sdk-js",e],["ua","2.1"],[`os/${i}`,o],["lang/js"],["md/browser",`${c}_${h}`]];t&&d.push([`api/${t}`,e]);const f=yield(W=s==null?void 0:s.userAgentAppId)==null?void 0:W.call(s);return f&&d.push([`app/${f}`]),d}),ha={os(t){if(/iPhone|iPad|iPod/.test(t))return"iOS";if(/Macintosh|Mac OS X/.test(t))return"macOS";if(/Windows NT/.test(t))return"Windows";if(/Android/.test(t))return"Android";if(/Linux/.test(t))return"Linux"},browser(t){if(/EdgiOS|EdgA|Edg\//.test(t))return"Microsoft Edge";if(/Firefox\//.test(t))return"Firefox";if(/Chrome\//.test(t))return"Chrome";if(/Safari\//.test(t))return"Safari"}};class ds{constructor(e){g(this,"bytes");if(this.bytes=e,e.byteLength!==8)throw new Error("Int64 buffers must be exactly 8 bytes")}static fromNumber(e){if(e>9223372036854776e3||e<-9223372036854776e3)throw new Error(`${e} is too large (or, if negative, too small) to represent as an Int64`);const s=new Uint8Array(8);for(let r=7,n=Math.abs(Math.round(e));r>-1&&n>0;r--,n/=256)s[r]=n;return e<0&&ma(s),new ds(s)}valueOf(){const e=this.bytes.slice(0),s=e[0]&128;return s&&ma(e),parseInt(ke(e),16)*(s?-1:1)}toString(){return String(this.valueOf())}}function ma(t){for(let e=0;e<8;e++)t[e]^=255;for(let e=7;e>-1&&(t[e]++,t[e]===0);e--);}class yS{constructor(e,s){g(this,"toUtf8");g(this,"fromUtf8");this.toUtf8=e,this.fromUtf8=s}format(e){const s=[];for(const i of Object.keys(e)){const o=this.fromUtf8(i);s.push(Uint8Array.from([o.byteLength]),o,this.formatHeaderValue(e[i]))}const r=new Uint8Array(s.reduce((i,o)=>i+o.byteLength,0));let n=0;for(const i of s)r.set(i,n),n+=i.byteLength;return r}formatHeaderValue(e){switch(e.type){case"boolean":return Uint8Array.from([e.value?0:1]);case"byte":return Uint8Array.from([2,e.value]);case"short":const s=new DataView(new ArrayBuffer(3));return s.setUint8(0,3),s.setInt16(1,e.value,!1),new Uint8Array(s.buffer);case"integer":const r=new DataView(new ArrayBuffer(5));return r.setUint8(0,4),r.setInt32(1,e.value,!1),new Uint8Array(r.buffer);case"long":const n=new Uint8Array(9);return n[0]=5,n.set(e.value.bytes,1),n;case"binary":const i=new DataView(new ArrayBuffer(3+e.value.byteLength));i.setUint8(0,6),i.setUint16(1,e.value.byteLength,!1);const o=new Uint8Array(i.buffer);return o.set(e.value,3),o;case"string":const a=this.fromUtf8(e.value),u=new DataView(new ArrayBuffer(3+a.byteLength));u.setUint8(0,7),u.setUint16(1,a.byteLength,!1);const c=new Uint8Array(u.buffer);return c.set(a,3),c;case"timestamp":const h=new Uint8Array(9);return h[0]=8,h.set(ds.fromNumber(e.value.valueOf()).bytes,1),h;case"uuid":if(!vS.test(e.value))throw new Error(`Invalid UUID received: ${e.value}`);const d=new Uint8Array(17);return d[0]=9,d.set(Ca(e.value.replace(/\-/g,"")),1),d}}parse(e){const s={};let r=0;for(;r<e.byteLength;){const n=e.getUint8(r++),i=this.toUtf8(new Uint8Array(e.buffer,e.byteOffset+r,n));switch(r+=n,e.getUint8(r++)){case 0:s[i]={type:ga,value:!0};break;case 1:s[i]={type:ga,value:!1};break;case 2:s[i]={type:SS,value:e.getInt8(r++)};break;case 3:s[i]={type:xS,value:e.getInt16(r,!1)},r+=2;break;case 4:s[i]={type:bS,value:e.getInt32(r,!1)},r+=4;break;case 5:s[i]={type:wS,value:new ds(new Uint8Array(e.buffer,e.byteOffset+r,8))},r+=8;break;case 6:const o=e.getUint16(r,!1);r+=2,s[i]={type:ES,value:new Uint8Array(e.buffer,e.byteOffset+r,o)},r+=o;break;case 7:const a=e.getUint16(r,!1);r+=2,s[i]={type:CS,value:this.toUtf8(new Uint8Array(e.buffer,e.byteOffset+r,a))},r+=a;break;case 8:s[i]={type:AS,value:new Date(new ds(new Uint8Array(e.buffer,e.byteOffset+r,8)).valueOf())},r+=8;break;case 9:const u=new Uint8Array(e.buffer,e.byteOffset+r,16);r+=16,s[i]={type:RS,value:`${ke(u.subarray(0,4))}-${ke(u.subarray(4,6))}-${ke(u.subarray(6,8))}-${ke(u.subarray(8,10))}-${ke(u.subarray(10))}`};break;default:throw new Error("Unrecognized header type tag")}}return s}}var pa;(function(t){t[t.boolTrue=0]="boolTrue",t[t.boolFalse=1]="boolFalse",t[t.byte=2]="byte",t[t.short=3]="short",t[t.integer=4]="integer",t[t.long=5]="long",t[t.byteArray=6]="byteArray",t[t.string=7]="string",t[t.timestamp=8]="timestamp",t[t.uuid=9]="uuid"})(pa||(pa={}));const ga="boolean",SS="byte",xS="short",bS="integer",wS="long",ES="binary",CS="string",AS="timestamp",RS="uuid",vS=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/,Ku=4,et=Ku*2,ft=4,DS=et+ft*2;function kS({byteLength:t,byteOffset:e,buffer:s}){if(t<DS)throw new Error("Provided message too short to accommodate event stream message overhead");const r=new DataView(s,e,t),n=r.getUint32(0,!1);if(t!==n)throw new Error("Reported message length does not match received message length");const i=r.getUint32(Ku,!1),o=r.getUint32(et,!1),a=r.getUint32(t-ft,!1),u=new Ms().update(new Uint8Array(s,e,et));if(o!==u.digest())throw new Error(`The prelude checksum specified in the message (${o}) does not match the calculated CRC32 checksum (${u.digest()})`);if(u.update(new Uint8Array(s,e+et,t-(et+ft))),a!==u.digest())throw new Error(`The message checksum (${u.digest()}) did not match the expected value of ${a}`);return{headers:new DataView(s,e+et+ft,i),body:new Uint8Array(s,e+et+ft+i,n-i-(et+ft+ft))}}class TS{constructor(e,s){g(this,"headerMarshaller");g(this,"messageBuffer");g(this,"isEndOfStream");this.headerMarshaller=new yS(e,s),this.messageBuffer=[],this.isEndOfStream=!1}feed(e){this.messageBuffer.push(this.decode(e))}endOfStream(){this.isEndOfStream=!0}getMessage(){const e=this.messageBuffer.pop(),s=this.isEndOfStream;return{getMessage(){return e},isEndOfStream(){return s}}}getAvailableMessages(){const e=this.messageBuffer;this.messageBuffer=[];const s=this.isEndOfStream;return{getMessages(){return e},isEndOfStream(){return s}}}encode({headers:e,body:s}){const r=this.headerMarshaller.format(e),n=r.byteLength+s.byteLength+16,i=new Uint8Array(n),o=new DataView(i.buffer,i.byteOffset,i.byteLength),a=new Ms;return o.setUint32(0,n,!1),o.setUint32(4,r.byteLength,!1),o.setUint32(8,a.update(i.subarray(0,8)).digest(),!1),i.set(r,12),i.set(s,r.byteLength+12),o.setUint32(n-4,a.update(i.subarray(8,n-4)).digest(),!1),i}decode(e){const{headers:s,body:r}=kS(e);return{headers:this.headerMarshaller.parse(s),body:r}}formatHeaders(e){return this.headerMarshaller.format(e)}}class BS{constructor(e){g(this,"options");this.options=e}[Symbol.asyncIterator](){return this.asyncIterator()}asyncIterator(){return dt(this,null,function*(){try{for(var e=Jt(this.options.inputStream),s,r,n;s=!(r=yield new Oe(e.next())).done;s=!1){const i=r.value;yield this.options.decoder.decode(i)}}catch(r){n=[r]}finally{try{s&&(r=e.return)&&(yield new Oe(r.call(e)))}finally{if(n)throw n[0]}}})}}class _S{constructor(e){g(this,"options");this.options=e}[Symbol.asyncIterator](){return this.asyncIterator()}asyncIterator(){return dt(this,null,function*(){try{for(var e=Jt(this.options.messageStream),s,r,n;s=!(r=yield new Oe(e.next())).done;s=!1){const i=r.value;yield this.options.encoder.encode(i)}}catch(r){n=[r]}finally{try{s&&(r=e.return)&&(yield new Oe(r.call(e)))}finally{if(n)throw n[0]}}this.options.includeEndFrame&&(yield new Uint8Array(0))})}}class IS{constructor(e){g(this,"options");this.options=e}[Symbol.asyncIterator](){return this.asyncIterator()}asyncIterator(){return dt(this,null,function*(){try{for(var e=Jt(this.options.messageStream),s,r,n;s=!(r=yield new Oe(e.next())).done;s=!1){const i=r.value;const o=yield new Oe(this.options.deserializer(i));o!==void 0&&(yield o)}}catch(r){n=[r]}finally{try{s&&(r=e.return)&&(yield new Oe(r.call(e)))}finally{if(n)throw n[0]}}})}}class OS{constructor(e){g(this,"options");this.options=e}[Symbol.asyncIterator](){return this.asyncIterator()}asyncIterator(){return dt(this,null,function*(){try{for(var e=Jt(this.options.inputStream),s,r,n;s=!(r=yield new Oe(e.next())).done;s=!1){const i=r.value;yield this.options.serializer(i)}}catch(r){n=[r]}finally{try{s&&(r=e.return)&&(yield new Oe(r.call(e)))}finally{if(n)throw n[0]}}})}}function PS(t){let e=0,s=0,r=null,n=null;const i=a=>{if(typeof a!="number")throw new Error("Attempted to allocate an event message where size was not a number: "+a);e=a,s=4,r=new Uint8Array(a),new DataView(r.buffer).setUint32(0,a,!1)},o=function(){return dt(this,null,function*(){const a=t[Symbol.asyncIterator]();for(;;){const{value:u,done:c}=yield new Oe(a.next());if(c){if(e)if(e===s)yield r;else throw new Error("Truncated event message received.");else return;return}const h=u.length;let d=0;for(;d<h;){if(!r){const m=h-d;n||(n=new Uint8Array(4));const x=Math.min(4-s,m);if(n.set(u.slice(d,d+x),s),s+=x,d+=x,s<4)break;i(new DataView(n.buffer).getUint32(0,!1)),n=null}const f=Math.min(e-s,h-d);r.set(u.slice(d,d+f),s),s+=f,d+=f,e&&e===s&&(yield r,r=null,e=0,s=0)}}})};return{[Symbol.asyncIterator]:o}}function MS(t,e){return function(s){return C(this,null,function*(){const{value:r}=s.headers[":message-type"];if(r==="error"){const n=new Error(s.headers[":error-message"].value||"UnknownError");throw n.name=s.headers[":error-code"].value,n}else if(r==="exception"){const n=s.headers[":exception-type"].value,i={[n]:s},o=yield t(i);if(o.$unknown){const a=new Error(e(s.body));throw a.name=n,a}throw o[n]}else if(r==="event"){const n={[s.headers[":event-type"].value]:s},i=yield t(n);return i.$unknown?void 0:i}else throw Error(`Unrecognizable event type: ${s.headers[":event-type"].value}`)})}}let NS=class{constructor({utf8Encoder:e,utf8Decoder:s}){g(this,"eventStreamCodec");g(this,"utfEncoder");this.eventStreamCodec=new TS(e,s),this.utfEncoder=e}deserialize(e,s){const r=PS(e);return new IS({messageStream:new BS({inputStream:r,decoder:this.eventStreamCodec}),deserializer:MS(s,this.utfEncoder)})}serialize(e,s){return new _S({messageStream:new OS({inputStream:e,serializer:s}),encoder:this.eventStreamCodec,includeEndFrame:!0})}};const US=t=>({[Symbol.asyncIterator]:function(){return dt(this,null,function*(){const e=t.getReader();try{for(;;){const{done:s,value:r}=yield new Oe(e.read());if(s)return;yield r}}finally{e.releaseLock()}})}}),$S=t=>{const e=t[Symbol.asyncIterator]();return new ReadableStream({pull(r){return C(this,null,function*(){const{done:n,value:i}=yield e.next();if(n)return r.close();r.enqueue(i)})}})};class FS{constructor({utf8Encoder:e,utf8Decoder:s}){g(this,"universalMarshaller");this.universalMarshaller=new NS({utf8Decoder:s,utf8Encoder:e})}deserialize(e,s){const r=LS(e)?US(e):e;return this.universalMarshaller.deserialize(r,s)}serialize(e,s){const r=this.universalMarshaller.serialize(e,s);return typeof ReadableStream=="function"?$S(r):r}}const LS=t=>typeof ReadableStream=="function"&&t instanceof ReadableStream,HS=t=>new FS(t);function zS(r,n){return C(this,arguments,function*(t,e,s=1024*1024){const i=t.size;let o=0;for(;o<i;){const a=t.slice(o,Math.min(i,o+s));e(new Uint8Array(yield a.arrayBuffer())),o+=a.size}})}const jS=function(e,s){return C(this,null,function*(){const r=new e;return yield zS(s,n=>{r.update(n)}),r.digest()})},qS=t=>()=>Promise.reject(t),Je=64,VS=16,WS=[1732584193,4023233417,2562383102,271733878];class KS{constructor(){g(this,"state");g(this,"buffer");g(this,"bufferLength");g(this,"bytesHashed");g(this,"finished");this.reset()}update(e){if(GS(e))return;if(this.finished)throw new Error("Attempted to update an already finished hash.");const s=XS(e);let r=0,{byteLength:n}=s;for(this.bytesHashed+=n;n>0;)this.buffer.setUint8(this.bufferLength++,s[r++]),n--,this.bufferLength===Je&&(this.hashBuffer(),this.bufferLength=0)}digest(){return C(this,null,function*(){if(!this.finished){const{buffer:s,bufferLength:r,bytesHashed:n}=this,i=n*8;if(s.setUint8(this.bufferLength++,128),r%Je>=Je-8){for(let o=this.bufferLength;o<Je;o++)s.setUint8(o,0);this.hashBuffer(),this.bufferLength=0}for(let o=this.bufferLength;o<Je-8;o++)s.setUint8(o,0);s.setUint32(Je-8,i>>>0,!0),s.setUint32(Je-4,Math.floor(i/4294967296),!0),this.hashBuffer(),this.finished=!0}const e=new DataView(new ArrayBuffer(VS));for(let s=0;s<4;s++)e.setUint32(s*4,this.state[s],!0);return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)})}hashBuffer(){const{buffer:e,state:s}=this;let r=s[0],n=s[1],i=s[2],o=s[3];r=Ee(r,n,i,o,e.getUint32(0,!0),7,3614090360),o=Ee(o,r,n,i,e.getUint32(4,!0),12,3905402710),i=Ee(i,o,r,n,e.getUint32(8,!0),17,606105819),n=Ee(n,i,o,r,e.getUint32(12,!0),22,3250441966),r=Ee(r,n,i,o,e.getUint32(16,!0),7,4118548399),o=Ee(o,r,n,i,e.getUint32(20,!0),12,1200080426),i=Ee(i,o,r,n,e.getUint32(24,!0),17,2821735955),n=Ee(n,i,o,r,e.getUint32(28,!0),22,4249261313),r=Ee(r,n,i,o,e.getUint32(32,!0),7,1770035416),o=Ee(o,r,n,i,e.getUint32(36,!0),12,2336552879),i=Ee(i,o,r,n,e.getUint32(40,!0),17,4294925233),n=Ee(n,i,o,r,e.getUint32(44,!0),22,2304563134),r=Ee(r,n,i,o,e.getUint32(48,!0),7,1804603682),o=Ee(o,r,n,i,e.getUint32(52,!0),12,4254626195),i=Ee(i,o,r,n,e.getUint32(56,!0),17,2792965006),n=Ee(n,i,o,r,e.getUint32(60,!0),22,1236535329),r=Ce(r,n,i,o,e.getUint32(4,!0),5,4129170786),o=Ce(o,r,n,i,e.getUint32(24,!0),9,3225465664),i=Ce(i,o,r,n,e.getUint32(44,!0),14,643717713),n=Ce(n,i,o,r,e.getUint32(0,!0),20,3921069994),r=Ce(r,n,i,o,e.getUint32(20,!0),5,3593408605),o=Ce(o,r,n,i,e.getUint32(40,!0),9,38016083),i=Ce(i,o,r,n,e.getUint32(60,!0),14,3634488961),n=Ce(n,i,o,r,e.getUint32(16,!0),20,3889429448),r=Ce(r,n,i,o,e.getUint32(36,!0),5,568446438),o=Ce(o,r,n,i,e.getUint32(56,!0),9,3275163606),i=Ce(i,o,r,n,e.getUint32(12,!0),14,4107603335),n=Ce(n,i,o,r,e.getUint32(32,!0),20,1163531501),r=Ce(r,n,i,o,e.getUint32(52,!0),5,2850285829),o=Ce(o,r,n,i,e.getUint32(8,!0),9,4243563512),i=Ce(i,o,r,n,e.getUint32(28,!0),14,1735328473),n=Ce(n,i,o,r,e.getUint32(48,!0),20,2368359562),r=Ae(r,n,i,o,e.getUint32(20,!0),4,4294588738),o=Ae(o,r,n,i,e.getUint32(32,!0),11,2272392833),i=Ae(i,o,r,n,e.getUint32(44,!0),16,1839030562),n=Ae(n,i,o,r,e.getUint32(56,!0),23,4259657740),r=Ae(r,n,i,o,e.getUint32(4,!0),4,2763975236),o=Ae(o,r,n,i,e.getUint32(16,!0),11,1272893353),i=Ae(i,o,r,n,e.getUint32(28,!0),16,4139469664),n=Ae(n,i,o,r,e.getUint32(40,!0),23,3200236656),r=Ae(r,n,i,o,e.getUint32(52,!0),4,681279174),o=Ae(o,r,n,i,e.getUint32(0,!0),11,3936430074),i=Ae(i,o,r,n,e.getUint32(12,!0),16,3572445317),n=Ae(n,i,o,r,e.getUint32(24,!0),23,76029189),r=Ae(r,n,i,o,e.getUint32(36,!0),4,3654602809),o=Ae(o,r,n,i,e.getUint32(48,!0),11,3873151461),i=Ae(i,o,r,n,e.getUint32(60,!0),16,530742520),n=Ae(n,i,o,r,e.getUint32(8,!0),23,3299628645),r=Re(r,n,i,o,e.getUint32(0,!0),6,4096336452),o=Re(o,r,n,i,e.getUint32(28,!0),10,1126891415),i=Re(i,o,r,n,e.getUint32(56,!0),15,2878612391),n=Re(n,i,o,r,e.getUint32(20,!0),21,4237533241),r=Re(r,n,i,o,e.getUint32(48,!0),6,1700485571),o=Re(o,r,n,i,e.getUint32(12,!0),10,2399980690),i=Re(i,o,r,n,e.getUint32(40,!0),15,4293915773),n=Re(n,i,o,r,e.getUint32(4,!0),21,2240044497),r=Re(r,n,i,o,e.getUint32(32,!0),6,1873313359),o=Re(o,r,n,i,e.getUint32(60,!0),10,4264355552),i=Re(i,o,r,n,e.getUint32(24,!0),15,2734768916),n=Re(n,i,o,r,e.getUint32(52,!0),21,1309151649),r=Re(r,n,i,o,e.getUint32(16,!0),6,4149444226),o=Re(o,r,n,i,e.getUint32(44,!0),10,3174756917),i=Re(i,o,r,n,e.getUint32(8,!0),15,718787259),n=Re(n,i,o,r,e.getUint32(36,!0),21,3951481745),s[0]=r+s[0]&4294967295,s[1]=n+s[1]&4294967295,s[2]=i+s[2]&4294967295,s[3]=o+s[3]&4294967295}reset(){this.state=Uint32Array.from(WS),this.buffer=new DataView(new ArrayBuffer(Je)),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}}function nr(t,e,s,r,n,i){return e=(e+t&4294967295)+(r+i&4294967295)&4294967295,(e<<n|e>>>32-n)+s&4294967295}function Ee(t,e,s,r,n,i,o){return nr(e&s|~e&r,t,e,n,i,o)}function Ce(t,e,s,r,n,i,o){return nr(e&r|s&~r,t,e,n,i,o)}function Ae(t,e,s,r,n,i,o){return nr(e^s^r,t,e,n,i,o)}function Re(t,e,s,r,n,i,o){return nr(s^(e|~r),t,e,n,i,o)}function GS(t){return typeof t=="string"?t.length===0:t.byteLength===0}function XS(t){return typeof t=="string"?nt(t):ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(t)}const ZS=["in-region","cross-region","mobile","standard","legacy"],QS=({defaultsMode:t}={})=>Sl(()=>C(null,null,function*(){const e=typeof t=="function"?yield t():t;switch(e==null?void 0:e.toLowerCase()){case"auto":return Promise.resolve(JS()?"mobile":"standard");case"mobile":case"in-region":case"cross-region":case"standard":case"legacy":return Promise.resolve(e==null?void 0:e.toLocaleLowerCase());case void 0:return Promise.resolve("legacy");default:throw new Error(`Invalid parameter for "defaultsMode", expect ${ZS.join(", ")}, got ${e}`)}})),JS=()=>{var e;const t=window==null?void 0:window.navigator;if(t!=null&&t.connection){const{effectiveType:s,rtt:r,downlink:n}=t==null?void 0:t.connection;if(typeof s=="string"&&s!=="4g"||Number(r)>100||Number(n)<10)return!0}return((e=t==null?void 0:t.userAgentData)==null?void 0:e.mobile)||typeof(t==null?void 0:t.maxTouchPoints)=="number"&&(t==null?void 0:t.maxTouchPoints)>1},YS=t=>{var e,s,r,n,i,o,a,u,c,h,d,f,m,x,S,y,v,T,M;return{apiVersion:"2006-03-01",base64Decoder:(e=t==null?void 0:t.base64Decoder)!=null?e:Mt,base64Encoder:(s=t==null?void 0:t.base64Encoder)!=null?s:gt,disableHostPrefix:(r=t==null?void 0:t.disableHostPrefix)!=null?r:!1,endpointProvider:(n=t==null?void 0:t.endpointProvider)!=null?n:Bc,extensions:(i=t==null?void 0:t.extensions)!=null?i:[],getAwsChunkedEncodingStream:(o=t==null?void 0:t.getAwsChunkedEncodingStream)!=null?o:_d,httpAuthSchemeProvider:(a=t==null?void 0:t.httpAuthSchemeProvider)!=null?a:Dp,httpAuthSchemes:(u=t==null?void 0:t.httpAuthSchemes)!=null?u:[{schemeId:"aws.auth#sigv4",identityProvider:U=>U.getIdentityProvider("aws.auth#sigv4"),signer:new Sa},{schemeId:"aws.auth#sigv4a",identityProvider:U=>U.getIdentityProvider("aws.auth#sigv4a"),signer:new dd}],logger:(c=t==null?void 0:t.logger)!=null?c:new Dn,protocol:(h=t==null?void 0:t.protocol)!=null?h:Ps,protocolSettings:(d=t==null?void 0:t.protocolSettings)!=null?d:{defaultNamespace:"com.amazonaws.s3",xmlNamespace:"http://s3.amazonaws.com/doc/2006-03-01/",version:"2006-03-01",serviceTarget:"AmazonS3"},sdkStreamMixin:(f=t==null?void 0:t.sdkStreamMixin)!=null?f:Aa,serviceId:(m=t==null?void 0:t.serviceId)!=null?m:"S3",signerConstructor:(x=t==null?void 0:t.signerConstructor)!=null?x:hc,signingEscapePath:(S=t==null?void 0:t.signingEscapePath)!=null?S:!1,urlParser:(y=t==null?void 0:t.urlParser)!=null?y:Us,useArnRegion:(v=t==null?void 0:t.useArnRegion)!=null?v:void 0,utf8Decoder:(T=t==null?void 0:t.utf8Decoder)!=null?T:nt,utf8Encoder:(M=t==null?void 0:t.utf8Encoder)!=null?M:Lt}},ex=t=>{var n,i,o,a,u,c,h,d,f,m,x,S,y,v,T;const e=QS(t),s=()=>e().then(Ql),r=YS(t);return H(k(k({},r),t),{runtime:"browser",defaultsMode:e,bodyLengthChecker:(n=t==null?void 0:t.bodyLengthChecker)!=null?n:Gl,credentialDefaultProvider:(i=t==null?void 0:t.credentialDefaultProvider)!=null?i:(M=>()=>Promise.reject(new Error("Credential is missing"))),defaultUserAgentProvider:(o=t==null?void 0:t.defaultUserAgentProvider)!=null?o:gS({serviceId:r.serviceId,clientVersion:Jy.version}),eventStreamSerdeProvider:(a=t==null?void 0:t.eventStreamSerdeProvider)!=null?a:HS,maxAttempts:(u=t==null?void 0:t.maxAttempts)!=null?u:$s,md5:(c=t==null?void 0:t.md5)!=null?c:KS,region:(h=t==null?void 0:t.region)!=null?h:qS("Region is missing"),requestHandler:wn.create((d=t==null?void 0:t.requestHandler)!=null?d:s),retryMode:(f=t==null?void 0:t.retryMode)!=null?f:(()=>C(null,null,function*(){return(yield s()).retryMode||Mm})),sha1:(m=t==null?void 0:t.sha1)!=null?m:oS,sha256:(x=t==null?void 0:t.sha256)!=null?x:pS,streamCollector:(S=t==null?void 0:t.streamCollector)!=null?S:wa,streamHasher:(y=t==null?void 0:t.streamHasher)!=null?y:jS,useDualstackEndpoint:(v=t==null?void 0:t.useDualstackEndpoint)!=null?v:(()=>Promise.resolve(pm)),useFipsEndpoint:(T=t==null?void 0:t.useFipsEndpoint)!=null?T:(()=>Promise.resolve(gm))})},tx=t=>({setRegion(e){t.region=e},region(){return t.region}}),sx=t=>({region:t.region()}),rx=t=>{const e=t.httpAuthSchemes;let s=t.httpAuthSchemeProvider,r=t.credentials;return{setHttpAuthScheme(n){const i=e.findIndex(o=>o.schemeId===n.schemeId);i===-1?e.push(n):e.splice(i,1,n)},httpAuthSchemes(){return e},setHttpAuthSchemeProvider(n){s=n},httpAuthSchemeProvider(){return s},setCredentials(n){r=n},credentials(){return r}}},nx=t=>({httpAuthSchemes:t.httpAuthSchemes(),httpAuthSchemeProvider:t.httpAuthSchemeProvider(),credentials:t.credentials()}),ix=(t,e)=>{const s=Object.assign(tx(t),sf(t),ed(t),rx(t));return e.forEach(r=>r.configure(s)),Object.assign(t,sx(s),rf(s),td(s),nx(s))};class lx extends Xl{constructor(...[s]){const r=ex(s||{});super(r);g(this,"config");this.initConfig=r;const n=Tp(r),i=Ih(n),o=Lf(i),a=ep(o),u=xm(a),c=u,h=Pm(c),d=bm(h),f=kp(d),m=Sh(f,{session:[()=>this,Zy]}),x=ix(m,(s==null?void 0:s.extensions)||[]);this.config=x,this.middlewareStack.use(qd(this.config)),this.middlewareStack.use(mm(this.config)),this.middlewareStack.use(ap(this.config)),this.middlewareStack.use(Cm(this.config)),this.middlewareStack.use(jf(this.config)),this.middlewareStack.use(Wf(this.config)),this.middlewareStack.use(Xf(this.config)),this.middlewareStack.use(pd(this.config,{httpAuthSchemeParametersProvider:Ap,identityProviderConfigProvider:S=>C(this,null,function*(){return new hl({"aws.auth#sigv4":S.credentials,"aws.auth#sigv4a":S.credentials})})})),this.middlewareStack.use(bd(this.config)),this.middlewareStack.use(Th(this.config)),this.middlewareStack.use(id(this.config)),this.middlewareStack.use(ih(this.config)),this.middlewareStack.use(fh(this.config)),this.middlewareStack.use(yh(this.config))}destroy(){super.destroy()}}function ox(t){return e=>s=>C(null,null,function*(){const r=k({},s.input),n=[{target:"SSECustomerKey",hash:"SSECustomerKeyMD5"},{target:"CopySourceSSECustomerKey",hash:"CopySourceSSECustomerKeyMD5"}];for(const i of n){const o=r[i.target];if(o){let a;typeof o=="string"?cx(o,t)?a=t.base64Decoder(o):(a=t.utf8Decoder(o),r[i.target]=t.base64Encoder(a)):(a=ArrayBuffer.isView(o)?new Uint8Array(o.buffer,o.byteOffset,o.byteLength):new Uint8Array(o),r[i.target]=t.base64Encoder(a));const u=new t.md5;u.update(a),r[i.hash]=t.base64Encoder(yield u.digest())}}return e(H(k({},s),{input:r}))})}const ax={name:"ssecMiddleware",step:"initialize",tags:["SSE"],override:!0},Gu=t=>({applyToStack:e=>{e.add(ox(t),ax)}});function cx(t,e){if(!/^(?:[A-Za-z0-9+/]{4})*([A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(t))return!1;try{return e.base64Decoder(t).length===32}catch(r){return!1}}class fx extends ct.classBuilder().ep(H(k({},bt),{DisableS3ExpressSessionAuth:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"},Key:{type:"contextParams",name:"Key"},CopySource:{type:"contextParams",name:"CopySource"}})).m(function(e,s,r,n){return[St(r,e.getEndpointParameterInstructions()),yt(r),Gu(r)]}).s("AmazonS3","CopyObject",{}).n("S3Client","CopyObjectCommand").sc(jy).build(){}class hx extends ct.classBuilder().ep(H(k({},bt),{Bucket:{type:"contextParams",name:"Bucket"},Key:{type:"contextParams",name:"Key"}})).m(function(e,s,r,n){return[St(r,e.getEndpointParameterInstructions()),yt(r)]}).s("AmazonS3","DeleteObject",{}).n("S3Client","DeleteObjectCommand").sc(Vy).build(){}class mx extends ct.classBuilder().ep(H(k({},bt),{Bucket:{type:"contextParams",name:"Bucket"}})).m(function(e,s,r,n){return[St(r,e.getEndpointParameterInstructions()),Ka(r,{requestAlgorithmMember:{httpHeader:"x-amz-sdk-checksum-algorithm",name:"ChecksumAlgorithm"},requestChecksumRequired:!0}),yt(r)]}).s("AmazonS3","DeleteObjects",{}).n("S3Client","DeleteObjectsCommand").sc(Wy).build(){}class px extends ct.classBuilder().ep(H(k({},bt),{Bucket:{type:"contextParams",name:"Bucket"}})).m(function(e,s,r,n){return[St(r,e.getEndpointParameterInstructions()),yt(r)]}).s("AmazonS3","HeadBucket",{}).n("S3Client","HeadBucketCommand").sc(Ky).build(){}class gx extends ct.classBuilder().ep(H(k({},bt),{Bucket:{type:"contextParams",name:"Bucket"},Prefix:{type:"contextParams",name:"Prefix"}})).m(function(e,s,r,n){return[St(r,e.getEndpointParameterInstructions()),yt(r)]}).s("AmazonS3","ListObjectsV2",{}).n("S3Client","ListObjectsV2Command").sc(Gy).build(){}class yx extends ct.classBuilder().ep(H(k({},bt),{Bucket:{type:"contextParams",name:"Bucket"},Key:{type:"contextParams",name:"Key"}})).m(function(e,s,r,n){return[St(r,e.getEndpointParameterInstructions()),Ka(r,{requestAlgorithmMember:{httpHeader:"x-amz-sdk-checksum-algorithm",name:"ChecksumAlgorithm"},requestChecksumRequired:!1}),eh(),yt(r),Gu(r)]}).s("AmazonS3","PutObject",{}).n("S3Client","PutObjectCommand").sc(Xy).build(){}export{fx as C,hx as D,px as H,gx as L,yx as P,lx as S,ol as _,mx as a,nt as f,Lt as t};
